FORMAT: 1A
HOST: https://api-test.enterprise.agero.com/v1/id

# Roadside Connect REST API
<a name="Introduction"></a>
Roadside Connect allows third party applications to share real-time Dispatch Status information with the customer whenever they want it, however they want it. In general, the 4 Dispatch Statuses we will attempt to collect are: in-route, on-scene, tow-in-progress (when applicable), and job-complete. Dispatch Status updates always include timestamps, and sometimes (depending on the technology involved) include geostamps as well.

Agero will convey Dispatch Status information to its customers via 5 different methods: 1) Website, 2) Text Message & Email, 3) IVR, 4) Client-branded Mobile Apps, and 5) Connected Vehicle. In addition to that , Roadside Connect applications will allow third party developers to:

• Create a demo account for sales and marketing purposes

• Capture pictures of the customer’s vehicle for accident events and damage claims

• Incorporate optical character recognition functionality for VIN and odometer

• Implement Beacon Software Tow Spec API

• Implement Driver & truck picture approval capability

• Incorporate the ability for a service provider to scan and send crisp, clear images of receipts & towing documents and upload to a server

• Assign default tow truck image to client’s logo (Cadillac specifically) for Mobile Tech dispatches • Enable a data pop in One Road for dispatches cancelled via Roadside Connect

• Manage the ‘Driver’ role including adding additional profile field data such as name and cell phone

• Mobile Instant Dispatch – allow user(s) with appropriate ‘dispatcher’ credentials to accept/reject dispatch requests for other users/drivers and assign jobs to drivers o This includes profile management (add, edit, view a list of drivers)   

# 3 Data Models

## 3.1 Dispatch

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    dispatchRequestNumber           |The dispatch Request ID from OneRoad  |YES|String||
|    referenceNumber           |The reference number from OneRoad |YES|String||
|    poNumber           |The PO Number from OneRoad |YES/NO|String|Jobs in the "NEW" status  will not have PO Numbers|
|    currentStatus           | The current status of the job|YES|DispatchStatus||
|    etaStatusCode           |Represents the ETA Status Code |NO | Enum| Refer to section 12.9 for possible ETA Status Codes|
|    eta           |Represents the original estimated  time of arrival in UTC time  |NO|DateTime  |Only available if the job is accepted |
|    etaInMinutes           |Represents the original ETA provided   |NO|Integer|Only available if the job is accepted |
|    revisedEta           |Represents the revised estimated time of arrival in UTC time |NO|DateTime| Only available if the SP provides callsback and  provides a new ETA |
|    revisedEtaInMinutes           |Represents the revised ETA in mins provided |YES|Double|
|    etaRevisionCount           |Represents the # of times ETA has been revised|NO|Integer|Only applicable if the ETA  is revised at least once|
|    responseTimeExtCount           |Represents the # of times accepted counter has been extended|NO|Integer||
|    serviceType           |Type of service  |YES | String|Possible Values: Tow to Storage  Door Unlock Fuel Delivery Jump Start Flat Tire Winch Reunite|            
|    disablementLocation           |The disablement location|YES|ServiceLocation||
|    towDestination           |The tow destination if  the service is tow|YES/NO|ServiceLocation|Required if service type is tow|
|    assignedDriver           |The name of the driver,if any, |YES/NO |Driver|             Required if driver is assigned|
|    coverage           |Indicates the coverage  information | YES   |String |  Example: Customer covered on this service to the Designated Tow Destination.Your service is only eligible to be paid by CCAS if the customer vehicle arrives at the Designated Tow Destination specified on vehicle arrives at the Designated  Tow Destination specified on this dispatch summary or we provide approval for a change to the tow  destination before service is rendered.<BR><B>Included: </B><BR>Storage    Cost<BR><!--EXCLUDEDTEXT--> |
|    urgency           |The urgency of the request.|YES|String|Possible Values: STANDARD PRIORITY|
|    problem           |   The type of problem.    |YES|String|Example(s): Inoperable Problem Stuck Would not Start|
|    equipment           |The equipment required   to perform the service. |YES |Equipment|
|    receivedTime           ||YES      |           UTCTime|
|    acceptedTime           ||NO      |           UTCTime|
|    vehicle           | vehicleData |                       | vehicle|
|    comments           |An Array of dispatch comments |          NO        |          DispatchComment[]|
|    signatures           |An array of signatures  captured for the dispatch|                NO |                 Signature[]|
|    dispatcherContactNumber           |  Represents the dispatcher Contact Details |        NO    |              String|Phone number of the Dispatcher|
|    dispatcher           |  Represents the Dispatcher Complete details    |        NO    | Dispatcher||



  
## 3.2 Vehicle

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   Vin         |            Vehicle Identification Number|            YES/NO  |            String|
|  Year         |           Vehicle Model Year             |          YES    |             String|
|  make         |           Vehicle Make               |              YES  |               String|
| model         |          vehicle Model             |               YES/NO  |            String|
|color          |         vehicle color               |             YES/NO  |            String |
|  plate        |           Vehicle State and plate |                 NO   |               String  |
|state         |          State in which the vehicle |              NO    |              String  |
|vehicleType  |           Vehicle Type/class          |             YES  |               String |
|drivetrainType |         Vehicle drivetrain type   |               YES   |              String|
|fuelType  |              Vehicle fuel type     |                   YES    |             String|
|   Mileage    |             Current OD Reading |                      YES/NO  |            String|            

## 3.3 DispatchStatus

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code       |             The status code     |                     YES      |           String  |
| reason   |               Reason for the status.|                   YES/NO |             String  |       Some statuses require a  reason|
| description   |      Details about the current status|                  NO |             String  |    |
| reasonCode   |     Reason code|              YES/NO|             Int  |  Some statuses require the code  |
|eta        |             Service Provider ETA    |                 YES/NO  |            Integer  |      Required to accept a    dispatch request.|
|  extJobId  |              External Job Id      |                    NO   |               String  |
|source     |             Source System    |                        YES/NO|              String    |     Required if 3rd party|
| latitude   |             Current GPS Latitude  |                   NO |                 Double |
|longitude  |             Current GPS Longitude  |                  NO  |                Double |
|statusTime   |            Date and Time when the status   was reported  |        YES      |           UTC Time |
| driverId   |    DriverId of the current assigned Driver |                   NO |                 String |
|reportedBy  |            User Role who took action on the Distpatch |                  NO  |                String |
|Event   |           Details available with PTO  |        NO      |          String|


## 3.4 Location

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   address1    |            First Address Line  |                     YES |                String|
|  address2      |          Second Address Line     |                 NO   |               String|
|    city        |                                   |                  NO    |              String|
| state         |                                   |                NO     |             String|
|postalCode      |                                               |  NO      |            String |
|  CrossStreet     |                                |                 NO |                 String   |
| landmark    |                                     |                NO   |               String |
| locationType |                                     |               NO    |              String|
|poi1        |            First Point of Interest   |               NO      |            String|
| poi2        |            Second Point of Interest  |               NO      |            String|
| lat         |            latitude          |                       YES/NO  |            Double|         lat/Long is required for    navigation and mapping operations|  
|long         |           Longitude          |                      Yes/NO   |            Double|

   
## 3.5 ServiceLocation extends Location

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|  contactInfo      |                                             |   YES |                Contact|
|  dropInstructions   |                                           |   NO |                 String  |
|  GarageClearanceHeight|                                          |  NO  |                String|
| GarageLevel     |                                                 |NO  |                String|
| IsDriverWithVehicle  |                                           | YES     |            Boolean|
|  NightDropOff   |                                                |  NO   |               Boolean |
| Parked           |                                               | NO    |              Boolean |



   
                            
                            
## 3.6 Contact

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|  name          |                                                  | YES  |               String|
|  phone         |                                                   |YES    |             String|
|   callBackNumber|                                                   |YES  |               String|

  
## 3.7 Driver

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   driverId    |        Equivalent to the profile ID    |         YES      |           String|
|  name         |           Driver’s name                |            YES   |           String|
| status        | represents the status code of the current dispatch driver is working on|       YES  |               Enumeration |     Please refer to Enumerations API   |
|equipment      |         Driver’s equipment type        |          NO     |             DriverEquipment|
| currentlocation|         Driver’s current location     |           YES    |             Location|
|  gpsTracking     |  Flag which indicates if the driver is   GPS enabled or not| YES   |              Boolean|  
| profilePictureUrl  |     Represents the resource URI where a   profile picture of the driver can be    downloaded from |    NO    |              String   |        URL is available  if and only if a   driver uploaded a profile picture READ ONLY  DOES NOT INCLUDE BASE  URI|
| profileLastUpdatedAt|    Represents the date and time at which the profile picture was last updated at|        YES  |               DateTime |        READ ONLY|
|onDuty               |  Represents whether the dispatcher is available or not   |  YES                 |Boolean   |      This is determined by whether the dispatcher is loggedin in to  RoadsideConnect platform|
| officephone|    Represents the phone numberwhere the Dispatcher can be reached at|        YES  |               String |       |
|officeEmail               |  Represents the email address of the Dispatcher  |  YES                 |String   |    |
| smartphone               |    Specified if the Driver holds a smartphone    |                            NO      |           Boolean|
|cellphone            |  Phone number of the driver |           NO   |           String|
|  disablementLocation              |     Current Job Disablement Location|                NO  |              ServiceLocation|
|serviceType          |   Current Service Type for the Job  |                 NO    |              String      |
| username      |      Username of the Driver     |                 NO  |                String|
                                                                                                        
 
## 3.8 UserInfo

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| name               |     Full Name    |                            YES      |           String|
|cellPhone            |   Personal Cell Phone Number   |            YES/NO      |           String|Required for certain roles (Owner/Manager/Dispatcher/Driver) Optional for Staff/Accountant/etc. roles|
|  email              |     Personal Email Address   |                YES  |               String|
|officeEmail          |   Office email address    |                 NO    |              String      |
| officePhone      |       Office Phone Number     |                 NO  |                String|
 profilePictureURL  |     Represents resource URI  where profile picture can be downloaded  from|        NO    |              String  |       READ ONLY DOES NOT INCLUDE BASE  URI|
                                                                       
 
###Sample JSON

    {
        "name" : "Jon Doe",
        "cellPhone" : "555-555-5555",
        "email" : "jdoe@gmail.com",
        "officeEmail" : "jdoe@abctowing.com",
        "officePhone" : "555-555-1111"
    }
    
## 3.8x UserDetail

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|userId              |     Profile ID of the User  |                            YES      |           String|
| name               |     Full Name    |                            YES      |           String|
|userName               |  Username/LoginName   |                            YES      |           String|
|  email              |     Personal Email Address   |                YES  |               String|
|  role              |    Role of the User  |                YES  |               Roles[]|User Roles Enumeration|
|isLocked          |   Confirms if the user account is locked    |              YES    |              Boolean      |
| isActive      |       Confirms if the user account is approved     |               YES  |            Boolean|If not approved then user shall not show up in Manage Users API in Agero Support|
 |createdDate |    UTC Date time when the account was created|        NO    |              DateTime  |       ReadOnly|
 |lastLoggedInDate          |  UTC Date time of the last successful user log in |                 NO    |              DateTime      |ReadOnly|
| lastActivityDate      |      UTC Date time if the last user activity    |                 NO  |                DateTime|ReadOnly|

                                                                       
 
###Sample JSON

            {
            "userId" : "12345",
            "name" : "Jon Doe",
            "userName" : "jdoe",
            "email" : "jdoe@gmail.com",
            "roles" : [
            {
            "code" : "1"
            },
            {
            "code" : "2"
            }
            ],
            "isLocked" : false,
            "isActive" : true,
            "createdDate" : "2014-01-31 08:30 AM",
            "lastLoggedInDate" : "2014-11-06 08:30 AM",
            "lastActivityDate" : "2014-01-31 08:30 AM"
            }
    
## 3.9 DriverEquipment

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|equipmentId    |         Equiment Id    |                          YES     |            String|
| addressId      |         Address Id of the Facility where the |    YES     |            Integer|
| type          |          Equipment Type              |             Readonly|            String  |
|vehicleNickname|         Name/Number for the assigned  |           NO       |           String|
| equipmentPictureUrl |    Url for the picture of the equipment |    NO    |              URL|
|LastUpdatedAt|    Represents the date and time at which the equipment picture was last updated at|        YES  |               DateTime |        READ ONLY|


###Sample JSON

    {
        "equipmentId" : "LDWL",
        "addressId" : 1,
        "type" : "Light Duty Wheel Lift",
        "vehicleNickname" : "blue truck",
        "equipmentPictureUrl" : "/vendors/23424/drivers/24234/driverEquipment/picture",
        "lastUpdatedAt" : "2013-01-31 08:30 AM"
    }

## 3.10 Preferences

| Schema Property                      | Description                                                                                   | Is Required | Type    | Business Rules                                                                                      |
|:--------------------------------------|:-----------------------------------------------------------------------------------------------|:-------------|:---------|:-----------------------------------------------------------------------------------------------------|
| jobFilter                            | A bitmap indicating what types of jobs to display. Eg. All, Only My Jobs, Unassigned.         | YES         | Integer | 1-All Jobs 2-Unassigned 4-My Jobs Only                                                              |
| jobViewOpt                           | How to view the job list.                                                                     | NO          | Integer | Not Applicable                                                                                      |
| gpsTracking                          | Enable GPS tracking?                                                                          | YES         | Boolean | Default = true                                                                                      |
| etaAlerts                            | Enable ETA alerts?                                                                            | YES         | Boolean | Default = true                                                                                      |
| inactivityAlert                      | Enable Inactivity Alerts?                                                                     | YES         | Boolean | Default = true                                                                                      |
| autoAssignAllJobs                    | Enable auto assignment of all jobs to the authenticated user                                  | YES         | Boolean | Default = false                                                                                     |
| subscribeToNewsletter                | Boolean flag that indicates if the user wants to subscribe to Newsletter email                | YES         | Boolean | Default=true                                                                                        |
| consentToTextAndPhoneStatusUpdates   | Boolean flag that indicates if the user wants to be located for text and phone status updates | YES         | Boolean | Default=true                                                                                        |
| passwordManagementPrivilege          | Boolean flag that indicates if a user can see/reset password of other users                   | NO          | Boolean | Default=false READ ONLY except for an Owner. Only an owner can change the value for a given Manager |
| jobConfirmationExpectedViaEmailOrFax | Boolean flag that indicates if a job confirmation needs to be sent over via fax / email       | YES         | Boolean | READ ONLY flag                                                                                      |
                                                                                                        
                                                                                                         
    
###Sample JSON

    {
        "jobFilter" : 1,
        "jobViewOpt" : "Service, Address, City",
        "gpsTracking" : true,
        "etaAlerts" : true,
        "inactivityAlert" : true,
        "autoAssignAllJobs" : false,
        "subscribeToNewsletterEmail" : true,
        "consentToTextAndPhoneStatusUpdates" : true,
        "passwordManagementPrivilege" : false"
    }
    
## 3.11 Equipment

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|  equipmentId|             Equiment Id    |                          YES  |               String|
| type        |            Equipment Type Name   |                   Readonly       |     String|

 
    
###Sample JSON

    {
        "equipmentId" : "LDWL",
        "type" : "Light Duty Wheel Lift"
    }
    
## 3.12 VendorEquipment

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|  equipmentId|             Equiment Id    |                          YES  |               String|
|  vendorId  |              Vendor ID of the service provider  owning the equipment|      YES    |             String|
|  addressId |              Address Id of the Facility where the  equipment is registered with Agero|   YES   |              Integer  |
| type    |                Equipment Type      |                     Readonly |           String|
|quantity |               Represents the count of equipment available at the facility |      YES   |              Integer|
|  shiftType |              Represents the type of shift the equipment is available for  |       YES        |         Enum   | 
|startDate  |             Represents the start date the   equipment is available from  |       YES       |          Date|


###Sample JSON

    {
        "equipmentId" : "LDWL",
        "addressId" : 1,
        "type" : "Light Duty Wheel Lift",
        "quantity" : {
                "code":"ALL",
                "desc":"24 hour"
        },
        "startDate" : "11/6/2007"
    }

## 3.13 Signature

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| signatureId        | Represents the uinique identifier of the signature entry                 | YES         | String                   | This is to be used if a single signature entry is needed |
| signeeType         | Represents the role of the person who signed                             | YES         | SigneeType Enum          |                                                          |
| signeeName         | Represents the name of the person who signed                             | YES         | String                   |                                                          |
| signatureReason    | Represents the reason why signature was captured                         | YES         | SignatureReasonType Enum |                                                          |
| locationType       | Represents the type of the location at which signature was captured      | YES         | LocationType Enum        |                                                          |
| latitude           | Represents the latitude of the location at which signature was captured  | YES         | Double                   |                                                          |
| longitude          | Represents the longitude of the location at which signature was captured | YES         | Double                   |                                                          |
| dispatchStatusCode | Represents the state of the dispatch at which signature was captured     | YES         | String                   |                                                          |
| capturedDateTime   | Reprsents the date time at which signature was captured                  | YES         | DateTime                 |                                                          |
| signatureUrl       | Represents the captured signature in picture format                      | NO          | URL                      | This is available signature was captured                 |

    
                                                                                                        
###Sample JSON

    {
        "signatureId" : "244254",
        "signeeName" : "Smith",
        "signeeType" : "1",
        "signatureReason" : "1",
        "locationType" : "1",
        "latitude" : 72.3434,
        "longitude" : -182.43543,
        "dispatchStatusCode" : "20",
        "capturedDateTime" : "12/21/2012 11:28 AM",
        "signatureUrl" : "/dispatches/354235235/signatures/234234/picture"        
    }
    
## 3.14 EnumerationType

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| code        | Provides unique identifier of the       driver type       | YES         | String                   | |
| description         | Description  of the driver type                           | YES         | String         |                                                          |

  
    
## 3.15 DriverType extends EnumerationType

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| code        | Provides unique identifier of the       driver type       | YES         | String                   | |
| description         | Description  of the driver type                           | YES         | String         |    

   

###Sample JSON

    {
        "code" : "1",
        "description" : "GPS enabled driver"
    }

## 3.16 SigneeType extends EnumerationType

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| code        | Provides unique identifier of the       signee type       | YES         | String                   | |
| description         | Description  of the  signee type                          | YES         | String         |    

  
###Sample JSON

    {
        "code" : "1",
        "description" : "Vehicle Owner / Driver"
    }

## 3.17 SignatureReasonType extends EnumerationType

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| code        | Provides unique identifier of the      signature Reason      | YES         | String                   | |
| description         | Description  of the  signature Reason                      | YES         | String         |

  

###Sample JSON

    {
        "code" : "1",
        "description" : "Pre-existing Damages"
    }

## 3.18 SignatureLocationType  extends EnumerationType

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| code        | Provides unique identifier of the      signature location     | YES         | String                   | |
| description         | Description  of the  signature location                  | YES         | String         |

   

###Sample JSON

    {
        "code" : "1",
        "description" : "Tow Location"
    }

###ApiError

| Schema Property    | Description                                                              | Is Required | Type                     | Business Rules                                           |
|:--------------------|:--------------------------------------------------------------------------|:-------------|:--------------------------|:----------------------------------------------------------|
| errorCode        |Short code identifying the error   signature location   | YES         | String                   | |
|          | Error Description                 | YES         | String         |
| innerErrors         | An array of errors that caused this   error          | NO         | ApiError         |

  

###Sample Error JSON

    {
        "errorCode":"REQUEST_PARAMETER_MISSING",
        "error":"Request Validation failed.",
        "innerErrors":
        [
            {
                "errorCode":"userInfo.Name",
                "error":"name cannot be empty or null.",
                "innerErrors":null
            },
            {
                "errorCode":"userInfo.CellPhone",
                "error":"cell phone cannot be empty or null.",
                "innerErrors":null
            },
            {
                "errorCode":"userInfo.Email",
                "error":"personal email cannot be empty or null.",
                "innerErrors":null
            }
            
        ]
    }


## 3.19 Dispatcher

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   dispatcherId    |        Equivalent to the profile ID    |         YES      |           String|
|  name         |          Dispatcher’s name                  |            YES   |           String|
| officephone        | Represents the phone number where the Dispatcher can be reached at|       YES  |               String |   |
|officeEmail      |     Represents the email address of the Dispatcher    |          YES     |             String|
| profilePictureUrl  |     Represents the resource URI where a   profile picture of the driver can be    downloaded from |    NO    |              String   |        URL is available  if and only if a   driver uploaded a profile picture READ ONLY  DOES NOT INCLUDE BASE  URI|
| profileLastUpdatedAt|    Represents the date and time at which the profile picture was last updated at|        YES  |               DateTime |        READ ONLY|
|onDuty               |  Represents whether the dispatcher is available or not   |  YES                 |Boolean   |      This is determined by whether the dispatcher is loggedin in to  RoadsideConnect platform|

    
###Sample JSON

    {
        "dispatcherId" : "35325235",
        "name" : "Jon Doe",
        "officeEmail" : "jdoe@abctowing.com",
        "officePhone" : "555-555-1111",
        "profilePictureUrl" : "/vendors/53240/dispatchers/3949/picture",
        "profileLastUpdatedAt" : "2013-01-31 08:30 AM",
        "onDuty":true
    }
                                                                                                        
                                                                                                        
## 3.20 Facility

| Schema Property       | Description                                                   | Is Required | Type                | Business Rules                                              |
|:-----------------------|:---------------------------------------------------------------|:-------------|:---------------------|:-------------------------------------------------------------|
| id               | Represents the unique identifier of the facility                                                              | YES         | String              |                                                             |
| name                  | Represents the name of the facility                                                              | YES         | String              |                                                             |
| address               |                                                               | YES         | String              |                                                             |
| city                  |                                                               | YES         | String              |                                                             |
| state                 |                                                               | YES         | String              |                                                             |
| zipcode               |                                                               | YES         | String              |                                                             |
| lat                   | Latitude                                                      | YES         | String              | lat/Long is required for navigation and mapping operations. |
| lon                   | Longitude                                                     | YES         | Double              |                                                             |
| primaryEmailAddress   | Represents the primary Email Address of the facility          | YES         | Double              |                                                             |
| alternateEmailAddress | Represents the secondary email address of the facility        | NO          | String              |                                                             |
| contactInfo           | Represents ph/fax #s of the facility                          | No          | String              |                                                             |
| preferences           | Represents the preferences of the Facility                    | YES         | FacilityPreferences |                                                             |
| insurancePolicy           |Represents the insurance Policy details for the Facility                | NO         | InsurancePolicy |InsurancePolicy will always be tied to Primary Facility only|                                                             |
| equipments            | Represents the List of Equipments available at a facility     | YES         | Territory[]         |                                                             |
| territories           | Represents the list of territories facility can handle jobs   | YES         |                     |                                                             |
| rates                 | Represents the rates applicable for the equipment   | YES         |           Rate[]          |                                                             |

###Sample JSON

    {
        "id" : "14234",
        "name" : "275 High Street",
        "address" : "275 High Street",
        "city" : "Medford",
        "state" : "MA",
        "zip" : "02155",
        "lat": "42.0123",
        "lon": "80.1153",
        "primaryEmailAddress" : "mloaria@thetowtruckco.com",
        "alternateEmailAddress" : null,
        "contactInfo"     : [
        {
            "phoneNumber" : "7813061232",
            "contactType" : {
                "code" : "FX",
                "description" : "Fax"
            },
            "hourType" : {
                "code" : "A",
                "description" : "24 Hour"
            }
        },
        {
            "phoneNumber" : "7813061232",
            "contactType" : "PH",
            "hourType" : {
                "code" : "A",
                "description" : "24 Hour"
            }
        }
        ],
        "preferences" : {
            "eDispatchJobConfirmation" : true,
            "ivrDispatchOptOut" : true
        },
       
        "equipments"     : [
        {
            "equipmentId" : "LDWL",
            "addressId" : 1,
            "type" : "Light Duty Wheel Lift",
            "quantity" : 5
           
        }
        ],
        
        "territories"     : [
        {
            "zipCode" : 75056
        },
        {
            "zipCode" : 75057
        },
        {
            "zipCode" : 75065
        },
        {
            "zipCode" : 75067
        }
        ]
        
    }

## 3.21 GeographicalCoordinates

| Schema Property       | Description                                                   | Is Required | Type                | Business Rules                                              |
|:-----------------------|:---------------------------------------------------------------|:-------------|:---------------------|:-------------------------------------------------------------|
| latitude               |   Represents latitude of the location                                                            | YES         | Double              |                                                             |
| longitude                  |       Represents longitude of the       location                                                     | YES         | Double              |                                                             |

 
## 3.22 FleetMapDriver extends Driver


| Schema Property      | Description                                                                                                                           | Is Required | Type       | Business Rules                                             |
|:----------------------|:---------------------------------------------------------------------------------------------------------------------------------------|:-------------|:------------|:-----------------------------------------------------------|
| Dispatches           | Represents the list of dispatches assigned to driver and are not fulfilled yet. List also includes an active job (if any)             | NO          | Dispatch[] | Only available if Driver is actively working on a dispatch |
| travelTimeToLocation | Represents the amount of time in mins it would take a driver to reach the loacation identified by lat& long from his current location | YES         | Integer    |                                                            |

    
                            
###Sample JSON

        {  
           "driverId":"132454",
           "Status":40,
           "onDuty" : false,
           "name":"Joe",
           "equipment":{  
              "equipmentId":"LDWL",
              "addressId":1,
              "type":"Light Duty Wheel Lift",
              "vehicleNickname":"blue truck"
           },
           "currentLocation":{  
              "address":"275 High Street",
              "lat":"42.0123",
              "lng":"80.1153"
           },
           "travelTimeToLocation":30,
           "dispatches":[  
              {  
                 "dispatchRequestNumber":"329345447",
                 "referenceNumber":"123456789",
                 "poNumber":"234578098",
                 "serviceType":"TOW",
                 "problem":"Inoperable Problem",
                 "coverage":"Customer covered on this service to the Designated Tow Destination. Your service is only eligible to be paid by CCAS if the customer vehicle arrives at the Designated Tow Destination specified on this dispatch summary or we provide approval for a change to the tow destination before service is rendered.<BR><B>Included: </B><BR>Storage Cost<BR><!--EXCLUDEDTEXT-->  ",
                 "urgency":"NORMAL",
                 "receivedTime":"12/21/2012 11:28 AM",
                 "currentStatus":{  
                    "code":"10",
                    "statusReason":"",
                    "eta":45,
                    "source":"Mobile"
                 },
                 "equipment":{  
                    "equipmentId":"LDWL",
                    "type":"Light Duty Wheel Lift"
                 },
                 "vehicle":{  
                    "color":"Blue",
                    "make":"Hyundai",
                    "model":"Santa Fe",
                    "year":"2012",
                    "fuelType":"Gasoline",
                    "driveTrainType":"AWD",
                    "plate":"1234 AZ",
                    "state":"MA",
                    "vin":"1F12345FD46789",
                    "vehicleType":"passenger",
                    "mileage":"40000"
                 },
                 "disablementLocation ":{  
                    "address":"275 High Street",
                    "city":"Medford",
                    "state":"MA",
                    "zip":"02155",
                    "lat":"42.0123",
                    "lng":"80.1153"
                 },
                 "towDestination":{  
                    "address":"1100 Main Street",
                    "city":"Medford",
                    "state":"MA",
                    "zip":"02155",
                    "lat":"42.0120",
                    "lng":"80.8908"
                 },
                 "assignedDriver":{  
                    "driverId":"132454",
                    "Status":"20",
                    "name":"Joe Smith",
                    "equipment":{  
                       "equipmentId":"LDWL",
                       "addressId":1,
                       "type":"Light Duty Wheel Lift",
                       "vehicleNickname":"Truck #6"
                    },
                    "currentLocation":{  
                       "address":"275 High Street",
                       "lat":"42.0123",
                       "lng":"80.1153"
                    }
                 },
                 "comments":[  
                    {  
                       "commentCode":"DLC",
                       "displayText":"Disablement Location",
                       "commentText":"be careful with dog in the back yard."
                    }
                 ],
                 "signatures":[  
                    {  
                       "signatureId":"244254",
                       "signeeName":"Smith",
                       "signeeType":"1",
                       "signatureReason":"Pre-existing Damages",
                       "locationType":"1",
                       "latitude":72.3434,
                       "longitude":-182.43543,
                       "dispatchStatusCode":"20",
                       "capturedDateTime":"12/21/2012 11:28 AM",
                       "signatureUrl":"/dispatches/354235235/signatures/234234/picture"
                    },
                    {  
                       "signatureId":"24424",
                       "signeeName":"Joe",
                       "signeeType":"2",
                       "signatureReason":"1",
                       "locationType":"2",
                       "latitude":72.3434,
                       "longitude":-182.43543,
                       "dispatchStatusCode":"20",
                       "capturedDateTime":"12/21/2012 11:45 AM",
                       "signatureUrl":"/dispatches/354235235/signatures/24424/picture"
                    }
                 ]
              }
           ]
        }
        
## 3.23 Dispatch Status

| Schema Property | Description                                                       | Is Required | Type      | Business Rules                                                                |
|:----------------|:------------------------------------------------------------------|:------------|:----------|:------------------------------------------------------------------------------|
| code            | The status code                                                   | YES         | String    |                                                                               |
| description     | The description of the status code                                | READONLY    | String    | Some statuses require a reason                                                |
| reason          | Reason for the status. Eg. Rejection reason.                      | YES/NO      | String    | Required to accept a dispatch request.                                        |
| eta             | Service Provider ETA in minutes                                   | YES/NO      | Integer   |                                                                               |
| etaTime         | The ETA as a DateTime                                             | YES         | UTC Time  |                                                                               |
| etaRevised      | The revised ETA if different from the original.                   | NO          | Integer   |                                                                               |
| extJobId        | External Job Id                                                   | NO          | String    |                                                                               |
| source          | Source System                                                     | YES/NO      | String    | Required if 3rd party                                                         |
| latitude        | Current GPS Latitude                                              | YES/NO      | Double    |                                                                               |
| longitude       | Current GPS Longitude                                             | YES/NO      | Double    |                                                                               |
| statusTime      | Date and Time when the status was reported                        | YES         | UTC Time  |                                                                               |
| reportedBy      | Whether the status was reported by: Driver, Dispatcher, or Agero. | READONLY    | String    | Set by the system                                                             |
| etaStatus       | Indicates the status of provided ETA                              | READONLY    | ETAStatus | Set by the system. Only available for current & accepted jobs. Null otherwise |

  

## 3.24 SpecialCircumstanceType  extends EnumerationType

| Schema Property | Description                                                       | Is Required | Type      | Business Rules                                                                |
|:----------------|:------------------------------------------------------------------|:------------|:----------|:------------------------------------------------------------------------------|
| code            | Provides unique identifier of the    circum stance type                           | YES         | String    |                                                                               |
| description     | Description  of the circumstance                              | YES    | String    |                                                 |

###Sample JSON

    {
        "code" : "1",
        "description" : "Severe Weather"
    }

    
## 3.25 JobFilterType  extends EnumerationType

| Schema Property | Description                                                       | Is Required | Type      | Business Rules                                                                |
|:----------------|:------------------------------------------------------------------|:------------|:----------|:------------------------------------------------------------------------------|
| code            | Provides unique identifier of the   job filter                  | YES         | String    |                                                                               |
| description     | Description  of the circumstance                              | YES    | String    |   


###Sample JSON

    {
        "code" : "1",
        "description" : "All jobs"
    }
    
## 3.26 JobStatusCodeType  extends EnumerationType

| Schema Property | Description                                                       | Is Required | Type      | Business Rules                                                                |
|:----------------|:------------------------------------------------------------------|:------------|:----------|:------------------------------------------------------------------------------|
| code            | Provides unique identifier of the  job filter                  | YES         | String    |                                                                               |
| description     | Description  of the circumstance                              | YES    | String    | 
| possibleReasons     |   Provides a list of reasons a job could    be in a given status code|YES/NO    | EnumerationType    | 


###Sample JSON

    {
        "code" : "1",
        "description" : "All jobs",
        "possibleReasons": [
        {
                        "code" : "1",
                        "description" : "Do not accept payment type"
        },
        {
                        "code" : "2",
                        "description" : "Proper equipment unavailable"
        },
        {
                        "code" : "3",
                        "description" : "No longer offer service"
        },
        {
                        "code" : "4",
                        "description" : "Out of my coverage area"
        },
        {
                        "code" : "5",
                        "description" : "Other"
        }
        ]
    }

                            

## 3.27 ETAStatus  Extends EnumerationType

| Schema Property | Description                                                       | Is Required | Type      | Business Rules                                                                |
|:----------------|:------------------------------------------------------------------|:------------|:----------|:------------------------------------------------------------------------------|
| code            |  Represents unique code for the ETA Status                 | YES         | String    |                                                                               |
| description     | Description  of the ETA status                             | YES    | String    | 
| riskSeverity     |     Indicates the severity level|YES/NO    | YES    | Enumeration| Possible Values: Low Medium High|



    
###Sample JSON

    {
        "code" : "201",
        "description" : "Job not placed in an In Route status within 30 minutes of  provided ETA",
        "riskSeverity":"Medium"
    }

                                                                                                        
## 3.28 DispatchSummary


| Schema Property        | Description                                                                         | Is Required | Type                          | Business Rules                    |
|:------------------------|:-------------------------------------------------------------------------------------|:-------------|:-------------------------------|:-----------------------------------|
| date                   | Represents the date the data is applicatble for                                     | YES         | DATE                          |                                   |
| day                    | Represents the day of the week corresponding to the date the data is applicable for | YES         | ENUM                          | "Possible Value:SUNDAY - SATURDAY |
| totalDispatchCount     | Represents the total# of jobs for a given day                                       | YES         | INTEGER                       |                                   |
| dispatchCountBreakdown | Represents the breakdown of total dispatch count by service type                    | YES         | DispatchCountBreakdownItem [] |                                   |
  
    
###Sample JSON

    {
        "date" : "11/11/2013",
        "day" : "Monday",
        "totalDispatchCount" : 26,
        " dispatchCountBreakdown" : [
        {
                        "service" : {
                                "code" : "1",
                                "description": "Door Unlock"
                        },   
                        "count" : 6
        },
        {
                        "service" : {
                                "code" : "4",
                                "description": "Flat Tire"
                        },   
                        "count" : 5
        },
        {
                        "service" : {
                                "code" : "8",
                                "description": "Tow"
                        },   
                        "count" : 15
        }
        ]
    }

## 3.29 Document

| Schema Property      | Description                                                   | Is Required | Type     | Business Rules                                  |
|:----------------------|:---------------------------------------------------------------|:-------------|:----------|:-------------------------------------------------|
| documentId           | Represents the date the unique identifier of the document     | YES         | String   |                                                 |
| documentType         | Represents the type of the document                           | YES         | ENUM     | Refer to Document Type Enum for possible values |
| lastModifiedDateTime | Represents the timestam p when the document was modified last | YES         | DateTime |                                                 |
| documentUrl          | Represents the URL where the document can be retrieved from   | YES         | URL      |                                                 |

  
###Sample JSON

    {
        "documentId" : "532524",
        "documentName" : "Smith",
        "documentType" : "2",
        "lastUpdatedDateTime " : "12/21/2013 11:28 AM",
        "documentUrl" : "/dispatches/354235235/documents/532524"
    }


## 3.30 UserGuide

| Schema Property      | Description                                                                          | Is Required | Type     | Business Rules                                   |
|:----------------------|:--------------------------------------------------------------------------------------|:-------------|:----------|:--------------------------------------------------|
| userGuideId          | Represents the date the unique identifier of the userGuide                           | YES         | String   |                                                  |
| userGuideTitle       | Represents the title of the userguide                                                | YES         | String   |                                                  |
| userGuideType        | Represents the type of the userGuide                                                 | YES         | ENUM     | Refer to UserGuide Type Enum for possible values |
| lastModifiedDateTime | Represents the timestam p when the document was modified last                        | YES         | DateTime |                                                  |
| userGuideUrl         | Represents the URL of the document / video where the UserGuide can be retrieved from | YES         | URL      |                                                  |

###Sample JSON

    {
        "userGuideId" : "532524",
        "userGuideTitle" : "How to set p a new account",
        "userGuideType" : "2",
        "userGuideUrl" : "/dispatches/354235235/documents/532524"
    }


## 3.31 Point

| Schema Property      | Description                                                                          | Is Required | Type     | Business Rules                                   |
|:----------------------|:--------------------------------------------------------------------------------------|:-------------|:----------|:--------------------------------------------------|
| latitude          | Represents latitude of the location                      | YES         | Double   |                                                  |
| longitude       | Represents longitude of the   location                                            | YES         | Double   |                                                  |

    

###Sample JSON

    {
        "lat" : 42.375286661105548,
        "lon" : -71.225446386661915
    }
                            
## 3.32 RouteSummary

| Schema Property      | Description                                                                          | Is Required | Type     | Business Rules                                   |
|:----------------------|:--------------------------------------------------------------------------------------|:-------------|:----------|:--------------------------------------------------|
| name          | Represents the name of the Route         | YES         | String   |                                                  |
| distanceInMiles       |    Represents the distance of the       route                                       | YES         |Double |   
| timeInMinutes       |    Represents the expected travel    time in minutes for the route                                     | YES         |Double  |
| startLocation       |      Represents the starting location of  the route                                  | YES         |Point |
| endLocation       |       Represents the ending location of   the route                     | YES         |Point |  

 
###Sample JSON

    {
        "name" : "Calculated Route",
        "distanceInMiles" : 14.253904686627958,
        "timeInMinutes" : 35.181666666666665,
        "startLocation" : {
                    "lat" : 42.375286,
                    "lon" : -71.225447
        },
        "endLocation" : {
                    "lat" : 42.407995,
                    "lon" : -71.074041
        }
    }


## 3.33 Route

| Schema Property      | Description                                                                          | Is Required | Type     | Business Rules                                   |
|:----------------------|:--------------------------------------------------------------------------------------|:-------------|:----------|:--------------------------------------------------|
| summary          | Represents the summary of the   Route     Route            | YES         | RouteSummary   |                                                  |
| Points       |   Represents the lat/long of the points along the route                                              | YES         |Point[]  |   
| tbtDirections       |   Represents the turn by turn    directions of the route                                       | YES         |String[]  |     

  
###Sample JSON

    {
        "summary" : {
            "name" : "Calculated Route",
            "distanceInMiles" : 14.253904686627958,
            "timeInMinutes" : 35.181666666666665,
            "startLocation" : {
                        "lat" : 42.375286,
                        "lon" : -71.225447
            },
            "endLocation" : {
                        "lat" : 42.407995,
                        "lon" : -71.074041
            },
            "points" : [
                {
                "lat":42.375286661105548,
                "lon":-71.225446386661915
                },
                {
                "lat":42.375770799861584,
                "lon":-71.22572533641609
                },
                {
                "lat":42.375777505384548,
                "lon":-71.2252452209738
                },
                {
                "lat":42.377722107036249,
                "lon":-71.220807505894157
                },
                {
                "lat":42.365390650355266,
                "lon":-71.184639256277038
                },
                {
                "lat":42.358575156842193,
                "lon":-71.159344682654421
                },
                {
                "lat":42.353584906672523,
                "lon":-71.137460537997512
                },
                {
                "lat":42.353478959410126,
                "lon":-71.07147551008913
                },
                {
                "lat":42.351889750474072,
                "lon":-71.070685599487163
                },
                {
                "lat":42.355685076456382,
                "lon":-71.069141988107091
                },
                {
                "lat":42.355364552459974,
                "lon":-71.0728394134545
                },
                {
                "lat":42.357955566522804,
                "lon":-71.07252827719023
                },
                {
                "lat":42.3642386415147,
                "lon":-71.0699372631274
                },
                {
                "lat":42.371634833314118,
                "lon":-71.06741330429395
                },
                {
                "lat":42.390863590887989,
                "lon":-71.082939272102081
                },
                {
                "lat":42.392851107886486,
                "lon":-71.0841060330931
                },
                {
                "lat":42.404199534904933,
                "lon":-71.081870411745925
                },
                {
                "lat":42.404643440523358,
                "lon":-71.081144874164153
                },
                {
                "lat":42.404231721415016,
                "lon":-71.076121096379822
                },
                {
                "lat":42.404001051426008,
                "lon":-71.075229261829207
                },
                {
                "lat":42.406575972233782,
                "lon":-71.076681678097344
                },
                {
                 "lat":42.406778479026457,
                "lon":-71.074492995410736
                },
                {
                "lat":42.407010490120086,
                "lon":-71.074322675128144
                }
            ],
            "tbtDirections" : [
            "Start location: Depart '50 Centre St' and turn north.",
            "At end of 'Centre St', turn right onto 'Massasoit Ct'. Now traveling East for 0.05 miles.",
            "At end of 'Massasoit Ct', turn left onto 'Massasoit St'. Now traveling North for 0.02 miles.",
            "Take the fourth right onto 'Main St [US-20 W W/US-20 E E]'. Now traveling East for 0.31 miles.",
            "Note: Name changes to N Beacon St [US-20 E E].",
            "Road splits into two. Stay right for N Beacon St [US-20 E E]. Now traveling East for 3.50 miles.",
            "Note: Name changes to Brighton Ave [US-20 W W/US-20 E E].",
            "Turn right after Clarendon St [MA-28] onto 'Arlington St [MA-2]'. Now traveling South-East for 4.64 miles.",
            "Take the first left onto 'Boylston St [MA-2]'. Now traveling North-East for 0.12 miles.",
            "Take the first left onto 'Charles St S [MA-28/MA-2]'. Now traveling North-West for 0.39 miles.",
            "Take the second right onto 'David G Mugar Way [MA-28]'. Now traveling North-West for 0.21 miles.",
            "Note: Name changes to Embankment Rd [Storrow Dr/MA-28].",
            "Take ramp to I-93 N N. Now traveling North for 0.67 miles.",
            "Road splits into two. Stay right for Ramp. Now traveling North-West for 0.87 miles.",
            "Take exit 29 to Fellsway [MA-28]. Now traveling North for 1.66 miles.",
            "Road splits into two. Stay right for Ramp. Now traveling North-West for 0.15 miles.",
            "Road splits into two. Stay right. Now traveling North-East for 0.83 miles.",
            "Note: Name changes to Revere Beach Pkwy [MA-16].",
            "Take exit after 1/4 mi. Now traveling South-West for 0.31 miles.",
            "Take the third right. Now traveling South-West for 0.05 miles.",
            "Take the second right onto 'Cabot Rd'. Now traveling East for 0.25 miles.",
            "Take the first left onto 'Cabot Rd'. Now traveling North-West for 0.12 miles.",
            "End location, 'Cabot Rd' is on the left after about 160 yd."
            ]
        }
    }


## 3.34 Vendor

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   vendorId   |             Unique Identifier of the Vendor |         YES      |           String  |       READ ONLY|
|  taxId      |             Represents the unique TaxId of     |      YES         |        String  |       READ ONLY|
| name         |           Vendor’s name                  |          YES           |      String|
|officephone    |         Represents the phone number |             YES        |         String|
| billingAddress|          Represents the billing address  |         YES      |           Location|
| corporationName    |     Represents the name of the  corporation |            YES |
|   ownerName        |       Represents the name of the owner|              YES     |            String |
|    vicePresidentName           | |
|    secretaryName           ||
|businessType |           Represents the type of  ownership of the vendor    |                                 BusinessType|
|achAccountNumber |                           
|isTownetEnabled  |       Boolean indicator that   represents if the Vendor is  Towner Enabled or not      |           YES  |               Boolean|
|    isIncorporated |         Boolean indicator that   represents if the vendor is  incorporated |                YES    |             Boolean|
|    isW9Provided           |Boolean indicator that represents if there exists an associated W9 form for the Vendor|YES|Boolean|READ ONLY|
|                             | Boolean indicator that represents if there exists an    associated W9 form for the   Vendor|             YES   |              Boolean|        READ ONLY|
|    facilities           |Represents the list of Vendor Facilities| NO    |              Facility[] | Only included in Deep response|
|    equipments           | Represents the list of distinct   vehicles / equipment owned by   Deep response   the Vendor across all the   facilities|    NO     |             Equipment[]  |  Only included in Deep response|
|    insurancePolicies           |Represents the Insurance info of the vendor| NO    |              InsurancePolicy[] | Only included in Deep response|
|    rates           |Represents the rates applicable for the equipment| YES    |              Rate[] | |
                                                                   
###Sample JSON

####Shallow Sample

    {
        "vendorId":"35325235",
        "taxId":"36467457854885",
        "name":"ABC Towing",
        "officePhone":"555-555-1111",
        "billingAddress":{
            "address1":"22 Mazzeo Dr",
            "address2":"",
            "crossStreet":"",
            "landmark":"",
            "locationType":"",
            "city":"Randolph",
            "poi1":"",
            "poi2":"",
            "state":"MA",
            "postalCode":"02368",
            "lat":42.165312598068283,
            "lng":-71.0567153130004
        },
        "corporationName":"ABC Towing",
        "ownerName":"Douglas",
        "vicePresidentName":"John Smith",
        "secretaryName":"Ashley",
        "businessType":{
            "code":"SO",
            "description":"Sole Ownership"
        },
        "achAccountNumber":"46456456",
        "isTownEnabled":true,
        "isIncorporated":true,
        "isW9Provided":true 
    }
    
####Deep Sample
    
            {
          "vendorId": "35325235",
          "taxId": "36467457854885",
          "name": "ABC Towing",
          "officePhone": "555-555-1111",
          "billingAddress": {
            "address1": "22 Mazzeo Dr",
            "address2": "",
            "crossStreet": "",
            "landmark": "",
            "locationType": "",
            "city": "Randolph",
            "poi1": "",
            "poi2": "",
            "state": "MA",
            "postalCode": "02368",
            "lat": 42.165312598068283,
            "lng": -71.0567153130004
          },
          "corporationName": "ABC Towing",
          "ownerName": "Douglas",
          "vicePresidentName": "John Smith",
          "secretaryName": "Ashley",
          "businessType": {
            "code": "SO",
            "description": "Sole Ownership"
          },
          "achAccountNumber": "46456456",
          "isTownEnabled": true,
          "isIncorporated": true,
          "isW9Provided": true,
          "insurancePolicies ": [
            {
              "id": "546464",
              "companyName": "Travelers Inc",
              "policyNumber": " I680394W1184",
              "insuranceType": {
                "code": "AL",
                "desc": "Automobile Liability"
              },
              "agentName": null,
              "agentPhoneNumber": "7813061632",
              "effectiveDate": "06/11/2007",
              "expirationDate": "06/11/2017",
              "certificateHolder": true,
              "expirationDate": "06/11/2017",
              "status": {
                "code": "APPRVD",
                "desc": "Approved"
              }
            },
            {
              "id": "546465",
              "companyName": "Travelers Inc",
              "policyNumber": " I680394W1184",
              "insuranceType": {
                "code": "GKL",
                "desc": "Garage Keepers Liability"
              },
              "agentName": null,
              "agentPhoneNumber": "7813061632",
              "effectiveDate": "06/11/2007",
              "expirationDate": "06/11/2017",
              "certificateHolder": true,
              "expirationDate": "06/11/2017",
              "status": {
                "code": "APPRVD",
                "desc": "Approved"
              }
            }
          ],
          "facilities": [
            {
              "id": "14234",
              "name": "275 High Street",
              "address": "275 High Street",
              "city": "Medford",
              "state": "MA",
              "zip": "02155",
              "lat": "42.0123",
              "lon": "80.1153",
              "primaryEmailAddress": "mloaria@thetowtruckco.com",
              "alternateEmailAddress": null,
              "contactInfo": [
                {
                  "phoneNumber": "7813061232",
                  "contactType": {
                    "code": "FX",
                    "description": "Fax"
                  },
                  "hourType": "A"
                  
                },
                {
                  "phoneNumber": "7813061232",
                  "contactType": {
                    "code": "PH",
                    "description": "Telephone"
                  },
                  "hourType": "A"
                  
                }
              ],
              "equipments": [
                {
                  "equipmentId": "LDWL",
                  "addressId": 1,
                  "type": "Light Duty Wheel Lift",
                  "quantity": 5
                }
              ],
              "territories": [
                {
                  "zipCode": "75056"
                },
                {
                  "zipCode": "75057"
                },
                {
                  "zipCode": "75065"
                },
                {
                  "zipCode": "75067"
                }
                
              ],
              "rates": [
                {
                  "equipmentType": {
                    "code": "LDWL"
                  },
                  "shiftType": {
                    "code": "ALL"
                  },
                  "freeMilesToSite": 5.0,
                  "perMileAmountToSite": 2.0,
                  "hookupAmount": 22.5,
                  "freeMilesLoaded": 5,
                  "perMileAmountLoaded": 4.5,
                  "perHourAmount": null,
                  "goaAmount": 15.0,
                  "effectiveDate": "06/11/2007"
                },
                {
                  "equipmentType": {
                    "code": "HDW"
                  },
                  "shiftType": {
                    "code": "ALL"
                  },
                  "freeMilesToSite": 4.0,
                  "perMileAmountToSite": 5.0,
                "hookupAmount": 30.5,
                "freeMilesLoaded": 4,
                  "perMileAmountLoaded": 8.5,
                  "perHourAmount": null,
                  "goaAmount": 30.0,
                  "effectiveDate": "12/11/2014"
                }
                
              ]
             
            }],"equipments": [
              {
                "equipmentId": "LDWL",
                "type": "Light Duty Wheel Lift"
              }
            ]
          }

        
 
## 3.35 SecurityQuestion  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code |  Provides unique identifier of the circum stance type     | YES | String  ||
| description |   Description  of the circumstance     | YES | String  | |


###Sample JSON
    
     {
        "code" : "1",
        "description" : "What is your mother’s maiden name?"
     }

    
## 3.36 IdentityInfo

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| securityQuestion |  Represents the  security Question     | YES | SecurityQuestion  ||
| securityAnswer |   Represents the answer enetered by the user     | YES/NO | String  |WRITE Only. Not available as part of GET request |



###Sample JSON

    {
        "securityQuestion" :
        {
                    "code" : "1",
                    "description" : "What is your mother’s maiden name?"
        },
        "securityAnswer" : "Owner200"
    }


## 3.37 Security Info

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| username |  Represents the user name of the user      | YES | String  ||
| Password |   Represents the password of the user    | YES/NO | String  ||
| role |   Represents the role user belongs to     | YES | UserRoleType  |Required in POST.  WRITE Only. Not available as part of GET request|
| IdentityQuestionnaire |  Represents the identity Questionnaire of the user   | YES | IdentityInfo[]  ||


###Sample JSON

    {
        "username" : "John Smith",
        "password" : "xxxxxxxxx",
        "role" : "",
        "identityQuestionnaire" : [
        {
                    "securityQuestion" :
                    {
                        "code" : "1",
                        "description" : " What is your mother’s maiden name? "
                    },
                    "securityAnswer" : "Owner200"
        }
        
       ]
    }


    
## 3.38 Profile

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| userInfo |  User’s Personal and Office Info     | YES | UserInfo  ||
| preferences |   User’s application preferences   | No | Preferences  ||
| facilities |   Represents a list of Facilities user is associated with     | YES | Facility[]  | While trying to create a profile,just IDs need to be provided |
| equipment |   Represents the vehicle /equipment assigned to user      | YES | Driver Equipment  |This is applicable only if the  user(could be an Owner,Manager,Dispatcher) acts  as a Driver |

###Sample JSON

    {
        "userInfo" : {
                "name" : "Jon Doe",
                "cellPhone" : "555-555-5555",
                "email" : "jdoe@gmail.com",
                "officeEmail" : "jdoe@abctowing.com",
                "officePhone" : "555-555-1111"
        },
        "preferences" : {
                "jobFilter" : 1,
                "jobViewOpt" : "Service, Address, City",
                "gpsTracking" : true,
                "etaAlerts" : true,
                "inactivityAlert" : true,
                "autoAssignAllJobs" : false
        },
        "facilities" : [
                {
                        "id":"1",
                        "name" : "Douglas Transport-ASM",
                        "address" :"275 High Street",
                        "city" : "Medford",
                        "state" : "MA",
                        "zip" : "02155",
                        "lat" : "42.0123",
                        "lon" : "80.1153"
                },
                {
                        "id":"2",
                        "name" : "Douglas Transport-ASM",
                        "address" :"275 High Street",
                        "city" : "Medford",
                        "state" : "MA",
                        "zip" : "02155",
                        "lat" : "42.0123",
                        "lon" : "80.1153"
                }
        ],
        "equipment" : {
                "equipmentId" : "LDWL",
                "addressId" : 1,
                "type" : "Light Duty Wheel Lift",
                "vehicleNickname" : "blue truck",
                "equipmentPictureUrl" :  "/vendors/23424/drivers/24234/driverEquipment/picture"
        }
        
        
    }


                                                                                                        
## 3.39 User

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| id |  Represents the unique identifier of the user    | YES | String  |This is available only as part of GET requests|
| profile |  Represents the profile of the user which includes userinfo & user preferences   | YES | userInfo  ||
| securityInfo |  Represents the security information including  username, password, security     | YES | SecurityInfo  ||


###Sample JSON

    {
        "id":"9798797",
        "profile":{
                "userInfo" : {
                        "name" : "Jon Doe",
                        "cellPhone" : "555-555-5555",
                        "email" : "jdoe@gmail.com",
                        "officeEmail" : "jdoe@abctowing.com",
                        "officePhone" : "555-555-1111"
                },
                "preferences" : {
                        "jobFilter" : 1,
                        "jobViewOpt" : "Service, Address, City",
                        "gpsTracking" : true,
                        "etaAlerts" : true,
                        "inactivityAlert" : true,
                        "autoAssignAllJobs" : false
                },
                "facilities" : [
                        {
                                "id":"1",
                                "name" : "Douglas Transport-ASM",
                                "address" :"275 High Street",
                                "city" : "Medford",
                                "state" : "MA",
                                "zip" : "02155",
                                "lat" : "42.0123",
                                "lon" : "80.1153"
                        },
                        {
                                "id":"2",
                                "name" : "Douglas Transport-ASM",
                                "address" :"275 High Street",
                                "city" : "Medford",
                                "state" : "MA",
                                "zip" : "02155",
                                "lat" : "42.0123",
                                "lon" : "80.1153"
                        }
                ],
                "equipment" : {
                        "equipmentId" : "LDWL",
                        "addressId" : 1,
                        "type" : "Light Duty Wheel Lift",
                        "vehicleNickname" : "blue truck",
                        "equipmentPictureUrl" :  "/vendors/23424/drivers/24234/driverEquipment/picture"
                }
        },
        "securityInfo":{
                "username":"JohnSmith",
                "password":"xxxxxxxxx",
                "role":{
                "code":"7"
                },
                "identityQuestionnaire" : [
                        {
                                "securityQuestion":{
                                        "code":"1",
                                        "description":" What is your mother’s maiden name? "
                                },
                                "securityAnswer":"Owner200"
                        }
              ]
        }
    }

    
## 3.40 UserInvitation Extends User  

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Status |  Represents the status of the user Invitation   | YES | UserInvitation Status   |Possible Values: Pending Viewed  Accepted|

                                                                                                        
###Sample JSON

    {
        "id":"9798797",
        "profile":{
                "userInfo" : {
                        "name" : "Jon Doe",
                        "cellPhone" : "555-555-5555",
                        "email" : "jdoe@gmail.com",
                        "officeEmail" : "jdoe@abctowing.com",
                        "officePhone" : "555-555-1111"
                },
                "preferences" : {
                        "jobFilter" : 1,
                        "jobViewOpt" : "Service, Address, City",
                        "gpsTracking" : true,
                        "etaAlerts" : true,
                        "inactivityAlert" : true,
                        "autoAssignAllJobs" : false
                },
                "facilities" : [
                        {
                                "id":"1",
                                "name" : "Douglas Transport-ASM",
                                "address" :"275 High Street",
                                "city" : "Medford",
                                "state" : "MA",
                                "zip" : "02155",
                                "lat" : "42.0123",
                                "lon" : "80.1153"
                        },
                        {
                                "id":"2",
                                "name" : "Douglas Transport-ASM",
                                "address" :"275 High Street",
                                "city" : "Medford",
                                "state" : "MA",
                                "zip" : "02155",
                                "lat" : "42.0123",
                                "lon" : "80.1153"
                        }
                ],
                "equipment" : {
                        "equipmentId" : "LDWL",
                        "addressId" : 1,
                        "type" : "Light Duty Wheel Lift",
                        "vehicleNickname" : "blue truck",
                        "equipmentPictureUrl" :  "/vendors/23424/drivers/24234/driverEquipment/picture"
                }
        },
        "securityInfo":{
                "role":{
                    "code":"1"
                },
                "status" : {
                
                    "code":"1",
                    "description":"Pending"
                }
        }
    }
        
    
## 3.41 Rate

| Schema Property     | Description                                                    | Is Required | Type      | Business Rules                             |
|:---------------------|:----------------------------------------------------------------|:-------------|:-----------|:--------------------------------------------|
|equipmentType| Indicates the equipmentID the Rate is being added for.| YES| String| Read only|
| shiftType           | Indicates the shift type                                       | YES         | ShiftType | Refer to shiftType enum for possible value |
| freeMilesToSite     | Indicates the # of frre miles allowed to site                  | NO          | Double    |                                            |
| perMileAmountToSite | Indicates the $ amount per additional mile to site             | NO          | Double    |                                            |
| hookupAmount        | Indicates the $ amount for hook up                             | NO          | Double    |                                            |
| freeMilesLoaded     | Indicates the # of free miles allowed for loading              | NO          | Double    |                                            |
| perMileAmountLoaded | Indicates the $ amount per additional mile loaded              | NO          | Double    |                                            |
| perHourAmount       | Indicates the charge per hour                                  | NO          | Double    |                                            |
| goaAmount           | Indicates the charge that would be claimed for gone on arrival | NO          | Double    |                                            |
| effectiveDate       | Represents the date the rate is effective from                 | YES         | Date      |                                            |
  
###Sample JSON

     {
        "equipmentType": {
        "code": "LDWL"
        },
        "shiftType":{
            "code":"ALL"
         },
        "freeMilesToSite":5.0,
        "perMileAmountToSite":2.0,
        "hookupAmount":22.5,
        "freeMilesLoaded":5,
        "perMileAmountLoaded":4.5,
        "perHourAmount":null,
        "goaAmount":15.0,
        "effectiveDate":"06/11/2007"
    }
    
## 3.42 InsurancePolicy

| Schema Property   | Description                                                      | Is Required | Type                  | Business Rules                                  |
|:-------------------|:------------------------------------------------------------------|:-------------|:-----------------------|:-------------------------------------------------|
| facilityId|Represents the FacilityId for the Insurance being added to |NO |String |If not provided primary facility will be added (default’s to 1)|
| companyName       | Represents the name of the company that underwrote the insurance | YES         | String                |                                                 |
| policyNumber      | Represents the insurance policy                                  | YES         | String                |                                                 |
| insuranceType     | Represents the type of the insurance                             | YES         | InsuranceCoverageType | Refer to InsuranceType Enum for possible Values |
|coverageAmount |Represents the amount of the coverage with the insurance |YES |Int|
| agentName         | Represents the type of the insurance                             | NO          | String                |                                                 |
| agentPhoneNumber  | Represents the ph# of the Agent                                  | NO          | String                | xxxxxxxxxx format                               |
| effectiveDate     | Represents the effective date of the insurance                   | YES         | Date                  |                                                 |
| expirationDate    | Represents the expiration date of the insurance                  | YES         | Date                  |                                                 |
| certificateHolder | Indicates the Vendor holds the certificate or not                | NO          | Boolean               |                                                 |
|coiUrl |Represents the Url for uploaded Certificate of Insurance| NO| URL Available only if COI is uploaded|
|status |Indicates the status of the requested Insurance information. It could fall into one of Pending, UnderReview, Approved or Declined|YES||

###Sample JSON

    {
        
        "companyName" : "Travelers Inc",
        "policyNumber":" I680394W1184",
        "insuranceType":{
            "code":"AL",
            "desc":"Automobile Liability"
        },
        "coverageAmount": "5,000,000",
        "agentName":null,
        "agentPhoneNumber":"7813061632",
        "effectiveDate":"06/11/2007",
        "expirationDate":"06/11/2017",
        "certificateHolder":true,
        "expirationDate":"06/11/2017",
        "status":{
        "code":"APPRVD",
        "desc":"Approved"
        }
    }


## 3.43 FacilityPreferences

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| eDispatchJobConfirmation |   | YES | Boolean  ||
| ivrDispatchOptOut |   | YES | Boolean  ||



###Sample JSON

    {
        "eDispatchJobConfirmation":true,
        "ivrDispatchOptOut":true
    }


## 3.44 EquipmentShift  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code |  Provides unique identifier of the circum stance type | YES | String  ||
| description |  Description  of the circumstance | YES | String  ||


###Sample JSON

    {
        "code" : "DAY",
        "description":"M-F Day"
    }

    
## 3.45 Territory

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| zipCode |  Represents the zip code that defines the territory | YES | String  ||

###Sample JSON

    {
        "zipCode":"01702"
    }
                            

## 3.46 ContactInfo

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| phoneNumber |  Represents  the ph#| YES | String  |Xxxxxxxxxxx format|
| contactType| Represents the type of the contact Some of which include: Phone, Fax,Mobile Phone…    |YES|PhoneType| |
| hourType| Represents the hour the ph# is valid for   |YES|HourType| |


###Sample JSON
    
    {
        "phoneNumber":"7813061232",
        "contactType":{
                "code":"FX",
                "description":"Fax"
        },
        "hourType":"A"
    }



## 3.47 HourType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Code |  Provides unique identifier of the  hour type| YES | String  ||
| Description| Description  of the hour type   |YES|String| |




## 3.48 InsuranceCoverageType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Code |  Provides unique identifier of the  hour type| YES | String  ||
| Description| Description  of the hour type   |YES|String| |

###Sample JSON

    {
        "code" : "PC",
        "description":"Property & Casualty"
    }



## 3.49 BusinessUnitType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Code |  Provides unique identifier of the  hour type| YES | String  ||
| Description| Description  of the hour type   |YES|String| |


###Sample JSON
    
    {
        "code" : "ASM",
        "description":"Accident Scene Management"
    }



## 3.50 PerformanceCategoryType  extends EnumerationType


| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Code |  Provides unique identifier of the  Performance category | YES | String  ||
| Description| Description  of the category   |YES|String| |

###Sample JSON

    {
        "code" : "1",
        "description":"Technology"
    }
                            
    

## 3.51 KPIMetricType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| Code |  Provides unique identifier of the hour type | YES | String  ||
| Description| Description  of the hour type   |YES|String| |
| measurementUnit |  |  |   ||
| threshholdType|  Represents the threshholdType of the goal( min/max)|YES|String|Possible Values: MIN- Minimum MAX-Maximum    |
| goal|  Represents the desired measurement value for the metric|YES|Double|READ ONLY =0 if the Metric does not have a goal|


###Sample JSON

    {
        "code" : "6",
        "description":"Call Acceptance",
        "measurementUnit":"Percentage",
        "threshholdType":"Upwards",
        "goal":90
    }
    

## 3.52 KPIMetric

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| type |  Represents  the type of the metric | YES | KPIMetricType  ||
| value| Represents the metric value   |YES|    |Double |


###Sample JSON

    {
        "type":{
                "code" : "6",
                "description":"Call Acceptance",
                "mesaurementUnit":"Percentage",
                "threshholdType":"MIN",
                "goal":95
        },
        "value":80.11,
        
    }

                            
## 3.53 PerformanceData

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| businessUnit |  Represents  the code the business Unit the performance data applies for | YES | String  ||
| serviceType|Represents the type of the service  the  performance data applies for  |YES|    | |
| metrics |  List of KPI metrics | YES | String  |KPIMetric[]|

###Sample JSON

    {
        "businessUnit":{
                "code" : "ASM",
                "description":"Accident Scene Management"
        },
        "serviceType":"FX",
        "metrics":{
                "type" : {
                "code" : "6",
                "description":"Call Acceptance",
                "goal":"90",
                "goalUnits":"Percentage",
                "goalDirection":"Upwards"
                },
                "value":"80"
        }
    }



## 3.54 UserInvitationStatusType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code | Provides unique identifier of the hour type | YES | String  ||
| description| Description  of the hour type  |YES| String   | |


###Sample JSON

    {
        "code" : "0",
        "description":"All"
    }
    
        

## 3.55 ETAExtensionReason  Extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code |  Represents unique code for the ETA Extension Reason | YES | String  ||
| description| Description  of the ETA Extension Reason  |YES| String   | |


###Sample JSON

    {
        "code" : "1",
        "description":"Prior Job Delayed"
    }                            

## 3.56 ServiceType  extends EnumerationType


| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code | Provides unique identifier of the  service type | YES | String  ||
| description| Description  of the hour type  |YES| String   | |

    
###Sample JSON

    {
        "code" : "1",
        "description":"Door Unlock "
    }  

## 3.57 DispatchCountBreakdownItem


| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| service | Represents the service type | YES | Double  |READ ONLY DOES NOT INCLUDE BASE URI|
| lastUpdatedAt| Represents the timestamp at  which the picture was last provided / updated at   |YES| DateTime   | READ ONLY|


###Sample JSON

    {
        "service":{
                "code" : "1",
                "description":"Door Unlock"
        },
        "count": 5
    }

## 3.58 UserInvitationStatus  extends EnumerationType


| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code | Provides unique identifier of the invitation status | YES | String  ||
| description| Description  of the hour type  |YES| String   | |

###Sample JSON

    {
        "code" : "1",
        "description":"Door Unlock "
    }  
    

## 3.59 BusinessType  extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code | Provides unique identifier of the invitation status | YES | String  ||
| description| Description  of the hour type  |YES| String   | |


###Sample JSON

    {
        "code" : "1",
        "description":"Door Unlock "
    }  
        
## 3.60 TrendData 

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| kpiMetric |  Represents the category of the trend data  | YES | KPIMetricType  ||
| data|  Represents the data   |YES| TrendDataItem[]   | |


###Sample JSON

    {
        "category":{
            "code":"1",
            "description":"calls"
            },
        "data":[
            {
            "month":"Feb 13",
            "value":"275"
            },
            {
            "month":"Mar 13",
            "value":"250"
            },
            {
            "month":"Apr 13",
            "value":"125"
            },
            {
            "month":"Feb 14",
            "value":"300"
            }        
        ]
    }  
    
## 3.61 TrendDataItem 

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| month | Represents the category of the trend data  | YES | String  |MMM YY format|
| value| Represents the data  |YES| String   | |


###Sample JSON

    {
        "month":"Feb 13",
        "value":"275"
    }  
    
## 3.62 TrendCategoryType extends EnumerationType

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| code |Provides unique identifier of the Performance category  | YES | String  ||
| description| Description of the performance category  |YES| String   |  |


###Sample JSON

    {
        "code" : "1",
        "description":"Calls"
    }  
    
## 3.63 PerformanceDataItem

| Schema Property | Description | Is Required | Type     | Business Rules |
|:----------------|:------------|:-------------|:----------|:----------------|
| performanceCategory |Represents the category of the performance data | YES | PerformanceCategoryType  |                |
| metrics| Represents the performance metrics  || KPIMetric   |  |


###Sample JSON

    {
       "performanceCategory":{
        "code":"PERF",
        "description":"Performance"
        },
        "metrics":[
        {
        "type": {
        "code":"6",
        "description":"Call Acceptance",
        "mesaurementUnit":"Percentage",
        "goalThreshholdType":"MIN"
        },
        "value":90,
        "goal":95
        },
        {
        "type": {
        "code":"6",
        "description":"GOA",
        "mesaurementUnit":"Percentage",
        "goalThreshholdType":"MAX"
        },
        "value":4,
        "goal":5
        }
        ]
    }

      
      
## 3.64 Claim

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| vendorId                 | Vendor  identification number                  | YES         | String   |                |
| poNumber                 | PO number                                      |             | String   |                |
| serviceType              | Service type                                   |             | String   |                |
| serviceDate              | Service date                                   |             | DateTime |                |
| receivedDate             | Date claim received                            |             | DateTime |                |
| equipmentType            | Equipment type                                 |             | String   |                |
| driverName               | Represents the driver who was assigned the job |             | String   |                |
| odometer                 | Odometer value                                 |             | String   |                |
| vin                      | Vehicle identification number                  |             | String   |                |
| milesToSite              | Number of miles to site                        |             | Double   |                |
| memberNumber             | Customer number                                |             | String   |                |
| memberFirstName          | Customer first name                            |             | String   |                |
| memberMiddleName         | Customer middle name                           |             | String   |                |
| memberLastName           | Customer last name                             |             | String   |                |
| actualHours              | Number of hours for service                    |             | String   |                |
| submittedAmount          | Submittted amount for service                  |             | String   |                |
| paidAmount               | Actual paid amount                             |             | String   |                |
| invoiceNumber            | Customer provided invoice number               |             | String   |                |
| comments                 | Additional comments                            |             | String   |                |
| status                   | Claim status                                   |             | String   |                |
| towInfo                   |Towing details if the Service type is Tow and the towing was done at a location different then specified on the PO                                  |             | towInfo   |                |
| adjustments              | List of adjustments for claim                  |             | adjustment|                |
| additionalCharge1Service | Addtl. service type                            |             | String   |                |
| additionalCharge2Service | Addtl charge amount                            |             | String   |                |
| additionalCharge2Amount  | Addtl. service type                            |             | String   |                |
| additionalCharge3Service | Addtl charge amount                            |             | String   |                |
| additionalCharge3Amount  | Addtl. service type                            |             | String   |                |
| additionalCharge4Service | Addtl charge amount                            |             | String   |                |
| additionalCharge4Amount  | Addtl. service type                            |             | String   |                |
| additionalCharge5Service | Addtl charge amount                            |             | String   |                |
| additionalCharge5Amount  | Addtl. service type                            |             | String   |                |

    
###Sample JSON

    {
        "vendorID": "98765",
        "poNumber": "909642214",
        "serviceType": null,
        "serviceDate": "2012-10-17T11:48:44",
        "receivedDate": "0001-01-01T00:00:00",
        "equipmentType": null,
        "odometer": null,
        "vin": null,
        "milesToSite": null,
        "milesTowed": null,
        "memberNumber": null,
        "memberFirstName": null,
        "memberMiddleName": null,
        "memberLastName": null,
        "actualHours": null,
        "submittedAmount": null,
        "paidAmount": null,
        "invoiceNumber": null,
        "comments": null,
        "status": null,
        "towInfo":null,
        "adjustments": null,
        "additionalCharge1Service": null,
        "additionalCharge1Amount": null,
        "additionalCharge2Service": null,
        "additionalCharge2Amount": null,
        "additionalCharge3Service": null,
        "AdditionalCharge3Amount": null,
        "additionalCharge4Service": null,
        "additionalCharge4Amount": null,
        "additionalCharge5Service": null,
        "additionalCharge5Amount": null
    }
    
## 3.65 TowInfo

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| pOTowLocation                 |If the tow was done to the listed location on the PO               | NO         |Boolean   |                |
| changeReason                 | If the tow was different location, then reason for the same                                   |   NO          | TowInfoChangeReasonTypes   | Enumeration               |
| otherReason              | Any other reasons                                 |  NO           | String   |                |
| actualTowLocation              |Actual tow location details                             |     NO        | String |                |


    
###Sample JSON

        {
        "pOTowLocation": false,
        "changeReason": "Store was Closed",
        "otherReason": "Customer called and changed info",
        "actualTowLocation":"123 Main Street, Kansas City, KS 22232"
        }

## 3.65 ClaimDataProcess

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|vendorId| Vendor Id   ||String||
|poNumber|  PO number ||String||
|status|  Status of the process   ||String||
|ResponseMessage|  Message after processing claim ||String||

###Sample JSON

    {
        "vendorID": "98765",
        "poNumber": "387321420",
        "status": "NV",
        "responseMessage": "This claim has been processed previously."
    }

    
## 3.66 ClaimDataProcessResponse

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|count| Total number of processed Claim    ||String||
|numberOfSuccess|  Total number of successful processed claims ||String||
|numberOfFailure|  Total number of failed processed claims Dispatch zip code List of ClaimDataProcess entities   ||ClaimDataProcess[]||
|results|  Adjustment amount ||String||

                                
###Sample JSON

    {
        "count":60,
        "numberOfSuccess":50,
        "numberOfFailure":10,
        "results":
        [
            {
            "vendorID": "98765",
            "poNumber": "387321420",
            "status": "NV",
            "responseMessage": "This claim has been processed previously."
            },
            {
            "vendorID": "98765",
            "poNumber": "387321423",
            "status": "NV",
            "responseMessage": "This claim has been processed previously."
            }
        ]
    }

## 3.67 Adjustment

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|adjustmentReason|  Adjustment reason   ||String||
|adjustmentAmount|  Adjustment amount ||String||


###Sample JSON

    {
        "adjustmentReason": "Adjusted to your Rates - Audit",
        "adjustmentAmount": "82"
    }
    
## 3.68 Check

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|vendorId|  Vendor identification number   ||String||
|checkNumber|  Check number ||String||
|poNumber|  PO number    ||String||
|originalPONumber| Represents the Orginial PO# associated with the check.   |NO|String|Applicable if only check is issued referencing another PO on which the dispatch was actually done.|
|invoiceNumber|  Invoice number ||String||
|checkDate|  Vendor identification number   ||String||
|serviceDate|  Service date  ||DateTime||
|submitDate|  Claims submission date   ||DateTime||
|amount|  Total amount paid on check ||Double||
|numberofCalls|   Number of claims  ||Integer||
|status|  Status of the check   ||string||
|adjustments| List of adjustments for check Error! ||Reference source not found.[]||

###Sample JSON

    {
        "vendorID": "98765",
        "checkNumber": "4953931",
        "poNumber": null,
        “originalPONumber”: null,
        "invoiceNumber": null,
        "checkDate": "2012-12-11T12:52:32",
        "serviceDate": "0001-01-01T00:00:00",
        "submitDate": "0001-01-01T00:00:00",
        "amount": "268",
        "numberOfCalls": "7",
        "status": "Paid",
        "adjustments": null
    }            
## 3.69 FeedbackCategoryType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code|  Provides unique identifier of the Performance category   |YES|String||
|description|  Description of the performance category |YES|String|READ ONLY|


###Sample JSON

    {
        "code" : "1",
        "description":"Job Details"
    } 
    
## 3.70 FeedbackSubjectType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code|  Provides unique identifier of the Performance category   |YES|String||
|description|  Description of the performance category |YES|String|READ ONLY|


###Sample JSON

    [
        {
        "code": "1",
        "description": "Customer Info"
        },
        {
        "code": "2",
        "description": "Vehicle Info"
        },
        {
        "code": "3",
        "description": "Service Needed Info"
        },
        {
        "code": "4",
        "description": "Equipment Info"
        },
        {
        "code": "5",
        "description": "Address Info"
        },
        {
        "code": "6",
        "description": "Suggestion"
        },
        {
        "code": "7",
        "description": "Question"
        },
        {
        "code": "8",
        "description": "Compliment"
        },
        {
        "code": "9",
        "description": "Other"
        },
        {
        "code": "10",
        "description": "Maps"
        },
        {
        "code": "11",
        "description": "signatures"
        },
        {
        "code": "12",
        "description": "Status Info"
        },
        {
        "code": "13",
        "description": "Job Offer Functionality"
        },
        {
        "code": "14",
        "description": "Driver Assignment"
        },
        {
        "code": "15",
        "description": "Contacting Agero via Phone"
        },
        {
        "code": "16",
        "description": "Agent Interaction"
        }
    ]
    
## 3.71 FeedbackOptionBranch

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|feedbackCategory|  Represents the root level option  |YES|FeedbackCategoryType||
|feedbackSubjects|  Represents the sub level option |YES|FeedbackSubjectType||


###Sample JSON

    {
        "feedbackCategory": {
        "code": "1",
        "description": "Job Details"
        },
        "feedbackSubjects": [
        {
        "code": "1",
        "description": "Customer Info"
        },
        {
        "code": "2",
        "description": "Vehicle Info"
        },
        {
        "code": "3",
        "description": "Service Needed Info"
        },
        {
        "code": "4",
        "description": "Equipment Info"
        },
        {
        "code": "5",
        "description": "Address Info"
        },
        {
        "code": "6",
        "description": "Suggestion"
        },
        {
        "code": "7",
        "description": "Question"
        },
        {
        "code": "8",
        "description": "Compliment"
        },
        {
        "code": "9",
        "description": "Other"
        }
        ]
    }
    
## 3.72 FeedbackPost

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|id|   Represents the unique identifier of the feedback post    |YES|String|READ ONLY|
|category|  Represents the root level option  |YES|FeedbackCategoryType||
|subject|  Represents the sub level option |YES|FeedbackSubjectType||
|comment|  Represents the feedback comment   |YES|String|1000 character limit|
|poNumber|  Represents the unique identifier of the dispatch  |YES/NO|String|Required for for JobDetails Feedback.Not available otherwise |
|submittedOn|  Represents the timestamp the feedback is |YES|DateTime|UTC format READ ONLY|
|vendorId|  Represents the unique identifier of the   |YES|String|READ ONLY|
|submittedBy| Represents the name of the submitter  |YES||READ ONLY|
|submittersEmailAddress|  Represents the emailAddress of the submitter  |YES|String|READ ONLY|


###Sample JSON

    {
        "id":"3346456",
        "category": {
        "code": "1"
        },
        "subject":
        {
        "code": "1"
        },
        "comment": "This is a test comment" ,
        "submittedOn": "2014-04-09T09:54:34Z" ,
        "submittedBy": "Protow",
        "submittersEmailAddress": "protow@protowdp.com"
    }
    
    
## 3.73 ServerNotificationSubscription

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|subscriptionId|  Unique identifier of the subscription   |YES|String|API server will call this URL to notify the events in Roadside connect|
|callBackUrl|  Url that will be called back to notify  |YES|String|Security token which reviving server has to validate|
|notificationToken|  The notification Token for security |YES/NO|String|RSecurity token which reviving server has to validateequired for iOS|
|notificationEvents|  List of events to be notified  |NO|List of Notification Types consumer is interested in|if not specified subscribes to all event s as applicable Refer to "Get Notification Type for detailed values of notification events.|

###Sample JSON

    {
        " susbscriptionId" : "34534563",
        " callBackUrl" : "http://yourServename/.../notify",
        " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
        " notificationEvents" : "1,2,3,…"
        
    }   
    
    
## 3.74 ClientNotificationSubscription

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|subscriptionId|  Parse.com Client Unique ID  |YES|String||
|deviceId|  The device id  |YES|String||
|deviceToken|  The device Token |YES/NO|String|Required for iOS|
|platform|  The Client Platform  |NO|String||
|osVersion|  The version of Android or iOS  |NO|String||

###Sample JSON

    {
        " susbscriptionId" : "JKLJIOHIOKKNKDSADWQDSD",
        "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
        "deviceToken"  : "HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
        "platform"  : "Android",
        "osVersion" : "4.0.3"
        
    }  
    
    
## 3.75 HeatMapEnrollment

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|heatMapEnrollmentId|  Unique identifier of the enrollment  |YES|String|Only available in Response|
|heatMapUrl  | Url  that will be hosted by 3rd-party partners and called by Agero for HeatMap data  |YES|String|API server will call this URL to request HeatMap Data|
|authorizationToken | Security Token|YES/NO|String|Security token which receiving server has to validate |


###Sample JSON

    {
        "heatMapEnrollmentId" : "34534563",
        "heatMapUrl" : "http://yourServename/.../notify",
        "authorizationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2"
    }
    
## 3.76 HeatMapDataRequest

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|heatMapRequestId| Unique identifier of the heatMap Data Request  |YES|String|
|disablementLocation  |Disablement location’s address and lat/long  |YES|Location|StreetAddress , City, State along with lat/long will always be provided|
|radius | Radius of interest in miles Agero wants the HeatMapa data for|YES/NO|Double|
|equipment |Equipment of Interest|OPTIONAL|Double|EquipmentType Enum|Refer to "Get Equipment Types" API for possible values|
|vendorList |Represents the list of vendors 3rd party partners should send the heatmap data for|YES/NO|String|Comma separated list of vendorIds|

###Sample JSON

    {
        "heatMapRequest":"6668768575",
        "disablementLocation" : {
        "address1":"22 Mazzeo Dr",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.165312598068283,
        "lng":-71.0567153130004
        },
        "radius" : 5.0,
        "equipment" : {
        "code":"LDWL",
        "description":"Light Duty Wheel Lift"
        },
        "vendorList" : "57515,16540,32511…"
    }
    
## 3.77  HeatMapDataItem

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|vendorId| Id of the Vendor the driver blongs to  |YES|Location|StreetAddress , City, State along with lat/long will always be provided|
|currentLocation  |Driver’s current location’s address and lat/long |YES|Location|StreetAddress , City, State along with lat/long will always be provided|
|driverName | Name of the driver|YES|String|
|dispatchStatus|  Represents the current state of the driver |YES|Dispatch Status|ONLY Work in Progress Dispatch disposition statuses  Possible Values: 10- Assigned 20- En Route 30-On Scene 40-Tow In Progress 50-Destination Arrival|
|equipment  | Indicates the type of equipment / vehicle a driver has  |YES|EquipmentType|Refer to "Get Equipment Types" for possible list of Equipments|
|disablementLocation |Disablement Location’s address and lat/long the driver is headed to|NO|Location|Applicable only if the driver is currently assigned a job or enroute to a disablement location|
|towDestination|  Tow Destination address  |NO|Location|Only applicable if the the driver is currently with assigned / enroute/towing a tow assignment|
|timestamp  | Represents the date and time the data was persisted|NO|DateTime|UTC Time format READ ONLY Property|


###Sample JSON

    {
        "vendorId" : "3253543",
        "driverName":"John Smith",
        "dispatchStatus":{
        "code":"10"
        },
        "currentLocation" : {
        "address1":"15 Worcester Rd",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.16531259806,
        "lng":-71.0567153130
        },
        "disablementLocation" : {
        "address1":"22 Mazzeo Dr",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.165312598068283,
        "lng":-71.0567153130004
        },
        " equipment" : {
        " code":"LDWL"
        },
        "towDestination" : {
        "address1":"1 Main St",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.875675675,
        "lng":-71.098098908
        },
        "timestamp":"2014-05-14T17:22:00Z "
    }

## 3.78 EquipmentType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|

### Sample JSON

    {
    "code" : "LDWL",
    "description":"Light Duty Wheel Lift"
    }  
    
## 3.79 TerritoryType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|

### Sample JSON

    {
    "code" : "PA",
    "description":"Performance Advantage"
    }
    
## 3.80 BusinessUnitType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|

###Sample JSON

    {
    "code" : "M/H",
    "description":"Medium / Heavy Duty"
    }

## 3.81 TimePeriodType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|

###Sample JSON

    {
    "code" : "WOW",
    "description":"Week Over Week"
    }

## 3.82 feedbackCategoryType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|


###Sample JSON

    {
    "code" : "1",
    "description":"Week Over Week"
    }
    
### FeedbackSubjectType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Performance category |YES|String|
|description  |Description of the performance category |YES|String|

###Sample JSON

    {
    "code" : "1",
    "description":"Week Over Week"
    }

## 3.83 UrgencyType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Urgency Type |YES|String|
|Description  |Description of the Urgency Type |YES|String|

###Sample JSON

    {
        "code" : "Priority",
        "description":"Priority"
    }

## 3.84 ATAType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the ATA Type |YES|String|
|Description  |Description of the ATA Type |YES|String|

###Sample JSON

    {
        "code" : "1",
        "description":"On Time"
    }

## 3.85 CallMethodType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Call Method Type |YES|String|
|Description  |Description of the Call Method Type |YES|String|

###Sample JSON

    {
        "code" : "IVR",
        "description":"IVR Calls"
    }
    
## 3.86 ReportCriterionType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the Report Criterion Type |YES|String|
|Description  |Description of the Report Criterion Type |YES|String|

###Sample JSON

    {
        "code" : "ETA_IN_MIN",
        "description":"Represents the provided ETA in minutes"
    }

## 3.87 ReportCriterion

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|type  | |YES|ReportCriterionType|
|value|Provides input  value for the criterion  |NO|String|

###Sample JSON
    {
    "type":
        {
        "code" : "ETA_IN_MIN",
        "description":"ETA Minutes"
        },
        "value" : ""
    }    

## 3.88 ReportCriteriaBranch

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|type| Provides a unique name for the criteria |YES|ReportCriteriaBranchType|
|criteria  | |YES|ReportCriterion[]|

## 3.89 KPIMetricBranch

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|performanceCategory| Represents the category of the performance data |YES|PerformanceCategoryType|
|metric  | Represents the performance metrics|YES|KPIMetricType[]|

###Sample JSON

    {
        "performanceCategory":{
        "code":"PERF",
        "description":"Performance"
        },
        "metrics":[
        {
        "type":{
        "code":"CALLACC",
        "description":"Call Acceptance",
        "mesaurementUnit":"Percentage",
        "goalThreshholdType":"MIN",
        "goal":95
        }
        },
        {
        "type": {
        "code":"GOA",
        "description":"GOA",
        "mesaurementUnit":"Percentage",
        "goalThreshholdType":"MAX",
        "goal":5
        }
        }
        ]
    }

## 3.90 ReportCriteriaTree

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
||  ||ReportCriteriaBranch[]|


###Sample JSON

    [{
        "type":{
        "code" : "ETA",
        "description":"ETA "
        },
        "criteria":[
        {
        "type":{
        "code" : "ETA_IN_MIN",
        "description":"ETA minutes"
        },
        "value":null
        },
        {
        "type":{
        "code" : "ETA_MET",
        "description":"ETA Met"
        },
        "value":null
        },
        {
        "type":{
        "code" : "URGENCY",
        "description":"Represents the urgency of the job"
        },
        "value":null
        }
        ]
        },
        {
        "type":{
        "code" : "CALL",
        "description":"CALL"
        },
        "criteria":[
        {
        "type":{
        "code" : "CALL_ACCEPTANCE",
        "description":"Call Acceptance"
        },
        "value":null
        },
        {
        "type":{
        "code" : "CALL_METH",
        "description":"Call MEthod"
        },
        "value":null
        }
        ]
        }
        ]

## 3.91 KPIMetriGroupType extends EnumerationType

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|code| Provides unique identifier of the hour type |YES|String||
|description  | Description of the hour type|YES|String|

###Sample JSON

    {
    "code" : "CALLMETH",
    "description":"Call Method"
    }
    
###Sample Json

    {
        "heatMapDataCount":5,
        "heatMapData": [
        {
        "vendorId" : "3253543",
        "driverName":"John Smith",
        "dispatchStatus":{
        "code":"10"
        },
        
        "currentLocation" : {
        "address1":"15 Worcester Rd",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.16531259806,
        "lng":-71.0567153130
        },
        " disablementLocation" : {
        "address1":"22 Mazzeo Dr",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.165312598068283,
        "lng":-71.0567153130004
        },
        " equipment" : {
        " code":"LDWL"
        },
        "towDestination" : {
        "address1":"1 Main St",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.875675675,
        "lng":-71.098098908
        }
        },
        {
        "vendorId" : "3253543",
        "driverName":"Adam Smith",
        "dispatchStatus":{
        "code":"20"
        },
        " currentLocation" : {
        "address1":"15 Worcester Rd",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Randolph",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02368",
        "lat":42.16531259806,
        "lng":-71.0567153130
        },
        " disablementLocation" : {
        "address1":"1 Cabot Rd",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"medford",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02155",
        "lat":43.35365346,
        "lng":-72.2354325
        },
        " equipment" : {
        " code":"LDWL"
        },
        "towDestination" : {
        "address1":"15 Riverview Dr",
        "address2":"",
        "crossStreet":"",
        "landmark":"",
        "locationType":"",
        "city":"Malden",
        "poi1":"",
        "poi2":"",
        "state":"MA",
        "postalCode":"02160",
        "lat":42.875675675,
        "lng":-71.098098908
        }
        }
        ]
    }

    
## 3.92 HeatMapDataResponse

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|heatMapDataCount| Represents the total count of drivers who are with in the radius of interest and who has equipment of interest |YES|Integer|>0 if 3rd Party Partner has heatmap data available=0 if 3rd party partners have no heatmap data available|
|heatMapData  | Represents the actual heatmap data|NO|HeatMapDataItem[]|Null if 3rd party partners have no heatmap data available|


    
## 3.93 KPIMetricGroup

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|type| Represents the type of metric group|YES|KPIMetricGroupType||
|metrics  | Represents the performance metrics|YES|KPIMetric[]|

###Sample JSON

    {
        "type":{
        "code":"CALLMETH",
        "description":"Call Method"
        },
        "metrics":[
        {
        "type":
        {
        "code" : "EDISP",
        "description": "eDispatch Calls",
        "measurementUnit": "Percentage",
        "threshholdType": "N/A",
        "goal":0
        }
        },
        {
        "type":
        {
        "code" : "IVR",
        "description":"IVR Calls",
        "measurementUnit": "Percentage",
        "threshholdType":"N/A",
        "goal":0
        }
        },
        {
        "type":
        {
        "code" : "PHONE",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType": "MAX",
        "goal":15
        }
        },
        {
        "type":
        {
        "code" : "IVR_EDISP",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType":"MIN",
        "goal":85
        }
        }
        ]
    }
    
## 3.94 KPICategory

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|type| Represents the type of metric group|YES|KPIPerformanceCategoryType||
|metricGroups  | Represents a list of performance metric groups that under the performance category|YES|KPIMetricGroup[]|

###Sample JSON

   {
        "type":{
        "code":"CALLMETH",
        "description":"Call Method"
        },
        "metricGroups":[
        {
        "type":{
        "code":"CALLMETH",
        "description":"Call Method"
        },
        "metrics":[
        {
        "code" : "EDISP",
        "description":"eDispatch Calls",
        "measurementUnit":"N/A",
        "threshholdType":"N/A",
        "goal":0
        },
        {
        "code" : "IVR",
        "description":"IVR Calls",
        "measurementUnit":"N/A",
        "threshholdType":"N/A",
        "goal":0
        },
        {
        "code" : "PHONE",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType":"MAX",
        "goal":15
        },
        {
        "code" : "IVR_EDISP",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType":"MIN",
        "goal":85
        }
        ]
        }
        ]
    }
    
## 3.95 KPIBusinessUnit

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|type| Represents the type of metric|YES|BusinessUnitType||
|performanceCategories  | Represents a list of performance categories applicable for the business unit|YES|KPICategory[]|

###Sample JSON

    {
        "type":{
        "code":"VRM",
        "description":"Vehicle Release Management"
        },
        "performanceCategories":
        [
        {
        "type":{
        "code":"CALLMETH",
        "description":"Call Method"
        },
        "metricGroups":[
        {
        "type":{
        "code":"CALLMETH",
        "description":"Call Method"
        },
        "metrics":[
        {
        "code" : "EDISP",
        "description":"eDispatch Calls",
        "measurementUnit":"N/A",
        "threshholdType":"N/A",
        "goal":0
        },
        {
        "code" : "IVR",
        "description":"IVR Calls",
        "measurementUnit":"N/A",
        "threshholdType":"N/A",
        "goal":0
        },
        {
        "code" : "PHONE",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType":"MAX",
        "goal":15
        },
        {
        "code" : "IVR_EDISP",
        "description":"Live Phone Calls",
        "measurementUnit":"Percentage",
        "threshholdType":"MIN",
        "goal":85
        }
        ]
        }
        ]
        }
        ]
    }
    
## 3.96 ReportDataItem

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| dispatchTimestamp         | Represents the call date & time                 |YES           | String   | UTC time format|
| poNumber                  | Represents the PO# assigned to dispatch         |YES           | String   | N/A for refused jobs|
| zipCode                   |                                                 |YES           | String   |                |
| driverName                | Represents the name of the Driver               |NO            | String | This is applicable only if the job assignment is reported |
| serviceCategory           | Represents the service category of the dispatch |YES           | ServiceCategoryType |                |
| serviceEquipment          |Represents the service equipment of the dispatch |YES           | ServiceEquipmentType|                |
| urgency                   |Represents the urgency of the dispatch           |YES           | UrgencyType|                |
| callAcceptanceFlag        | Represents if is call is accepted / refused     |YES           | CallAcceptanceFlag   |                |
| callDetail                      |Represents the detail of the call          |YES           | String                |
| etaInMinutes              | Represents the promised ETA                     |YES             | String   |Return value will be numeric if job was accepted. "N/A" otherwise                |
| etaMet             | Boolean flag that indicates if the promised ETA is met / not| YES            | ETAMet   |Possible Values: Yes No N/A                |
| ataInMinutes          | Represnts actual time of arrival                       |YES             | String   |Return value will be numeric if job was accepted. "N/A" otherwise                |
| etaExtensionCount         | Represnts the # of times ETA was extended       | YES             | String   |Return value will be : 0—If eta was not extended >0—if Eta was extended "N/A" - If not applicable for the given ServiceCategory                |
| etaExtensionInMinutes           |Represents the time in mins the ETA was extended|             |    | Return value will be :0—If eta was not extended >0—if Eta was extended "N/A" - If not applicable for the given ServiceCategory               |
| callMethod              | Represents the call method the dispatch was accepted on| YES            | CallMethodType   |                |
| assignedAt          |Represents the time at which the job was assigned to a Driver|     YES       | String   |Returen Value will be:UTC DateTime –If timestamp is available Empty String--- timestamp is not available N/A--- Not applicable for the given Service Category  |
| enrouteAt               |Represents the time at which the driver was enroute to the disablement location| YES| String   |  Returen Value will be: UTC DateTime –If timestamp is available Empty String--- timestamp is not available N/A--- Not applicable for the given Service Category              |
| onSceneAt            | Represents the time at which the driver arrived at the disablement location | YES| String   |Returen Value will be:UTC DateTime –If timestamp is available Empty String--- timestamp is not available N/A--- Not applicable for the given Service Category|
| towInProgressAt                 |Represents the time at which the Vehicle was hooked up for a tow                          |             |    |Returen Value will be: UTC DateTime –If timestamp is available Empty String--- timestamp is not available N/A--- Not applicable for the given Service Category N/A--- Not applicable for the given Service Category                |
| destinationArrivalAt  |                               |             |    |Returen Value will be:UTC DateTime –If timestamp is available Empty String--- timestamp is not available
| jobClearedAt              |                   |             |    |   Returen Value will be: UTC DateTime –If timestamp is available Empty String--- timestamp is not available N/A--- Not applicable for the given Service Category             |
| sameDayDelivery | Represents if the job qualifies for a same day delivery                          |    YES         | String   |Possible Values:Yes=>Same Day DeliveryNo=> Not a same day delivery N/A ---not applicable for the given service category                |
| costOfClaim | Represents the dollar Claim amount                        |             | String   |                |
| topBoxCSIScore  |                           |             |    |                |
| bottom2BoxScore |                           |             |    |                | 


### Sample JSON

    {
    "dispatchTimestamp" : "2014-07-16T17:01:45Z",
    "poNumber" : "464646464",
    "zipcode" : "02155",
    "driverName" :"John Smith",
    "serviceCategory":{
    "code" : "LDT",
    "description":"Light Duty Tow"
    },
    "serviceEquipment":{
    "code" : "LDF",
    "description":"Loght Duty Flatbed"
    },
    "urgency":{
    "code" : "STANDARD",
    "description":"Standard"
    },
    "callAcceptanceFlag":{
    "code" : "ACCPTD",
    "description":"Accepted"
    },
    "callDetail" :"Out of Area with zip",
    "etaInMinutes": "60",
    "etaMet" :true,
    "ataInMinutes" :42,
    "etaExensionCount" :"0",
    "driverName" :"John Smith",
    "etaExtensionInMinutes" :"N/A",
    "assignedAt" : "2014-07-16T17:14:12Z",
    "enrouteAt" : "2014-07-16T17:32:00Z",
    "onSceneAt" : "2014-07-16T18:01:23Z",
    "towInProgressAt" : "2014-07-16T18:22:51Z",
    "destinationArrivalAt" : "2014-07-16T18:58:00Z",
    "jobClearedAt" : "2014-07-16T19:10:12Z",
    "sameDayDeliveryFlag":{
    "code" : "NA",
    "description":"N/A"
    },
    "claimDollarAmount" :"48.00",
    "topBoxCsiScore":{
    "code" : "EXCLLNT",
    "description":"Excellent"
    },
    "bottom2BoxScore":{
    "code" : "FAIR",
    "description":"Fair"
    }
    }
    
## 3.97  CallAcceptanceFlag extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| code         | Provides unique identifier of the hour type            |YES           | String   | |
| description                  |Description of the hour type      |YES           | String   ||

###Sample JSON

      {
        "code" : "RFSD",
        "description":"Refused"
      }
      
## 3.98 GOAClaimedFlag extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| code         | Provides unique identifier of the hour type            |YES           | String   | |
| description                  |Description of the hour type      |YES           | String   ||

###Sample JSON

      {
        "code" : "YES",
        "description":"Yes"
      }
      
## 3.99 ReportTemplate

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| id         | Represents the unique identifier of the saved report Template    |YES           | String   |READ ONLY |
| title                  |Represents the name of the report filter   |YES           | String   ||
| crireriaTree         |Represents the list of filters       |YES           | ReportCriteriaTree   | |
| subscribers                  Represents list of users who can see the report template in their saved reports  |Optional           | ReportUser[]   |Retruned only for the creator of the report. Scubscribers don’t get to see the list of other subscribers|
| owner         | Represents the id of the user who created the report template         |YES           | ReportUser   | |
| schedule                  |Represents the schedule if the the report needs to be run on a periodic basis   |Optional           | ReportSchedule   ||
| status         |Represents the current state of the report         |YES           | ReportStatusType   |READ ONLY |
| createdAt                  |Represent the timestamp at which the report template was created     |YES           | String   |UTC Format READ ONLY|
| lastUpdatedAt         |Represent the timestamp at which the report template was last updated     |YES           | String   |UTC Format READ ONLY |


###Sample JSON

      {
        "id":"8768679868796",
        "title":"More Than $600 Claims",
        "criteriaTree":[{
        "type":{
        "code" : "ETA",
        "description":"ETA "
        },
        "criteria":[
        {
        "type":{
        "code" : "ETA_IN_MIN",
        "description":"ETA minutes"
        },
        "value":"21_40"
        },
        {
        "type":{
        "code" : "ETA_MET",
        "description":"ETA Met"
        },
        "value":"ALL"
        },
        {
        "type":{
        "code" : "URGENCY",
        "description":"Urgency"
        },
        "value":"STANDARD"
        }
        ]
        },
        {
        "type":{
        "code" : "CALL",
        "description":"CALL"
        },
        "criteria":[
        {
        "type":{
        "code" : "CALL_ACCEPTANCE",
        "description":"Call Acceptance"
        },
        "value":"ALL"
        },
        {
        "type":{
        "code" : "CALL_METH",
        "description":"Call Method"
        },
        "value":"ALL"
        }
        ]
        }
        ],
        "subscribers":[
        {
        "id":"35453",
        "userName":"John Smith",
        "emailAddress":"jsmith@abc towing.com"
        },
        {
        "id":"35454",
        "userName":"Jason Smith",
        "emailAddress":"jason@abc towing.com"
        }
        ],
        "owner":{
        "id":"35451",
        "userName":"Marquis Alexander",
        "emailAddress":"malexander@abc towing.com"
        },
        "schedule":{
        "frequency":{
        "code":"WKLY",
        "description":"Weekly"
        },
        "dataTimeframe":{
        "code":"WK",
        "description":"1 WK"
        }
        },
        "createdAt":"2014-07-16T17:01:45Z ",
        "lastUpdatedAt":"2014-07-17T19:13:00Z "
        }
        
## 3.100 ReportUser

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| id         | Represents the userId of the subscriber   |YES           | String   ||
| userName                  |Represents the name of the subscriber   |YES           |    |READ ONLY|
| emailAddress         |Represents the email Address of the subscriber    |YES           | String   |READ ONLY |

### Sample JSON
   
        {
        "id":"35453",
        "userName":"John Smith",
        "emailAddress":"jsmith@abc towing.com"
        } 
       
## 3.101 ReportFrequencyType extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the frequency Type   |YES           | String   ||
| Description                  |Description of the frequency Type   |YES           | String   ||

### Sample JSON

      {
      "code" : "WKLY",
      "description":"Weekly"
      }
      
## 3.102 ReportDataTimeframeType extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the  ATA Type   |YES           | String   ||
| Description                  |Description of the ATA Type   |YES           | String   ||

### Sample JSON

      {
     "code" : "DAY",
     "description":"1 Day"
      }
      
### ReportDataTimeframeType extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the  ATA Type   |YES           | String   ||
| Description                  |Description of the ATA Type   |YES           | String   ||

### Sample JSON

      {
     "code" : "DAY",
     "description":"1 Day"
      }
      
## 3.103 ReportStatusType extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the  ATA Type   |YES           | String   ||
| Description                  |Description of the ATA Type   |YES           | String   ||

### Sample JSON

      {
        "code" : "SCHDLD",
        "description":"Scheduled"
      }
      
## 3.104 EquipmentShift Type extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the  Equipment Shift  |YES           | String   ||
| Description                  |Description of the Shift Type   |YES           | String   ||

### Sample JSON

      {
        "code" : "ALL",
        description":"24 Hour"
      }
      
## 3.105 VendorRequestType extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the type of request made |YES           | String   |Valid values include A (add), U (update), D (delete)|
| Description                  |Description of the kind of request |YES           | String   |Add/ Update / Delete|

### Sample JSON

      {
        "code" : "U",
        "description":"Update"
      }
        
## 3.106 VendorRequestStatus extends EnumerationType

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| Code         |  Provides unique identifier of the  current status of the request  |YES           | String   |Request can be either PNDNG / UNDRVW / APPRVD / DECLND|
| Description                  |Description of the current status for the request |YES           | String   |Valid values include Pending, UnderReview, Approved or Declined|

### Sample JSON

      {
        "code" : "PNDNG",
        "description":"Pending"
      }
        
        
## 3.107 VendorRequestComment

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| commentText         |  Provides unique identifier of the  current status of the request  |YES           | String   ||
| commentedOn                  |Description of the current status for the request |YES           | String   |UTC Format|

### Sample JSON

      {
        "commentText" : "Policy under review. Need to verify the coverage details",
        "commentedOn":"10/03/2014 08:00 AM"
      }
      
## 3.108 Vendor Request History Item

| Schema Property          | Description                                    | Is Required | Type     | Business Rules |
|:--------------------------|:------------------------------------------------|:-------------|:----------|:----------------|
| entityType         |  Provides the type of the vendor entity the request is made  |YES           | Enum   |Valid values include equipment, insurancePolicy, facility, Territory|
| requestType                  |Description of the type of request is made|YES           | VendorRequestType   |Possible values can be Add,Update & Delete|
| requestStatus         | Current Status of the request |YES           | VendorRequestStatus   |Request can be either PNDNG / UNDRVW / APPRVD / DECLND|Posible Values can be APPRVD/UNDRVW/DECLND/PNDNG|
| oldValue                  |Data Model for types specificed |NO           | Equipment, InsurancePolicy, Territory, Facility, contactInfo   ||
| approvedOn         | Approved datetime stamp for the old request in UTC format|YES/NO          |DateTime UTC|If old value is present then mandatory else optional|
| newValue                  |Data Model for types specificed |NO           | equipment, insurancePolicy, territory, facility, contactInfo  | |
| submittedOn         |  Request submited datetime stamp for the new request in UTC format  |YES/NO           | DateTime UTC   |If new value is present then mandatory else optional|
| reviewedOn                  |Request reviewed datetime stamp for the new request in UTC format |YES/NO             | DateTime UTC   |Valid values include Pending, UnderReview, Approved or Declined|If new value request status is under Review than mandatory, else optional|
| declinedOn         |  Request declined datetime stamp for the new request in UTC format |YES/NO             | DateTime UTC   |Request can be either PNDNG / UNDRVW / APPRVD / DECLND|If new value request status is declined than mandatory, else optional|
| comments         | Array of comments as specified by the network manager  |NO           | requestComments[]   |Request can be either PNDNG / UNDRVW / APPRVD / DECLND|



### Sample JSON

    {
        "entityType":"equipment",
        "requestType":{
        "code":"U",
        "description":"Update"
        },
        "requestStatus":{
        "code":"PNDNG",
        "description":"Pending"
        },
        "oldValue":{
        "equipmentId":"LDWL",
        "type":"Light Duty Wheel Lift",
        "quantity":5,
        "startDate":"11/6/2007",
        "shiftType" : {
        "code":"ALL"
        }
        },
        "approvedOn":"10/24/2013 11:32 AM",
        "newValue":{
        "equipmentId":"LDWL",
        "type":"Light Duty Wheel Lift",
        "quantity":8,
        "startDate":"11/6/2007",
        "shiftType" : {
        "code":"ALL"
        }
        },
        "submittedOn":"08/24/2014 10:32 AM",
        "comments": [
        {
        "commentText": "Updating quantities for LDWL equipment",
        "commentedOn": "08/24/2014 10:32 AM"
        },
        {
        "commentText": "Status in review, Vendor cannot do changes",
        "commentedOn": "08/24/2014 8:32 PM"
        },
        {
        "commentText": "Approval pending Vendor call",
        "commentedOn": "08/25/2014 11:32 AM"
       }
     ]
    }


## Group 4 Security API

The "Security" API is designed to allow client applications to securely use Roadside Connect backend services once the users are 
authenticated and authorized by this API. In order to use this API, the users will have to log into Agero Support at agerosupport.com 
and create a user name and password. Once the users have generated their login credentials, they will be able to log into the client 
application and extend the login session if the application is left idle for a configurable number of minutes. The users will also have the
option to log out of the app if the users do not want to extend the login session or they just simply want to logout at any moment in the time 
from the app.Currently, there are two types of users that can use the Roadside Connect Services:

* Manager/Owner
* Dispatcher
* Driver

A Dispatcher and Manager has the same rights and permissions as the Owner has. They can create and update profiles, accept or reject new jobs, assign jobs to drivers, updated job status and manage fleet map.
A driver can create and update their own profile, update job status for assigned jobs.

## 4.1 Login [/auth/login]

### Description
Login API

In order to login into a Client App, users will have to create a new account in Agerosupport.com.
Users will be able to log into an application by entering the user id and password. The Security API will validate these credentials along with the API key provided by the client application. Once the validation is successful, the Security API will create and return a valid SWT token along with a flag that indicates if the logged in user has to accept a new version of terms & conditions. (If the Terms and Condition flag is true, the client application can follow the terms & conditions accept / decline workflow that is documented in the Terms and Conditions API section of this document).
If the users provide an incorrect username and/or password, security API will return an error code that could be mapped to a user friendly authentication failure message on the client application.

###Sample Request URL

/auth/login

###Request Headers

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:----------- |:-----------|:----|:-------------|
| Authorization   |Authorization header containing a base64 encoded string of ConsumerKey:ConsumerSecret|YES|String||
                          
                          
###Sample Request Headers

Authorization: THZ3dm8zUWVHaVdOYFtdmRoU1dTUmVaODhzdTg6Qk5nNmF4bklSSm93bThHUw==

###Request JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|Username         |The service provider's AgeroSupport.com username|YES |String| 
|Password         |The service provider's AgeroSupport.com password|YES |String| 
|clientId         |The IMEI# of the device from which the user is accessing RoadsideConnect App |YES |String| 


###Response JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|userClaim        |The User Claim containing role information|YES |UserClaim| 
|Token            |Valid OAuth 2.0 SWT token information     |YES |Token    |
|newVersionOfTermsAndConditionsAvailable |Indicator if user has to accept/decline new revision of terms and conditions  |YES |Boolean| 
|profileCompletenessPercentage |Indicates the percentage of profile that's completed |YES |Int| READ ONLY| 
|profileIncompleteNotificationSentOn |Represents a timestamp the end-user was last notified about profile incompleteness |YES |DateTime |READ ONLY UTC Time  Format|
 
###Errors 

|HTTP Code |Error Code |Message |Reason  | 
|:---------|:---------|:-------|:-------|
|400       |REQUEST_PARAMETER_MISSING |Must provide a username and password| A username and/or password was not provided| 
|401       |INVALID_CLIENT            |Client identifier is required       |An API key was not supplied| 
|401       |INVALID_CLIENT            |Client credentials are invalid      |The API key supplied is invalid|
|401       |INVALID_CREDENTIALS       |Invalid Username or Password        |Could not authenticate with the supplied credentials| 
|401       |ACCOUNT_LOCKED            |Account is Locked                   |The User's account is locked| 
|404       |RESOURCE_NOT_FOUND        |Facility location is not available for this user, the location must be provided and approved by Agero administrator.                   |Facility location is not available for this user, the location must be provided and approved by Agero administrator.| 
|500       |UNKNOWN                   |Unknown Error                       |An unknown error occurred at the server|

### Login [POST]

+ Request (application/json)

    + Header

            Authorization: WUxzVlJleUkwenhaN3NQSG9TdnU4NlVpbXFSbnFpSTM6WmxHN1lTY3cwMUxQWXhZUQ

    + Body

            {
            "username" : "Auto1 Owner",
            "password" : "666666",
            "clientId":"123456786543210"
            }
+ Response 200 (application/json)

    + Body

            { 
                "userClaim":
                {
                    "id" : "56789",
                    "vendorId":"1234",
                    "username":"efudd",
                    "role":"Driver",
                    "acceptedVersionOfTermsAndConditions": "1.0",
                    "profileCompletenessPercentage":75,
                    "profilenIncompleteNotificationSentOn": "2014-04-09T09:54:34Z"
                },
                "token" :
                {
                    "expires_in":1799,
                    "refresh_token":"vyUeuNQrrKvgdQeGh5HpaxtUuV88wQyb",
                    "access_token":"7z9ZeGyweG98YMAyB0iSm2EiB6bD",
                    "refresh_count":0
                },
                "newVersionOfTermsAndConditionsAvailable":true 
            }


## 4.2 Refresh Token [/auth/refreshToken]

###Description
Refresh Token API

The "Refresh Token " API allows client applications to protect user accounts if the application has been left idle for a certain number of minutes. The inactivity period can be configured in the backend. When the configured expiration time period has passed (without having the user responding to the job requests, assigning jobs, setting job status, or updating profile, driver, facilities, equipment, or other activities), the user will be able to refresh the token or opt to logout of the app.
If the user decides to extend the login session before token expiration, the Refresh Token API will refresh the access token based on the supplied refresh_token.

See: http://tools.ietf.org/html/rfc6749#page-47 for more information.

###Sample Request URL
/auth/refreshToken

###Request Headers

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
| Authorization   |Authorization header containing a base64 encoded string of ConsumerKey:ConsumerSecret|   YES       |String|              |
| Content-Type    | HTTP Content Type|   YES     | String  | Must be: application/x-www-form-urlencoded|
                          
                          
###Sample Request Headers

Authorization: THZ3dm8zUWVHaVdOYFtdmRoU1dTUmVaODhzdTg6Qk5nNmF4bklSSm93bThHUw==
Content-Type: application/x-www-form-urlencoded

###Request Body

|Form Variable |Description  |Is Required  |Type  |Business Rules |
|:-------------|:-----------|:-----------|:----|:--------------| 
|grant_type    |OAuth2.0 Grant Type| YES |String|Must be: refresh_token| 
|refresh_token |Valid OAuth2.0 refresh token |YES |String| 


###Response JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|Token            |Valid OAuth 2.0 SWT token information   |YES |Token    |

   
###Errors 

|HTTP Code |Error Code |Message |Reason  | 
|:---------|:---------|:-------|:-------|
|401       |INVALID_CLIENT            |Client identifier is required       |An API key was not supplied| 
|401       |INVALID_CLIENT            |Client credentials are invalid      |The API key supplied is invalid|
|401       |INVALID_TOKEN             |oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
  
### Refresh Token [POST]
+ Request (HTTP Content Type)

    + Header

            Authorization: THZ3dm8zUWVHaVdOYFtdmRoU1dTUmVaODhzdTg6Qk5nNmF4bklSSm93bThHUw==
            
   
    + Body

            grant_type=refresh_token&refresh_token=tGzv3JOkF0XG5Qx2TlKWIA

+ Response 200 (application/json)

            {
                "token" :
                {
                    "expires_in":1799,
                    "refresh_token":"vyUeuNQrrKvgdQeGh5HpaxtUuV88wQyb",
                    "access_token":"7z9ZeGyweG98YMAyB0iSm2EiB6bD",
                    "refresh_count":0
                }
            }

## 4.3 Logout [/auth/logout]

###Description

The "Logout "API allows client applications to protect user accounts if the application has been left idle for a certain number of minutes. The inactivity period can be configured in the backend. When the configured expiration time period has passed (without having the user responding to the job requests, assigning jobs, setting job status, or updating profile, driver, facilities, equipment, or other activities), the user will be able to refresh the token or opt to logout of the app.
If the user decides to log out of the client application, the Logout API will log the authenticated user out of the Roadside Connect System and invalidate the access token.

###Request Headers

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
| Authorization   |Authorization header containing OAuth Bearer Token|   YES       |String|              
   
###Request Schema

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
| clientId        |Represents the unique identifier of the app user is logging out from|   YES       |String| This has to match the clientId passed during login process|
                            
###Sample Response

HTTP/1.1 200 OK  

###Errors 

|HTTP Code |Error Code | Message  |Reason  | 
|:---------|:---------|:-------|:-------|
|400       |BAD_REQUEST               |Request Validation failed |Client Identifier is Required| 
|401       |INVALID_CLIENT            |Invalid ClientId for Given Resource       |A valid API key was not supplied. Apigee App not approved| 
|401       |INVALID_TOKEN             |oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       |UNKNOWN                   |Unknown Error                       |An unknown error occurred at the server| 
   
### Logout [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
   
    + Body

            {
                "clientId" : "123456786543210"
            }

+ Response 200

# Group 5 Dispatch API
## 5.1 Get Dispatch List [/dispatches]

### Description
Once dispatches are generated in One Road and assigned to Vendors through the Automated Dispatch process, the "Get Dispatch list" API will allow user to get a list of dispatches based on role:
   
- For Owner/Dispatcher/Manager, the API returns a list of dispatches for the vendor, including new offers and unassigned jobs.
- For Driver, the API returns a list of dispatches for the currently logged-in driver.

The Get Dispatch API will return information available in the following business objects: Dispatches, Vehicle, Disablement Location, and Assigned Driver.
Pagination is available and enforced for this request.

###API Business Rules

- The for Driver parameter is optional. If this parameter is omittes, the API will list dispatches based on login/role. If a driver is specified , the API will query for the specific driver, and only if the role = Owner or Dispatcher.
- The dispatchStatusList parameter is a comma separated list of dispatch statuses the user is interested in. This is optional and if not provided, all dispatches will be returned. For possible values of dispatch status codes: Please refer to "Valid Status Codes" resource from Dispatch Status API
- The startDate(mm/dd/yyyy) and endDate (mm/dd/yyyy) parameters ----These parameters allow the consumer of the API to retrieve a list of dispatches which fall within a specific date range. These parameters are optional and following rules apply:
  * Both startDate and endDate are provided----endDate has to be later than startDate. Exception(HttpStatusCode:400) will be thrown otherwise
  * Neither startDate nor endDate are provided---- current date will be applied for both startDate and endDate.
  * Only startDate is provided with no endDate-----current date will be applied to endDate.
  * Only endDate is provided with no startDate----this is not allowed. endDate always requires a startDate. Exception(HttpStatusCode:400) will be thrown otherwise
  

###Sample Request URL Path(s)  

/dispatches

/dispatches?forDriver=12345

/dispatches?dispatchStatusList=2,20,30

/dispatches?forDriver=12345&dispatchStaus=2,20,30

/dispatches?forDriver=12345&dispatchStaus=2,20,30&startDate=06-01-13

/dispatches?forDriver=12345&dispatchStaus=2&startDate=06-01-13&endDate=06-06-13

/dispatches?forDriver=12345,454646

/dispatches?serviceTypes=ROAD,TOW

/dispatches?poNumbers=245711363,2454511678


###Request Schema

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|totalCount       |Number of dispatches  found by the query. For example, if there are 100 dispatches, this count will be 100,even though pagination has only returned the first 20 |YES |Integer| 
|limit            |The pagination limit used  |YES   |Integer| 
|offset           |The pagination offset used |YES   |Integer| 
|results       |Returns an array of dispatch objects |YES |Dispatch[]| 

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Invalid Request      |Invalid PO Number| Invalid PO Number/PONumber is not Valid|| 
|400       |Invalid Request    |Invalid Parameters specified in the Query String|Invalid Parameters || 
|403       |Forbidden    |Invalid Profile|Required a valid Profile || 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | No Jobs Found    |             |   No Jobs Found.    |No jobs were found for the query| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


###Get Dispatch List [GET]

+ Request ()

    + Header

            Authorization: Bearer t7RUbsjGojsX2PG2irhh5rxcGQsi
   

+ Response 200 (application/json)

            {
                "totalCount": 1,
                "offSet": 0,
                "limit": 10,
                "results": [
                    {
                        "comments": [
                            {
                                "commentCode": "DLC",
                                "displayText": "Disablement Location",
                                "commentText": "be careful with dog in the back yard."
                            }
                        ],
                        "statusHistory": null,
                        "serviceType": "Tow",
                        "coverage": "",
                        "dispatchRequestNumber": "457460776",
                        "urgency": "STANDARD",
                        "referenceNumber": null,
                        "poNumber": "115315731",
                        "problem": "FlatTire",
                        "equipment": {
                            "type": "LightDutyFlatbed",
                            "equipmentId": null
                        },
                        "receivedTime": "20150121T14: 55: 06Z",
                        "acceptedTime": "20150121T14: 55: 26Z",
                        "currentStatus": {
                            "code": "10",
                            "description": "ASSIGNED",
                            "eta": 0,
                            "reason": null,
                            "reasonCode": 0,
                            "source": "RoadsideconnectquOgmrMA3Da8ttvuJiI1OhoL6C0slWfU",
                            "extJobId": null,
                            "latitude": 0,
                            "longitude": 0,
                            "statusTime": "20150121T09: 55: 26",
                            "driverId": 0,
                            "reportedBy": "Dispatcher",
                            "event": null
                        },
                        "etaStatusCode": 0,
                        "vehicle": {
                            "vin": null,
                            "year": "2007",
                            "state": null,
                            "make": "Hyundai",
                            "mileage": 0,
                            "model": "SantaFe",
                            "color": "Unknown",
                            "plate": null,
                            "VehicleType": null,
                            "driveTrainType": null,
                            "fuelType": null
                        },
                        "disablementLocation": {
                            "contactInfo": {
                                "callbackNumber": "1212112112",
                                "name": "",
                                "phone": null
                            },
                            "dropInstructions": null,
                            "garageClearanceHeight": null,
                            "garageLevel": null,
                            "isDriverWithVehicle": true,
                            "nightDropOff": false,
                            "parked": false,
                            "address1": "22147LeiropDr",
                            "address2": null,
                            "crossStreet": "DrewfallsDr",
                            "landmark": null,
                            "locationType": null,
                            "city": "Richmond",
                            "poi1": null,
                            "poi2": null,
                            "state": "TX",
                            "postalCode": "77407",
                            "lat": 29.68697143715451,
                            "lng": 95.7644752123639
                        },
                        "towDestination": {
                            "contactInfo": {
                                "callbackNumber": null,
                                "name": "HUBHYUNDAIWEST",
                                "phone": "7813063258"
                            },
                            "nightDropOff": false,
                            "address1": "17007KATYFREEWAY",
                            "address2": null,
                            "crossStreet": null,
                            "landmark": "",
                            "locationType": "Dealership",
                            "city": "HOUSTON",
                            "poi1": null,
                            "poi2": null,
                            "state": "TX",
                            "postalCode": "77094",
                            "lat": 29.7845,
                            "lng": 95.6785
                        },
                        "assignedDriver": {
                            "driverId": 309542,
                            "name": "tom123",
                            "status": null,
                            "equipment": null,
                            "currentLocation": null,
                            "gpsTracking": false,
                            "profilePictureUrl": null,
                            "smartPhone": false,
                            "cellPhone": null,
                            "officePhone": null,
                            "officeEmail": null,
                            "disablementLocation": null,
                            "serviceType": null,
                            "username": null,
                            "onDuty": false,
                            "profileLastUpdatedAt": "00010101T00: 00: 00"
                        },
                        "eta": "20150121T15: 40: 26",
                        "etaInMinutes": 45,
                        "revisedEta": "20150121T15: 40: 26",
                        "revisedEtaInMinutes": 0,
                        "etaRevisionCount": 1,
                        "responseTimeExtCount": 0,
                        "dispatcherContactNumber": null,
                        "dispatcher": null,
                        "signatures": [
                            {
                                "signatureId": "244254",
                                "signeeName": "Smith",
                                "signeeType": "Employee",
                                "signatureReason": "Pre-existing Damages",
                                "locationType": "Tow Location",
                                "latitude": 72.3434,
                                "longitude": -182.43543,
                                "dispatchStatusCode": "20",
                                "capturedDateTime": "12/21/2012 11:28 AM",
                                "signatureUrl": "/dispatches/354235235/signatures/234234/picture"
                            },
                            {
                                "signatureId": "24424",
                                "signeeName": "Joe",
                                "signeeType": "Employee",
                                "signatureReason": "Pre-existing Damages",
                                "locationType": "Tow Location",
                                "latitude": 72.3434,
                                "longitude": -182.43543,
                                "dispatchStatusCode": "20",
                                "capturedDateTime": "12/21/2012 11:45 AM",
                                "signatureUrl": "/dispatches/354235235/signatures/24424/picture"
                            }
                        ],
                        "equipmentList": [
                            {
                                "type": "LightDutyFlatbed",
                                "equipmentId": null
                            }
                        ]
                    }
                ]
            }
        
## 5.2 Get A Single Dispatch by Dispatch Request Number [/dispatches/{dispatchRequestNumber}/detail]

### Description
The "Get a single dispatch by DispatchRequestNumber " API  will return specific information for a dispatch. This API will be called when a user selects a dispatch from the list of dispatches available for that user.
The "Get a Single Dispatch by DispatchRequestNumber " API will return information related to the following business object: Dispatch, Current Status, Equipment, Vehicle, Disablement Location, Tow Destination, Assigned Driver, Comments and Signatures. 

###Sample Request URL Path

/dispatches/329345447/detail

###Request  Parameters

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|dispatchRequestNumber |Represents the dispatch Request# of the dispatch |YES |String| 

###Response Schema

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|dispatch         |The dispatch |YES          |Dispatch| 

    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The job you are tyring to retrive is not allowed by the current user|Drivers cannot see jobs aren't unassingned or assigned to them|  
|404       | Job Not Found   |             |       |No jobs were found for the query| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


###Get A Single Dispatch by Dispatch Request Number[GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
   

+ Response 200 (application/json)

                    {
            "comments": [
                {
                    "commentCode": "DLC",
                    "displayText": "Disablement Location",
                    "commentText": "be careful with dog in the back yard."
                }
            ],
            "statusHistory": null,
            "serviceType": "Tow",
            "coverage": "",
            "dispatchRequestNumber": "457460776",
            "urgency": "STANDARD",
            "referenceNumber": null,
            "poNumber": "115315731",
            "problem": "FlatTire",
            "equipment": {
                "type": "LightDutyFlatbed",
                "equipmentId": null
            },
            "receivedTime": "20150121T14: 55: 06Z",
            "acceptedTime": "20150121T14: 55: 26Z",
            "currentStatus": {
                "code": "10",
                "description": "ASSIGNED",
                "eta": 0,
                "reason": null,
                "reasonCode": 0,
                "source": "RoadsideconnectquOgmrMA3Da8ttvuJiI1OhoL6C0slWfU",
                "extJobId": null,
                "latitude": 0,
                "longitude": 0,
                "statusTime": "20150121T09: 55: 26",
                "driverId": 0,
                "reportedBy": "Dispatcher",
                "event": null
            },
            "etaStatusCode": 0,
            "vehicle": {
                "vin": null,
                "year": "2007",
                "state": null,
                "make": "Hyundai",
                "mileage": 0,
                "model": "SantaFe",
                "color": "Unknown",
                "plate": null,
                "VehicleType": null,
                "driveTrainType": null,
                "fuelType": null
            },
            "disablementLocation": {
                "contactInfo": {
                    "callbackNumber": "1212112112",
                    "name": "",
                    "phone": null
                },
                "dropInstructions": null,
                "garageClearanceHeight": null,
                "garageLevel": null,
                "isDriverWithVehicle": true,
                "nightDropOff": false,
                "parked": false,
                "address1": "22147LeiropDr",
                "address2": null,
                "crossStreet": "DrewfallsDr",
                "landmark": null,
                "locationType": null,
                "city": "Richmond",
                "poi1": null,
                "poi2": null,
                "state": "TX",
                "postalCode": "77407",
                "lat": 29.68697143715451,
                "lng": 95.7644752123639
            },
            "towDestination": {
                "contactInfo": {
                    "callbackNumber": null,
                    "name": "HUBHYUNDAIWEST",
                    "phone": "7813063258"
                },
                "nightDropOff": false,
                "address1": "17007KATYFREEWAY",
                "address2": null,
                "crossStreet": null,
                "landmark": "",
                "locationType": "Dealership",
                "city": "HOUSTON",
                "poi1": null,
                "poi2": null,
                "state": "TX",
                "postalCode": "77094",
                "lat": 29.7845,
                "lng": 95.6785
            },
            "assignedDriver": {
                "driverId": 309542,
                "name": "tom123",
                "status": null,
                "equipment": null,
                "currentLocation": null,
                "gpsTracking": false,
                "profilePictureUrl": null,
                "smartPhone": false,
                "cellPhone": null,
                "officePhone": null,
                "officeEmail": null,
                "disablementLocation": null,
                "serviceType": null,
                "username": null,
                "onDuty": false,
                "profileLastUpdatedAt": "00010101T00: 00: 00"
            },
            "eta": "20150121T15: 40: 26",
            "etaInMinutes": 45,
            "revisedEta": "20150121T15: 40: 26",
            "revisedEtaInMinutes": 0,
            "etaRevisionCount": 1,
            "responseTimeExtCount": 0,
            "dispatcherContactNumber": null,
            "dispatcher": null,
            "signatures": [
                {
                    "signatureId": "244254",
                    "signeeName": "Smith",
                    "signeeType": "Employee",
                    "signatureReason": "Pre-existing Damages",
                    "locationType": "Tow Location",
                    "latitude": 72.3434,
                    "longitude": -182.43543,
                    "dispatchStatusCode": "20",
                    "capturedDateTime": "12/21/2012 11:28 AM",
                    "signatureUrl": "/dispatches/354235235/signatures/234234/picture"
                },
                {
                    "signatureId": "24424",
                    "signeeName": "Joe",
                    "signeeType": "Employee",
                    "signatureReason": "Pre-existing Damages",
                    "locationType": "Tow Location",
                    "latitude": 72.3434,
                    "longitude": -182.43543,
                    "dispatchStatusCode": "20",
                    "capturedDateTime": "12/21/2012 11:45 AM",
                    "signatureUrl": "/dispatches/354235235/signatures/24424/picture"
                }
            ],
            "equipmentList": [
                {
                    "type": "LightDutyFlatbed",
                    "equipmentId": null
                }
            ]
             }
             
# 5.3 Get A Single Dispatch By PO Number [/dispatches/poNumbers/{poNumber}/detail]

###Description

The" Get a single dispatch by PO Number" API  will return specific information for a dispatch. This API will be called when a user selects a dispatch from the list of dispatches available for that user.
The "Get a Single Dispatch by PO Number" API will return information related to the following business object: Dispatch, Current Status, Equipment, Vehicle, Disablement Location, Tow Destination, Assigned Driver, Comments and Signatures. 



###Sample Request URL Path

/dispatches/poNumbers/329345447/detail

###Request  Parameters

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|poNumber|Represents the PO# of the dispatch |YES |String| 

###Response Schema

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|dispatch         |The dispatch |YES          |Dispatch| 

    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The job you are tyring to retrive is not allowed by the current user|Drivers cannot see jobs aren't unassingned or assigned to them|  
|404       |Job Not Found   |             |       |The requested job record doesn’t exist.| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


###Get A Single Dispatch By PO Number [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
   

+ Response 200 (application/json)

                {
                "comments": [
                    {
                        "commentCode": "DLC",
                        "displayText": "Disablement Location",
                        "commentText": "be careful with dog in the back yard."
                    }
                ],
                "statusHistory": null,
                "serviceType": "Tow",
                "coverage": "",
                "dispatchRequestNumber": "457460776",
                "urgency": "STANDARD",
                "referenceNumber": null,
                "poNumber": "115315731",
                "problem": "FlatTire",
                "equipment": {
                    "type": "LightDutyFlatbed",
                    "equipmentId": null
                },
                "receivedTime": "20150121T14: 55: 06Z",
                "acceptedTime": "20150121T14: 55: 26Z",
                "currentStatus": {
                    "code": "10",
                    "description": "ASSIGNED",
                    "eta": 0,
                    "reason": null,
                    "reasonCode": 0,
                    "source": "RoadsideconnectquOgmrMA3Da8ttvuJiI1OhoL6C0slWfU",
                    "extJobId": null,
                    "latitude": 0,
                    "longitude": 0,
                    "statusTime": "20150121T09: 55: 26",
                    "driverId": 0,
                    "reportedBy": "Dispatcher",
                    "event": null
                },
                "etaStatusCode": 0,
                "vehicle": {
                    "vin": null,
                    "year": "2007",
                    "state": null,
                    "make": "Hyundai",
                    "mileage": 0,
                    "model": "SantaFe",
                    "color": "Unknown",
                    "plate": null,
                    "VehicleType": null,
                    "driveTrainType": null,
                    "fuelType": null
                },
                "disablementLocation": {
                    "contactInfo": {
                        "callbackNumber": "1212112112",
                        "name": "",
                        "phone": null
                    },
                    "dropInstructions": null,
                    "garageClearanceHeight": null,
                    "garageLevel": null,
                    "isDriverWithVehicle": true,
                    "nightDropOff": false,
                    "parked": false,
                    "address1": "22147LeiropDr",
                    "address2": null,
                    "crossStreet": "DrewfallsDr",
                    "landmark": null,
                    "locationType": null,
                    "city": "Richmond",
                    "poi1": null,
                    "poi2": null,
                    "state": "TX",
                    "postalCode": "77407",
                    "lat": 29.68697143715451,
                    "lng": 95.7644752123639
                },
                "towDestination": {
                    "contactInfo": {
                        "callbackNumber": null,
                        "name": "HUBHYUNDAIWEST",
                        "phone": "7813063258"
                    },
                    "nightDropOff": false,
                    "address1": "17007KATYFREEWAY",
                    "address2": null,
                    "crossStreet": null,
                    "landmark": "",
                    "locationType": "Dealership",
                    "city": "HOUSTON",
                    "poi1": null,
                    "poi2": null,
                    "state": "TX",
                    "postalCode": "77094",
                    "lat": 29.7845,
                    "lng": 95.6785
                },
                "assignedDriver": {
                    "driverId": 309542,
                    "name": "tom123",
                    "status": null,
                    "equipment": null,
                    "currentLocation": null,
                    "gpsTracking": false,
                    "profilePictureUrl": null,
                    "smartPhone": false,
                    "cellPhone": null,
                    "officePhone": null,
                    "officeEmail": null,
                    "disablementLocation": null,
                    "serviceType": null,
                    "username": null,
                    "onDuty": false,
                    "profileLastUpdatedAt": "00010101T00: 00: 00"
                },
                "eta": "20150121T15: 40: 26",
                "etaInMinutes": 45,
                "revisedEta": "20150121T15: 40: 26",
                "revisedEtaInMinutes": 0,
                "etaRevisionCount": 1,
                "responseTimeExtCount": 0,
                "dispatcherContactNumber": null,
                "dispatcher": null,
                "signatures": [
                    {
                        "signatureId": "244254",
                        "signeeName": "Smith",
                        "signeeType": "Employee",
                        "signatureReason": "Pre-existing Damages",
                        "locationType": "Tow Location",
                        "latitude": 72.3434,
                        "longitude": -182.43543,
                        "dispatchStatusCode": "20",
                        "capturedDateTime": "12/21/2012 11:28 AM",
                        "signatureUrl": "/dispatches/354235235/signatures/234234/picture"
                    },
                    {
                        "signatureId": "24424",
                        "signeeName": "Joe",
                        "signeeType": "Employee",
                        "signatureReason": "Pre-existing Damages",
                        "locationType": "Tow Location",
                        "latitude": 72.3434,
                        "longitude": -182.43543,
                        "dispatchStatusCode": "20",
                        "capturedDateTime": "12/21/2012 11:45 AM",
                        "signatureUrl": "/dispatches/354235235/signatures/24424/picture"
                    }
                ],
                "equipmentList": [
                    {
                        "type": "LightDutyFlatbed",
                        "equipmentId": null
                    }
                ]
            }

            
## 5.4 Submit Dispatch Acceptance [/dispatches/{dispatchRequestNumber}/acceptDispatchRequest]

###Description

The Submit Dispatch Acceptance API will allow users to submit acceptance for a new job offer. The user will have to enter the Estimated Time of Arrival (ETA) 
and a reason in case if the user wants to provide details about special circumstances related to that job for dispatches greater than 90 minutes. 
The Dispatcher can enter one of the following reasons:.

- None
- Weather Emergency
- Extreme traffic in the area

Based on the CDE business rules, the maximum allowed ETA is 480 minutes. In addition, the user can opt to enter or not enter a special circumstances reason. 
Once the user provides the acceptance, CDE will evaluate the ETA and special circumstance reason and provide a push notification to the user, informing the user if the ETA
has been accepted or rejected by Agero. The push notification process is documented in the Push Notification API.

###Sample Request URL
/dispatches/329345447/acceptDispatchRequest

###Sample Acceptance Request

200 OK


###Request JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|eta              |Estimated ETA|YES          |Integer| 
|reason           |Any special circumstances if applicable |YES/NO |String |Required if ETA is beyond the maximum allowable. Possible Values: * None * Weather Emergency * Extreme Traffic in the Area| 

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Invalid Request      |Invalid_ETA| ETA must be non-zero value || 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The job you are tyring to retrive is not allowed by the current user|Drivers cannot see jobs aren't unassingned or assigned to them|
|403       |Forbidden         |FORBIDDEN_RESOURCE|The job has expired, it cannot be accepted|The job cannot be accepted|  
|403       |Forbidden         |FORBIDDEN_RESOURCE|Another dispatcher has already refused/accepted the job.||  
|404       | No Jobs Found    |             |       |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


###Submit Dispatch Acceptance [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                "eta" : "80",
                "reason" : "Extreme Traffic in the Area"
            }
   

+ Response 200 ()

## 5.5 Submit Dispatch Refusal [/dispatches/{dispatchRequestNumber}/refuseDispatchRequest]

###Description

The "Submit Dispatch Refusal "API will allow users to refuse a new job offer. The user will have to enter a refusal reason from the list of refusal reasons available for
that job. Once the user provides and submits the refusal reason, CDE will receive the reason and offer that job to the next Service Provider (available for automated 
Dispatches if available – or a non-automated dispatch provider if none available). In this case, no push notification will be sent to the Service Provider that refused that job.

Dispatcher can select one of the following Rejection reasons codes:

|Reason Code |Reason Description 
|:---------- |:-------------------| 
|400         |Do not accept payment type| 
|406         |Proper equipment not available 501 |No longer offer service| 
|409         |Out of my coverage area |
|503         |Other| 

###Sample Request URL

/dispatches/329345447/refuseDispatchRequest

###Request JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:--------------- |:-----------|:-----------|:----|:-------------|
|reasonCode       |represents the reason code why a job is being refused|YES|String|

###Sample Request

200 OK

                            
    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The resource is not allowed by the the current user| Drivers view or accept job offers|
|403       |Forbidden         |FORBIDDEN_RESOURCE|Another dispatcher has already refused/accepted the job.||  
|403       |Forbidden         |FORBIDDEN_RESOURCE|The job has expired, it cannot be accepted|The job cannot be accepted|
|404       | No Jobs Found    |             |       |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
   
###Submit Dispatch Refusal [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                "reasonCode" : "406"
            }
   

+ Response 200 ()


## 5.6 Request More Time to Accept [/dispatches/{id}/requestExtension]

###Description

The "Request More Time to Accept" API is used to request additional time to accept a job offer. When this API is called, 
it will add 1 minute to the job offer expiration time. This request can be done only for dispatches in the "New "state.

###Sample Request URL

/dispatches/329345447/requestExtension

###Response JSON

| Schema Property | Description | Is Required | Type |Business Rules| 
|:----------------|:-----------|:-----------|:----|:-------------|
|responseTimeExtCount|The number of times and extension  has been requested| YES |  Integer | An extension may only be requested once |
                            
    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Invalid Request      |Invalid Request| Invalid dispatch request|| 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The resource is not allowed by the the current user| Since drivers cannot accept view or accept offers, drivers  also cannot request more time to accept job offers|  
|404       | No Jobs Found    |             |       |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
   
###Request More Time to Accept [POST]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
                "responseTimeExtCount" : 1
            }


## 5.7 Get Dispatch Assignment [/dispatches/{dispatchRequestNumber}/assignedDriver]

###Description
The "Get Dispatch Assignment" API will allow users to get the details of a driver that is assigned to a particular job 
identified bydispatchRequestNumber. This API will allow users to see information available in the assignedDriver
business object.

###Sample Request URL

/dispatches/329345447/assignedDriver

###Response JSON

|Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:-----------|:-----------|:----|:-------------|
| assignedDriver  |             |YES          |Integer|                  
                            
    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Invalid Request      |INVALID REQUEST| Dispatch request id must be non-zero || 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|Driver’s are not allowed to see assigned drivers||  
|403       |Forbidden         |FORBIDDEN_RESOURCE|Another dispatcher refused/accepted the job|No extension is allowed as job is already accepted/refused|
|404       |Driver Not Found |             |   Driver not assigned to this job.   |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
   
###Get Dispatch Assignment [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
   

+ Response 200 (application/json)

    + Body
            
                {
                "driverId": 309542,
                "name": "tom123 boy",
                "status": "10",
                "equipment": {
                "vehicleNickname": "LightDuty Lifter",
                "equipmentPictureUrl": null,
                "lastUpdatedAt": "0001-01-01T00:00:00",
                "addressId": 1,
                "type": "Light Duty Flatbed",
                "equipmentId": "LDF"
                },
                "currentLocation": {
                "address1": null,
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": null,
                "poi1": null,
                "poi2": null,
                "state": null,
                "postalCode": null,
                "lat": 0,
                "lng": 0
                },
                "gpsTracking": true,
                "profilePictureUrl": null,
                "smartPhone": true,
                "cellPhone": "201-450-9999",
                "officePhone": "201-450-6754",
                "officeEmail": "tom123@gmail.com",
                "disablementLocation": {
                "contactInfo": null,
                "dropInstructions": null,
                "garageClearanceHeight": null,
                "garageLevel": null,
                "isDriverWithVehicle": false,
                "nightDropOff": false,
                "parked": false,
                "address1": "22147LeiropDr",
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": "Richmond",
                "poi1": null,
                "poi2": null,
                "state": "TX",
                "postalCode": "77407",
                "lat": 29.68697143715451,
                "lng": -95.7644752123639
                },
                "serviceType": null,
                "username": "tom123",
                "onDuty": false,
                "profileLastUpdatedAt": "0001-01-01T00: 00: 00"
                }

## 5.8 Assign Driver [/dispatches/{id}/assignedDriver]

###Description
The "Assign Driver" API will allow a dispatcher to assign a driver to a certain job. Once the Driver is assigned to a dispatch, 
the dispatch will be shown in "Assigned" status.

###Sample Request URL
/dispatches/329345447/assignedDriver

###Request JSON

|Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:-----------|:-----------|:----|:-------------|
| driverId       |             |YES          |Integer|          

###Sample Request

200 OK

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Bad Request      |REQUEST_PARAMETER_MISSING| Dispatch Request No is not correct Format or Invalid||
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN|Driver’s are not allowed to see assigned drivers||  
|403       |Forbidden         |FORBIDDEN|Cancellation requested for this job, cannot update it now|
|400       |Bad Request      |REQUEST_PARAMETER_MISSING|
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


###Assign Driver [PUT]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "driverId" : "132454"
            }
   

+ Response 200 ()

## 5.9 Cancel a Dispatch [/dispatches/{id}/cancel]

###Description

The "Cancel a Dispatch" API, will allow drivers and dispatchers to cancel a dispatch. The cancellation status codes are 
documented below based on the cancellation reason. Once a job has been cancelled, the driver that worked on that job 
and the dispatcher that assigned that job will receive a push notification. Also, these statuses will trigger Cancellation 
data pops in One Road that will require further action on behalf of the One Road CSR working on that dispatch.

###Sample Request URL
/dispatches/329345447/cancel

|Status Code  | Status Description | Reason Code | Reason Description | 
|:---------------|:-----------|:-----------|:----|
|70       |SP Cancel             |201          |SP CANCEL - Prior job delayed|
|70       |SP Cancel             |202          |SP CANCEL - Traffic/service vehicle problem |
|70       |SP Cancel             |203          |SP CANCEL - Out of area|
|70       |SP Cancel             |204          |SP CANCEL - Another job priority |
|70       |SP Cancel             |205          |SP CANCEL - No reason given|
|80       |Customer Cancel       |101          |CUSTOMER - CANCEL - FOUND ALTERNATE SOLUTION|
|80       |Customer Cancel       |102          |CUSTOMER - CANCEL - PROBLEM SELF-CORRECTED|
|80       |Customer Cancel       |103          |CUSTOMER - CANCEL – CHANGE MIND|
|80       |Customer Cancel       |210         |GOA REQUEST -CUSTOMER CANCEL (AFTER DEADLINE)|
|80       |Customer Cancel       |3005          |SP - GOA REQUEST -CUSTOMER CANCEL (AFTER DEADLINE)|
|90       |Vehicle could not be found        |207         |GOA REQUEST - WRONG LOCATION GIVEN|
|90       |Vehicle could not be found        |206         |GOA REQUEST - CUSTOMER NOT WITH VEHICLE|
|95       |Customer not with vehicle         |206         |GOA REQUEST - CUSTOMER NOT WITH VEHICLE|
|99       |Service attempt failed            |208         |GOA REQUEST - INCORRECT SERVICE|
|99       |Service attempt failed            |209         |GOA REQUEST - INCORRECT EQUIPMENT|
|99       |Service attempt failed            |214        |SP - UNSUCCESSFUL -  WRONG EQUIPMENT|
|99       |Service attempt failed            |215       |SP - UNSUCCESSFUL - JUMP DID NOT WORK|
|99       |Service attempt failed            |216         |SP - UNSUCCESSFUL - WRONG SERVICE|
|99       |Service attempt failed            |217         |SP - UNSUCCESSFUL - NEED ADDITIONAL EQUIPMENT|
|99       |Service attempt failed            |3003         |SP - GOA REQUEST - INCORRECT SERVICE|
|99       |Service attempt failed            |3004         |SP - GOA REQUEST - INCORRECT EQUIPMENT|
|99       |Service attempt failed            |0         |GOA REQUEST - INCORRECT SERVICE|

###Sample Request

200 OK


###Request JSON

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:-----------|:-----------|:----|:-------------|
|statusCode       |The cancelation status type             |YES          |String|
|reasonCode       |The reason for the cancelation          |YES          |Integer|                  

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:---------|:-------|:--------|
|400       |Bad Request      |REQUEST_PARAMETER_MISSING|
|401       |Unauthorized     |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |Not Found        |NOT FOUND|Required a valid profile|Valid profile not found|  
|500       |Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

###Cancel a Dispatch [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "statusCode" : "70",
                "reasonCode" : 201
            }
   

+ Response 200 ()

## 5.10,5.11 Add/Get Signature [/dispatches/{dispatchRequestNumber}/signatures]

## 5.10 Add a Signature

###Description

The Signature API will allow drivers and dispatchers to save multiple signatures per PO.
This API will allow users to collect the location, name of the signee, signeetype, signature reason and/or signature location.

The following data can be collected by this API:

Signature Capture Location:

- Disablement Site or Pick-Up location
- Tow Location

Name of Signee:

Signee Type:
- Vehicle Owner/Driver
- Employee
    
Signature Reason:

- Pre-existing Damages
- Unattended Tow
- Job Complete
- Vehicle & Keys Received
    
Signature Location:

- Geo-Confirm and Save
    

###Sample Request URL

/dispatches/329345447/signatures

###Request Header    

|HeaderName |Description |Is Required |Expected Value| 
|:----------|:---------- |:---------- |:-------------| 
|Content-Type |Indicates the type of the content being posted |YES |:multipart/form-data; boundary=AaB03x| 
|Content-Length |Indicates the length of the content |YES |This is a dynamic value which depends  on the size of the file being uploaded (from the first AaB03x down, including the file data)| 

###Request Schema 

|Schema Property |Description |Is Required |Type |Business Rules |
|:---------------|:-----------|:-----------|:----|:--------------| 
|signeeName |Represents the name of the person who is signning |YES |String| 
|signeeType |Indicates the code for the type of signee|YES |Enumeration |Please refer to SigneeType enumeration API for possible values| 
|locationType|Indicates the code for the type of the location at which signature is being captured|YES|Enumeration|Please refer to locationType lookup API for possible values| 
|signatureReason|Indicates the code for the reason why a signature is being captured |YES |Enumeration |Please refer to signatureReason lookup API for possible values|  
|Latitude |Indicates the latitude of the location at which signature is being captured|YES |Double| 
|longitude|Indicates the longitude of the location at which signature is being captured|YES|Double| 
|dispatchStatusCode|Represents the code state of the dispatch at which signature is being captured|YES |String |Please refer to Dispatch Status API for valid status codes| 
|signature |Represents the binary representation of the captured signature|  NO |Byte[] |This is optional and| 

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
| signatureId    |ID of the newly created signature|YES|Integer|                  
                    
###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING      |Request Validation failed/Parameter missing.|One or more invalid parameters we passed.  See the innerErrors collection for a list of invalid parameters.|
|401       |invalid_token     |oauth.v2.InvalidAccessToken: Invalid access token|A valid OAuth token was not provided.|
|415       | Unsupported Media Type   |
|500       |UNKNOWN     |Unknown Error|An unknown error occurred at the server|
    
## 5.11 Get Signatures

###Description

The"Get Signatures" API will allow drivers and dispatchers to retrieve the list of signatures associated with a certain PO.
This API will render all the information associated with the Signature feature. The details are documented in the "Add a Signature" API.

###Sample Request URL

/dispatches/329345447/signatures

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:----------- |:----------- |:---- |:-------------|
| Array of signatures| Represents the signatures captured to that point. Each array item  represents a signature|YES| Signature[]|    

  
###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:------- |:--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|404       |SIGNATURES_NOT_FOUND|No signatures found| This is returned if a dispatch has no signatures|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

###Add a Signature [POST]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
    + Body
    
            --AaB03x 
            
            content-disposition: form-data; name="signeeName" 
            
            {signeeName} 
            
            --AaB03x 
            
            content-disposition: form-data; name="signeeType" 
            
            {signeeType} 
            
            --AaB03x 
            
            content-disposition: form-data; name="locationType" 
            
            {locationType}
            
            --AaB03x 
            
            content-disposition: form-data; name="signatureReason" 
            
            {signatureReason} 
            
            --AaB03x 
            
            content-disposition: form-data; name="latitude" {latitude} 
            
            --AaB03x 
            
            content-disposition: form-data; name="longitude" {longitude}
            
            --AaB03x 
            
            content-disposition: form-data; name="dispatchSatusCode" {dispatchStatusCode} 
            
            --AaB03x 
            
            content-disposition: form-data; name="signature"; filename="{signatureFileName}" 
            
            Content-Type: {mimeType} {binaryData} 
            
            --AaB03x--
               

+ Response 200 (application/json)

    + Body
            
            {
                "signatureId" : "1171"
            }


###Get Signatures [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            [ 
            { 
                "signatureId":"532523", 
                "signeeName":"Smith", 
                "signeeType":"1", 
                "signatureReason": "1", 
                "latitude":72.3434 , 
                "longitude":-182.43543, 
                "dispatchStatusCode":"20", 
                "capturedDateTime":"12/21/2012 11:28 AM", 
                "signatureUrl":"/dispatches/354235235/signatures/234234/picture" 
            }, 
            { 
                "signatureId":"532524", 
                "signeeName":"John", 
                "signeeType":"2", 
                "signatureReason": "2", 
                "latitude":80.3434 , 
                "longitude":-197.43543, 
                "capturedDateTime":"12/21/2012 11:55 AM", 
                "signatureUrl":"/dispatches/354235235/signatures/23352/picture" 
            }
            ] 

## 5.12 Get a Signature [/dispatches/{dispatchRequestNumber}/signatures/{signatureId}]

###Description

The "Get a signature" API will allow drivers and dispatchers to retrieve a signature captured for a given dispatch. 
The signature will be identified by Signature ID and will be associated with a dispatch identified by dispatchRequestNumber.

###Sample Request URL

/dispatches/329345447/signatures/532523

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|  signatures    | Represents the signatures identified by signatureId|YES| Signature|    


###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:---------|:-------|:-------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|404       |SIGNATURES_NOT_FOUND|No signatures found| This is returned if a dispatch has no signatures|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


###Get Signatures[GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            {
                "signatureId":"532523",
                "signeeName":"Smith",
                "signeeType":"1",
                "signatureReason": "1",
                "latitude":72.3434 ,
                "longitude":-182.43543,
                "capturedDateTime":"12/21/2012 11:28 AM",
                "signatureUrl":"/dispatches/354235235/signatures/234234/picturepicture"
            }

## 5.13 Get Dispatch Summary [/dispatchesSummary]

###Description

The "Get Dispatch History Sumary"API provides aggregated information of dispatch count by date for last 5 days. Information provided depends on the role of the user as a dispatcher gets to see more information compared to information a driver can see

###Sample Request URL

/dispatchesSummary

###Request Body

N/A

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|  dispatchSummary| Represents Dispatch Summary Info aggregated by date for last 5 days|YES| DispatchSummary[]| 

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|403       |Forbidden| Unauthorized || 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

###Get Dispatch Summary [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            [ 
                { 
                "date" : "11/11/2013", 
                "day" : "Monday", 
                "totalDispatchCount":26, 
                " dispatchCountBreakdown": 
                    [ 
                    { 
                        "service":
                        { 
                            "code" : "1", 
                            "description": "Door Unlock" 
                        }, 
                        "count": 5 
                    }, 
                    { 
                        "service":
                        { 
                            "code" : "4", 
                            "description": "Flat Tire" 
                        }, 
                        "count": 5 
                    }, 
                    { 
                    "service":
                    { 
                        "code" : "8", 
                        "description": "Tow" 
                    }, 
                    "count": 15 
                    } 
                    ] 
                }, 
                { 
                "date" : "11/12/2013", 
                "day" : "Tuesday", 
                "totalDispatchCount":10, 
                "dispatchCountBreakdown": 
                [ 
                    { 
                    "service":
                    { 
                        "code" : "8", 
                        "description": "Tow" 
                    }, 
                    "count": 10 
                    } 
                ] 
                }, 
                { 
                "date" : "11/13/2013", 
                "day" : "Wednesday", 
                "totalDispatchCount":5, 
                "dispatchCountBreakdown": 
                [
                { 
                    "service":
                    { 
                        "code" : "1", 
                        "description": "Door Unlock" 
                    }, 
                    "count": 5 
                } 
                ] 
                }, 
                { 
                "date" : "11/14/2013", 
                "day" : "Thursday", 
                "totalDispatchCount":20, 
                "dispatchCountBreakdown": 
                [ 
                    { 
                    "service":
                    { 
                        "code" : "1", 
                        "description": "Door Unlock" 
                    }, 
                    "count": 5 
                    }, 
                    { 
                    "service":
                    { 
                        "code" : "10", 
                        "description": "Flat Tire" 
                    }, 
                    "count": 5 
                    }, 
                    { 
                    "service":
                    { 
                        "code" : "8", 
                        "description": "Tow" 
                    }, 
                    "count": 15 
                    } 
                ] 
                }, 
                { 
                "date" : "11/15/2013", 
                "day" : "Friday", 
                "totalDispatchCount":2, 
                " dispatchCountBreakdown": 
                [ { 
                "service":
                { 
                    "code" : "4", 
                    "description": "Flat Tire" 
                }, 
                "count": 2 
                } 
                ] 
                } 
            ] 


## 5.14,5.15 Add/Get Dispatch Document [/dispatches/{dispatchRequestNumber}/documents]

## 5.14 Add a Dispatch Document
###Description

The documents API will allow drivers and dispatchers to save multiple documents per PO.

The following data can be collected by this API:

DocumentType:

- Disablement Site or Pick-Up location
- Tow Location

###Sample Request URL

/dispatches/329345447/documents

    
###Request Header    

        
|HeaderName |Description |Is Required |Expected Value| 
|:----------|:-----------|:-----------|:-------------| 
|Content-Type|Indicates the type of the content being posted|YES |:multipart/form-data; boundary=AaB03x| 
|Content-Length |Indicates the length of the content |YES |This is a dynamic value which depends  on the size of the file being uploaded (from the first AaB03x down, including the file data)| 
                                                                                                     
###Request Schema 

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|  documentType  | Indicates the code  for the type of document being uploaded |YES| Enumeration| Please refer to   DocumentType enumeration API for possible values|

   
###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|  documentId    | ID of the newly created document|YES| String| 

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

   
## 5.15 Get Dispatch Documents

###Description

The" Get Documents" API will allow drivers and dispatchers to retrieve the list of documents associated with a certain PO.

###Sample Request URL

/dispatches/329345447/documents

###Request Body

N/A

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|Array of documents| Represents the documents captured to that point. Each array item represents a single document|YES| Document[]|

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|404       |SIGNATURES_NOT_FOUND|No signatures found| This is returned if a dispatch has no signatures|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

                               

###Add a Dispatch Document [POST]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            --AaB03x 
            
            content-disposition: form-data; name="documentType"
            
            {documentType} 
            
            content-disposition: form-data; name="document"; filename="{documentName}" 
            Content-Type: {mimeType} {binaryData} 
            
            --AaB03x--
               

+ Response 200 (application/json)

    + Body
            
            {
                "documentId" : "1171",
            }


###Get Dispatch Documents [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            [
                {
                    "documentId":"532523",
                    "documentName":"Smith",
                    "documentType":"1",
                    "lastUpdatedDateTime ":"12/21/2013 11:28 AM",
                    "documentUrl":"/dispatches/354235235/documents/532523"
                },
                {
                    "documentId":"532524",
                    "documentName":"Smith",
                    "documentType":"2",
                    "lastUpdatedDateTime":"12/21/2013 11:28 AM",
                    "documentUrl":"/dispatches/354235235/documents/532524"
                }
            ] 
            
            
## 5.16,5.17 Get/Delete Dispatch Document [/dispatches/{dispatchRequestNumber}/documents/{documentId}]

## 5.16 Get a Dispatch Document
###Description

The "Get a Dispatch Document" API will allow drivers and dispatchers to retrieve a document captured for a given 
dispatch. The document will be identified by documentID and will be associated with a dispatch identified by 
dispatchRequestNumber.

###Sample Request URL

/dispatches/329345447/documents/532523

###Request Body

N/A

###Reponse Schema

Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:--------------|
|Document| Represents the document identified by documentId|YES| Document|

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|404       |SIGNATURES_NOT_FOUND|No signatures found| This is returned if a dispatch has no signatures|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


## 5.17 Delete a Dispatch Document

###Description

Removes the dispatch document uploaded earlier.

###Sample Request URL

/dispatches/4364646/documents/3456346

###Request Parameters

N/A

###Request Body

N/A

###Sample Request


###Response Body

N/A


###Sample Response

HTTP 200 OK

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:----------|:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed|One or more invalid parameters we passed. See the innerErrors collection  for a list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |DISPATCH_NOT_FOUND|No dispatch found|This is returned if the dispatch request# provided in the resourceURI could not   be found|
|404       |SIGNATURES_NOT_FOUND|No signatures found| This is returned if a dispatch has no signatures|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

                               
###Get a Dispatch Document [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {   
                "documentId":"532524",
                "documentName":"Smith",
                "documentType":"2",
                "lastUpdatedDateTime ":"12/21/2013 11:28 AM",
                "documentUrl":"/dispatches/354235235/documents/532524"
            }

###Delete a Dispatch Document [DELETE]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 ()

## 5.19 Extend ETA [/dispatches/{id}?action=extendedETA]

###Description

The "Extend ETA" API allows a Service Provider to extend the original ETA provided.Verb was PUT and POST. POST will be deprecated eventually.

###Sample Request URL

/dispatches/329345447?action=extendETA

###Request Schema


Schema Property  | Description | Is Required | Type |Business Rules| 
|:---------------|:------------|:------------|:-----|:-------------|
|delayReason|Represents the reason  for delay| YES|Enum| Please refer to DelayReasonTypes Enum for possible values|
|etaExtensionInMinutes|Represents the Amount of time(in mins) to be added to original ETA| YES|Integer

###Sample Request
N/A
    
###Response Schema
N/A

###Sample Response
HTTP 200 OK    

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:--------|
|400       |Invalid Request  |Invalid Request| Dispatch Request number/Revised ETA is required|| 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The resource is not allowed by the current user|Since drivers cannot accept view or accept offers,drivers also cannot request more time to accept job offers|  
|404       | No Jobs Found    |             |       |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

### Extend ETA [PUT]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 ()


## Group 6 Dispatch Status API

All resources in the Dispatch Status API require a valid access token.  See the Security API in this document for more information on authenticating and using access tokens.

## 6.1 Valid Status Codes [/enumerations/dispatchStatus]

Dispatch Status Business Rules
Agero sends new job offers to Service Providers. There are 3 dispositions for a new job: "New", "Work in Progress", and "Closed".

###"New" Disposition captures the following statuses
* New – when the dispatcher receives a new job offer
* Expired –when the new job offer has not been accepted or rejected by the Service Provider
* Pending – when the dispatcher requested an additional one minute before accepting or refusing
* Refused –when the dispatcher refuses the new job offer
* Rejected – when Agero rejects the ETA submitted by the dispatcher
* Unassigned –when the ETA submitted by the Dispatcher has been accepted but the job has not been assigned to a driver

###"Work in Progress" Disposition captures the following statuses
* Assigned –when a Dispatcher assigns a job to a driver
* In Route – when the Driver is en route to the disablement location
* On Scene,
* Tow in Progress(for tow jobs)
* Destination Arrival
* Job Cleared.

###"Closed" Disposition captures the following statuses
* Cancel – SP Cancel
* Cancel – Customer Cancel
* Unsuccessful – No Vehicle
* Unsuccessful – No Customer
* Service Attempt Failed
    
The user is permitted to skip a status-node in the above flow.

If a status-node is skipped, the user is not permitted to later add the timestamp (because timestamps would then be out of order).

A job can be set to Cancellation or Unsuccessful Service at any time.

User will clarify why the job resulted in a Cancellation or an Unsuccessful Service.

Once a job reaches an end node (any status-node in the "Closed" disposition), then no further updates are permitted.

|Status Code |Description  | 
|:-----------|:----------- | 
|2           |New |Readonly| 
|4           |PO Needed| Readonly| 
|3           |Pending |Readonly| 
|4           |Expired| Readonly| 
|5           |Rejected| Readonly| 
|6           |Refused |Readonly| 
|0           |Unassigned| 
|10          |Assigned| 
|20          |In Route| 
|30          |On Scene| 
|40          |Tow in Progress| 
|50          |Destination Arrival| 
|60          |Job Cleared |Readonly|
|70          |Cancel - SP Cancel| 
|80          |Cancel - Customer Cancel| 
|90          |Unsuccessful - No Vehicle| 
|95          |Unsuccessful - No Customer| 
|99          |Service Attempt Failed| 

  
###Valid Status Codes [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            {
            "totalCount": 22,
            "offSet": 0,
            "limit": 22,
            "results": [
            {
            "code": "1",
            "Description": "New",
            "possibleReasons": []
            },
            {
            "code": "2",
            "Description": "PO Needed",
            "possibleReasons": []
            },
            {
            "code": "3",
            "Description": "Phone Call Request",
            "possibleReasons": []
            },
            {
            "code": "4",
            "Description": "Expired Request",
            "possibleReasons": []
            },
            {
            "code": "5",
            "Description": "ETA Rejected by CCAS",
            "possibleReasons": []
            },
            {
            "code": "8",
            "Description": "GOA Issued by CCAS",
            "possibleReasons": []
            },
            {
            "code": "6",
            "Description": "Refused by SP",
            "possibleReasons": []
            },
            {
            "code": "7",
            "Description": "CCAS Cancelled",
            "possibleReasons": []
            },
            {
            "code": "0",
            "Description": "Unassigned",
            "possibleReasons": []
            },
            {
            "code": "10",
            "Description": "Assigned",
            "possibleReasons": []
            },
            {
            "code": "20",
            "Description": "In Route",
            "possibleReasons": []
            },
            {
            "code": "25",
            "Description": "Driver 10 minutes away",
            "possibleReasons": []
            },
            {
            "code": "30",
            "Description": "On Scene",
            "possibleReasons": []
            },
            {
            "code": "40",
            "Description": "Tow In Progress",
            "possibleReasons": []
            },
            {
            "code": "50",
            "Description": "Arrival at Destination",
            "possibleReasons": []
            },
            {
            "code": "60",
            "Description": "Job Fulfilled",
            "possibleReasons": []
            },
            {
            "code": "70",
            "Description": "SP Cancellation",
            "possibleReasons": [
            {
            "code": "201",
            "Description": "SP CANCEL - Prior job delayed"
            },
            {
            "code": "202",
            "Description": "SP CANCEL - Traffic/service vehicle problem"
            },
            {
            "code": "203",
            "Description": "SP CANCEL - Out of area"
            },
            {
            "code": "204",
            "Description": "SP CANCEL - Another job priority"
            },
            {
            "code": "205",
            "Description": "SP CANCEL - No reason given"
            }
            ]
            },
            {
            "code": "80",
            "Description": "Customer Cancellation",
            "possibleReasons": [
            {
            "code": "101",
            "Description": "CUSTOMER - CANCEL - FOUND ALTERNATE SOLUTION"
            },
            {
            "code": "102",
            "Description": "CUSTOMER - CANCEL - PROBLEM SELF-CORRECTED"
            },
            {
            "code": "103",
            "Description": "CUSTOMER - CANCEL - CHANGED MIND"
            },
            {
            "code": "210",
            "Description": "GOA REQUEST -CUSTOMER CANCEL (AFTER DEADLINE)"
            },
            {
            "code": "3005",
            "Description": "SP - GOA REQUEST -CUSTOMER CANCEL (AFTER DEADLINE)"
            }
            ]
            },
            {
            "code": "90",
            "Description": "Could not locate vehicle",
            "possibleReasons": [
            {
            "code": "207",
            "Description": "GOA REQUEST - WRONG LOCATION GIVEN"
            },
            {
            "code": "3002",
            "Description": "SP - GOA REQUEST - WRONG LOCATION GIVEN"
            }
            ]
            },
            {
            "code": "95",
            "Description": "Customer not with vehicle",
            "possibleReasons": [
            {
            "code": "206",
            "Description": "GOA REQUEST - CUSTOMER NOT WITH VEHICLE"
            },
            {
            "code": "3001",
            "Description": "SP - GOA REQUEST - CUSTOMER NOT WITH VEHICLE"
            }
            ]
            },
            {
            "code": "99",
            "Description": "Service Attempt Failed",
            "possibleReasons": [
            {
            "code": "208",
            "Description": "GOA REQUEST - INCORRECT SERVICE"
            },
            {
            "code": "209",
            "Description": "GOA REQUEST - INCORRECT EQUIPMENT"
            },
            {
            "code": "214",
            "Description": "SP - UNSUCCESSFUL - WRONG EQUIPMENT"
            },
            {
            "code": "215",
            "Description": "SP - UNSUCCESSFUL - JUMP DID NOT WORK"
            },
            {
            "code": "216",
            "Description": "SP - UNSUCCESSFUL - WRONG SERVICE"
            },
            {
            "code": "217",
            "Description": "SP - UNSUCCESSFUL - NEED ADDITIONAL EQUIPMENT"
            },
            {
            "code": "3003",
            "Description": "SP - GOA REQUEST - INCORRECT SERVICE"
            },
            {
            "code": "3004",
            "Description": "SP - GOA REQUEST - INCORRECT EQUIPMENT"
            }
            ]
            },
            {
            "code": "15",
            "Description": "",
            "possibleReasons": []
            }
            ],
            "links": null
            }



## 6.2,6.4 Get/Change Current Status [/dispatches/{dispatchRequestNumber}/status]

## 6.2 Get Current Status

###Description

The "Get Current Status " API will allow users to see the current status of a dispatch. In addition to the status codes, 
users will be able to see information related to the ETA , coordinates of the driver or dispatcher working on a job, 
coordinates of the disablement location and coordinates of the "tow to" location.

###Sample Request URL

/dispatches/3293346787/status

###Request URI Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|dispatchRequestNumber|Dispatch Request Number from Agero  |YES      |String| 

### Response Json

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Status|Represents the status of the job  |YES      |DispatchStatus| 

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:--------- |:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The resource is not allowed by the current user| Drivers view or refuse job offers|  
|404       | Job Not Found   |             | Job Current Status not found      |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
    
 
## 6.4 Change Status

###Description

The Change Status API will allow dispatchers and drivers to update the current status for the dispatch along with the 
location coordinates if a GPS feature is available and enabled.

###Request URI Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|dispatchRequestNumber|Dispatch Request Number from Agero  |YES      |String| 

###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Status|Represents the status of the job|YES      |DispatchStatus| 

###Request JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Status|Represents the status of the job|YES      |DispatchStatus| 
  
###Sample Request URL

/dispatches/329345447/status

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|400      |Bad Request      |INVALID_TOKEN| Dispatch Status/status code is required|| 
|400       |Bad Request      |INVALID_TOKEN| A reason must be provided if the status is refused|| 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|Cancellation requested for this job, cannot update it now| Drivers view or refuse job offers|
|404       | Job Not Found   |           |Job Not Found. Please check dispatch request number      |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
    
 
###Get Current Status [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
                "code": "70",
                "description": "CANCEL,SPCANCEL",
                "eta": 0,
                "reason": "SPCANCEL-Priorjobdelayed",
                "reasonCode": 201,
                "source": "Beacon-Proxy-ApphPVV9kjE686bMdRLJwoxNlEZ3jGUtkJl",
                "extJobId": "672239854",
                "latitude": 0,
                "longitude": 0,
                "statusTime": "2015-01-22T17: 54: 16Z",
                "driverId": 309542,
                "reportedBy": "Agero",
                "event": null
             }


###Change Status [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "code" : "20",
                "eta" : "30",
                "latitude" : 40.1234,
                "longitude" : -70.1234,
                "source" : "TowSoft",
                "extJobId" : "789239",
                "statusTime" : "2013-01-31 08:00 AM"
            }
                        
+ Response 200 (application/json)

    + Body
    
            {
            "code": "70",
            "description": "SP Cancellation",
            "eta": 0,
            "reason": null,
            "reasonCode": 0,
            "source": "Beacon-Proxy-App hPVV9kjE686bMdRLJwoxNlEZ3jGUtkJl",
            "extJobId": "672239854",
            "latitude": 0,
            "longitude": 0,
            "statusTime": "2015-01-22T17: 54:35Z",
            "driverId": 0,
            "reportedBy": "Driver",
            "event": null
            }

            
## 6.3 Get Status History [/dispatches/{dispatchRequestNumber}/status/history]

###Description

The "Get Status History" API will allow dispatchers and drivers to see all jobs that are in an Inactive status including Job 
Cleared, Expired, Refused, Rejected, Cancelled, and Unsuccessful.

The jobs listed on the selected History day will include the following -
   
- Service name
- Driver's Name (when Job Cleared, Cancelled - if post driver assignment, and Unsuccessful)
- Equipment- Disablement Address
- PO# (when Job Cleared, Cancelled - if post driver assignment, and Unsuccessful)
- Color/year/make/model,

###Request URI Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|dispatchRequestNumber|Dispatch Request Number from Agero  |YES      |String| 

   
###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
||Represents an array statuses that were changed on the job|YES      |DispatchStatus[]| 

   
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|Cancellation requested for this job, cannot update it now| Drivers view or refuse job offers|  
|404       | Job Not Found    |             | Job Status History not found   |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 
    

###Get Status History [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)
   
  Content-Length: 96

    + Body
    
                {
                "statusHistory": [
                {
                    "code": "2",
                    "description": "New",
                    "eta": 0,
                    "reason": null,
                    "reasonCode": 0,
                    "source": null,
                    "extJobId": "672239854",
                    "latitude": 0,
                    "longitude": 0,
                    "statusTime": "2015-01-22T17: 52:55Z",
                    "driverId": 0,
                    "reportedBy": "Agero",
                    "event": null
                },
                {
                    "code": "10",
                    "description": "Assigned",
                    "eta": 0,
                    "reason": null,
                    "reasonCode": 0,
                    "source": "Beacon-Proxy-App hPVV9kjE686bMdRLJwoxNlEZ3jGUtkJl",
                    "extJobId": "672239854",
                    "latitude": 0,
                    "longitude": 0,
                    "statusTime": "2015-01-22T17: 54:04Z",
                    "driverId": 309542,
                    "reportedBy": "Dispatching",
                    "event": null
                },
                {
                    "code": "70",
                    "description": "SP Cancellation",
                    "eta": 0,
                    "reason": null,
                    "reasonCode": 0,
                    "source": "Beacon-Proxy-App hPVV9kjE686bMdRLJwoxNlEZ3jGUtkJl",
                    "extJobId": "672239854",
                    "latitude": 0,
                    "longitude": 0,
                    "statusTime": "2015-01-22T17: 54:35Z",
                    "driverId": 0,
                    "reportedBy": "Driver",
                    "event": null
                }
                ]
                }
            

## 6.5 Undo Current Status [/dispatches/{dispatchRequestNumber}/status/undo]

###Description
The Undo current status API will allow dispatchers and drivers to revert the current status for the dispatch . This is to 
be used if dispatch status was changed accidentally

###Sample Request URL

/dispatches/329345447/status/undo

###Request URI Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|dispatchRequestNumber|Dispatch Request Number from Agero  |YES      |String| 

###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Status|Represents the status of the job|YES      |DispatchStatus| 

  
    
###Request JSON

N/A

###Sample Request Body

N/A

###Sample Request

POST http://agero-test.apigee.net/v1/id/dispatches/329345447/status/undo
HTTP/1.1
Host: agero-test.apigee.net
Content-Type: application/json
Content-Length: 96
Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|400       |Bad Request      |Invalid Request|Dispatch Request Number/Revised ETA is required|| 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden         |FORBIDDEN_RESOURCE|The resource is not allowed by the current user| Drivers view or refuse job offers|  
|404       |Job Not Found   |             |       |The requested job record doesn’t exist| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|
                                                                                                            

###Undo Current Status [POST]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
            "code": "70",
            "description": "SP Cancellation",
            "eta": 0,
            "reason": null,
            "reasonCode": 0,
            "source": "Beacon-Proxy-App hPVV9kjE686bMdRLJwoxNlEZ3jGUtkJl",
            "extJobId": "672239854",
            "latitude": 0,
            "longitude": 0,
            "statusTime": "2015-01-22T17: 54:35Z",
            "driverId": 0,
            "reportedBy": "Driver",
            "event": null
            }

# Group 7 Vendor API

## 7.1 Get Vendor Equipment List [/vendors/{vendorId}/equipment?accessMode=anonymous]

###Description

The "Get Vendor Equipment List "API allows drivers and dispatchers to view the equipment list associated
with vendor facilities . Pagination is supported by this resource.

Ex. vendor 101354 - Infiniti of Memphis - is a mobile mechanic and has only one facility and only one equipment
type assigned 'Infinity Mobile Mechanic'. Only this equipment should appear in the dispatcher and driver's profile 
equipment list.

However, vendor 06668 - Affordable Towing - has 10 facility profiles but only 4 actual addresses.
The equipment lists for each of the 10 facilities is combined, and filtered to remove non-driveable equipment, and 

filtered to include a single instance of equipment.

The Equipment will return some of the following values based on the vendor type:

    5th wheel transport
    Heavy Duty Lowboy/flatbed
    Heavy Duty Roadservice
    Heavy Duty Tire Service
    Heavy Duty Undereach
    Heavy Duty Wrecker
    Light Duty Flatbed
    Light Duty Wheelift
    Lockout Roadservice
    Medium Duty Flatbed
    Medium Duty Roadservice
    Medium Duty Tire Service
    Medium Duty Undereach
    Medium Duty Wrecker
    Minor Roadservice
    Motorcycle Pickup
    Primary Towing
    Secondary Towing
    Transport Tow

###Sample Request URL

/vendors/12345/equipment?[accessMode=anonymous]

###Request Parameters 

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|accessMode |Represents if this resource is being accessed in anonymous mode |NO |QueryParama |If present, Authorization Header has to be the consumerkey of the app| 

###Response JSON 

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|location        | Location of the equipment|Readonly          |String| 
|equipmentId     | represents the unique code of the  equipment|YES          |String| 
|addressId       |Address Id of the  Facility where the equipment is registered with Agero|YES          |Integer| 
|type       |Equipment Type|Readonly          |String| 

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | No Equipment found |             |       |Equipment did not exsist in the  database for the current request| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|
    
###Get Vendor Equipment List [GET]

+ Request ()

    + Header

            Authorization: 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
+ Response 200 (application/json)

    + Body

            {
                "totalCount": 11,
                "offSet": 0,
                "limit": 10,
                "results": [
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Light Duty Flatbed",
                "equipmentId": "LDF"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Light Duty Wheel Lift",
                "equipmentId": "LDWL"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Lockout Roadservice",
                "equipmentId": "LRS"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Medium Duty Flatbed",
                "equipmentId": "MDF"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Medium Duty Roadservice",
                "equipmentId": "MDRS"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Medium Duty Tire Service",
                201
                "equipmentId": "MDTS"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Medium Duty Undereach",
                "equipmentId": "MDUR"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Medium Duty Wrecker",
                "equipmentId": "MDW"
                },
                {
                "location": "UNIQUE ROADSIDE, LLC",
                "addressId": 1,
                "type": "Minor Roadservice",
                "equipmentId": "MRS"
                },
                {
                "location": "UNIQUE ROADSIDE (ASM)",
                "addressId": 2,
                "type": "Primary Towing",
                "equipmentId": "PAR"
                }
                ],
                "links": null
            }

## 7.2-7.3 Driver Equipment Assignment [/vendors/{vendorId}/drivers/{driverId}/driverEquipment]

## 7.2 Get Driver Equipment Assignment

###Description

The "Get Driver Equipment Assignment" API will retrieve the equipment assigned to certain driver. This API will allow 
client app to display the vehiclename, equipment type and equipment ID.

###Sample Request URL

/vendors/12345/drivers/1/driverEquipment
    
###Response JSON 

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|equipmentId     | represents the  unique code of the  equipment |YES          |String| 
|addressId       | Address Id of the   Facility where the equipment  is registered with Agero|YES          |Integer| 
|type          | Equipment Type    |Readonly |String |
|vehicleNickname             |Name/Number for the assigned equipment |NO|String|
|equipmentPictureUrl| Url for the picture of the    equipment  |NO |URL |
|lastUpdatedAt| Represetns the date and time at which the equipment picture was last updated at| YES |DateTime |READ ONLY |  
  |
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:------- |:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | No Equipment Assigned |             |       | Driver not assigned to a piece of equipment.| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

  
## 7.3 Set Driver Equipment Assignment

###Description

The "Set Driver Equipment Assignment" API will allow drivers and dispatchers to setup their equipment. 
The equipment assignment will associate the vehicle nickname with the equipment ID and address ID.

###Sample Request URL

/vendors/12345/drivers/1/driverEquipment

###Request JSON 

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|equipmentId     | represents the  unique code of the  equipment |YES          |String| 
|addressId       | Address Id of the   Facility where the equipment  is registered with Agero|YES          |Integer| 
|vehicleNickname             |Name/Number for the assigned equipment |NO|String|

                            
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:------- |:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | No Equipment Assigned |             |       | Driver not assigned to a piece of equipment.| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


###Get Driver Equipment Assignment [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
+ Response 200 (application/json)

    + Body

            {
                "vehicleNickname": "red truck",
                "equipmentPictureUrl": "vendors/107231/drivers/268124/driverEquipment/picture",
                "lastUpdatedAt": "2015-01-21T14:10:13",
                "addressId": 1,
                "type": "Minor Roadservice",
                "equipmentId": "MRS"
            }


### Set Driver Equipment Assignment [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "equipmentId": "LDWL",
                 "addressId": 1,
                 "vehicleNickname": "blue truck"
            }

+ Response 200 ()

## 7.4-7.7 Equipment picture [/vendors/{vendorId}/drivers/{driverId}/driverEquipment/picture]

## 7.4 Upload Equipment picture

###Description

The Upload Equipment Picture API allows Drivers and Dispatchers to upload a picture of the equipment for a 
given vendor id and driver id. This functionality is to be used when the first time user is trying to post a picture. Image is 
transferred to server by Multipart/Form data (i.e. passing image data as stream) technique by calling REST API.

###Sample Request URL

/vendors/12345/drivers/1/driverEquipment

###Request Header

|Schema Property |Description   |Is Required   |Expected Value  |
|:---------------|:-------------|:-------------|:---------------| 
|Content-Type    | Indicates the type of  the content being posted |YES|multipart/form-data; boundary=AaB03x| 
| Content-Length | ndicates the length of the content              |YES| This is a dynamic value which depends on the size of the file being uploaded  (from the first AaB03x down, including  the file data)| 
                                                                                       

###Request Body

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|equipmentPicture| Binary representation of the profile picture being uploaded |YES          |Byte[]| 
|Filename        | Indicates the name of the file being uploaded |YES          |String| 

--AaB03x 

  content-disposition: form-data; name="equpmentPicture"; filename="{filename}" Content-Type: {mimetype}
  
 …contents of equipmentpicture.jpg…
 
--AaB03x--

###Response JSON
N/A

###Sample Response
HTTP 201 Resource Created

###Errors 


|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING |Request Validation failed  |One or more invalid parameters we passed See the innerErrors collection  for a list of invalid parameters | 
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       | RESOURCE_EXISTS |A profile exists for  this user| Once a profile pic is created for a user, it cannot be created again. A PUT should be made instead to update the current profile|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

## 7.5 Retrieve Equipment picture

###Description
The Retrieve Equipment Picture API allows drivers and dispatchers to retrieve an existing picture 
of the equipment for a given vendor id and driver id.

###Sample Request URL

GET /vendors/12345/drivers/1/driverEquipment/picture

###Request Body


###Response JSON

Binary representation of the equipment picture


###Sample Response


                            
###Errors 

|HTTP Code |Error Code| Message |Reason  | 
|:---------|:-----------------|:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING |Request Validation failed.| One or more invalid parameters we passed See the innerErrors collection for a list of invalid parameters|
|401      |INVALID_TOKEN      | oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404      |  NO_VENDOR_FOUND  | NO Vendor exists for given vendorId|Returned when no Vendor could not be found for the provided Vendor Id|
|404      |  NO_DRIVER_FOUND|  NO Driver exists for given driverid| Returned when no driver could not be found  for the provided driver Id
|500     | UNKNOWN   |Unknown Error   |An unknown error occurred at the server|

    

## 7.6 Update Equipment picture

###Description

The Update Equipment picture API allows drivers and dispatchers to update a picture of the equipment for a given vendor id 
and driver id. This API can be used only if the equipment picture already exists. The picture is transferred to server by 
Multipart/Form data (i.e. passing picture data as stream) technique by calling REST API.


###Request Header

|Schema Property |Description   |Is Required   |Expected Value  |
|:---------------|:-------------|:-------------|:---------------| 
|Content-Type    | Indicates the type of  the content being posted |YES|multipart/form-data; boundary=AaB03x| 
| Content-Length | ndicates the length of the content              |YES| This is a dynamic value which depends on the size of the file being uploaded  (from the first AaB03x down, including the file data)|
                                                                                         
                                                                                              
###Request Body

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|equipmentPicture| Binary representation of the profile picture being uploaded |YES          |Byte[]| 
|Filename        | Indicates the name of the file being uploaded |YES          |String| 

--AaB03x 

  content-disposition: form-data; name="equpmentPicture"; filename="{filename}" Content-Type: {mimetype}
  
 …contents of equipmentpicture.jpg…
 
--AaB03x--

###Response JSON
N/A

###Sample Response

HTTP 200 Ok

###Errors 

|HTTP Code |Error Code| Message |Reason  | 
|:---------|:-----------------|:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING |Request Validation failed.| One or more invalid parameters we passed See the innerErrors collection for a list of invalid parameters|
|401      | INVALID_TOKEN      | oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404      |  NO_VENDOR_FOUND  | NO Vendor exists for given vendorId|Returned when no Vendor could not be found for the provided Vendor Id|
|404      |  NO_DRIVER_FOUND|  NO Driver exists for given driverid| Returned when no driver could not be found  for the provided driver Id
|404      |NO_RESOURCE_FOUND |   No picture exist       | 
500     | UNKNOWN   |Unknown Error   |An unknown error occurred at the server|

## 7.7 Remove Equipment picture

###Description

The Remove equipment picture API allows drivers and dispatchers to remove the picture of the equipment for a given 
vendor id and driver id.

###Sample Url

/vendors/3355345/drivers/345345/driverEquipment/picture

###Request Body

N/A

###Response Schema
N/A

###Sample Response
HTTP 200OK

###Errors 

|HTTP Code |Error Code| Message |Reason  | 
|:---------|:-----------------|:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING |Request Validation failed.| One or more invalid parameters we passed See the innerErrors collection for a list of invalid parameters|
|401      |INVALID_TOKEN      | oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404      |  NO_VENDOR_FOUND  | NO Vendor exists for given vendorId|Returned when no Vendor could not be found for the provided Vendor Id|
|404      |  NO_DRIVER_FOUND|  NO Driver exists for given driverid| Returned when no driver could not be found  for the provided driver Id
|404      |NO_RESOURCE_FOUND |   No picture exist       | 
500     |UNKNOWN   |Unknown Error   |An unknown error occurred at the server|
       


###Upload Equipment picture [POST]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
    + Body
    
            --AaB03x content-disposition: form-data; name="equpmentPicture"; filename="{filename}" 
            Content-Type: {mimetype}
            
            …contents of equipmentpicture.jpg…
            
            --AaB03x--
            
            
+ Response 201 ()

##Retrieve Equipment picture [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 ()

## Update Equipment picture [PUT]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            --AaB03x content-disposition: form-data; name="equpmentPicture"; filename="{filename}" 
            Content-Type: {mimetype}
            
            …contents of equipmentpicture.jpg…
            
            --AaB03x--
            
            
+ Response 200 ()

##Remove Equipment picture [DELETE]
+ Request ()

    + Header
    
            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 ()

## 7.8 Get List of Drivers [/vendors/{vendorId}/drivers?driverType={driverTypeId}&onDuty={true|false}&responseType={shallow|deep}]

###Description

The "Get a list of Drivers" API allows Dispatchers to get a list of drivers for a specific vendor.driverType parameter is optional and if not provided, all the drivers will be returned. The Dispatcher will be able to see driver information such as the total count of drivers, driver name, equipment assigned to the driver, gps setting and current location of the driver.

Pagination is supported by this resource.


###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|vendorId |Represents the unique tax identification number of the vendor |YES |String|
|driverType| Represents the type of the driver being requested |YES          |DriverType Enum|
|onDuty    |Specified if Driver on Duty   |No|Boolean  |If not provided, all the drivers  will be returned  |
responseType|Represents the level of details needed in response|NO|String|Possible Values:Shallow---returns only the immediate simple child elements like DriverID, Name and Status deep---returns both simple & complex child elements If not provided , default value =shallow|

###Sample Request URL

/vendors/5447/drivers

/vendors/5447/drivers?driverType=2


###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Driverlist|List of Driver locations|YES          |String|
|onDuty    |Represents the availability mode of Driver   |No|Boolean  |If not provided, all the drivers  will be returned  |


###Sample Response
HTTP 201 Resource Created

###Errors 

|HTTP Code |Reason Phrase|Error Code| Message |Reason  | 
|:---------|:-----------------|:--------|:-------|:--------
|401      |Unauthorized       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404      |  No Drivers Found| | NO Driver exists for given driverid| Returned when no driver could not be found  for the provided driver Id
|500     |Server Error      |UNKNOWN|Unknown Error   |An unknown error occurred at the server|
       

### Get List of Drivers [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            { 
                "totalCount": 16,
                "offSet": 0,
                "limit": 2,
                "results": [
                {
                "driverId": 12345,
                "name": null,
                "status": null,
                "equipment": null,
                "currentLocation": {
                "address1": null,
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": null,
                "poi1": null,
                "poi2": null,
                "state": null,
                "postalCode": null,
                "lat": 0,
                "lng": 0
                },
                "gpsTracking": false,
                "profilePictureUrl": "",
                "smartPhone": false,
                "cellPhone": null,
                "officePhone": null,
                "officeEmail": "nancy@agero.com",
                "disablementLocation": null,
                "serviceType": null,
                "username": "tomdp5",
                "onDuty": false,
                "profileLastUpdatedAt": "0001-01-01T00: 00:00"
                },
                {
                "driverId": 645773,
                "name": "as sss",
                "status": "0",
                "equipment": null,
                "currentLocation": {
                "address1": null,
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": null,
                "poi1": null,
                "poi2": null,
                "state": null,
                "postalCode": null,
                "lat": 0,
                "lng": 0
                },
                "gpsTracking": true,
                "profilePictureUrl": "profile/picture?driverId=645773",
                "smartPhone": true,
                "cellPhone": "215-275-9090",
                "officePhone": "317-890-9090",
                "officeEmail": "as@gmail.com",
                "disablementLocation": null,
                "serviceType": null,
                "username": "tommgr1",
                "onDuty": true,
                "profileLastUpdatedAt": "2015-01-05T14: 31:17"
                }
                ],
                "links": null
            } 


## 7.9 Get Fleet Map Meta Data [/vendors/{id}/fleetmap?lat={lat}&lng={lng}&rad={rad}&calculateTravelTime={calculateTravelTime}]

###Description

The "Get Fleet Map Metadata" API retrieves the metadata required to display current driver locations and 
their jobs on a map. Rather than using pagination for this list, drivers that are plot-able for the currently 
viewed radius are returned

The fleet map will allow dispatchers to see information related to a job or information related to drivers and facilities.

Dispatchers will be able to see their drivers and facilities. In addition, they will be able to assign jobs directly from 
the Assignment Fleet Map page. Dispatcher will also be able to verify the current state/location of the driver and current
status of a job.

Dispatchers will have access to the following information on the fleet map

    Driver Information
    
    Driver location
    
    Driver’s travel time to a given location
    
    Driver’s equipment information
    
    Dispatch information
    
    Job status information
    
    Vehicleinformation
    
    Facilities

Drivers will be able to see only Dispatch and Job Status related information for the jobs assigned to them.


###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Latitude| Latitude of the center of the displayed map |YES          |Double|
|longitude| Longitude of the center of the displayed map |YES             |Double|
|radius|  Visible radius in miles of the  current displayed map |YES          |Double|
|calculateTravelTime| Boolean flag which indicates if  each driver’s travel time to provided lat/long needs to be  calculated or not      |NO          |Boolean|Default Value:No Calculating travel times   is a computationally intensive  task and hence should be asked for only if needed| 
                                                                                             
###Sample Request URL

/vendors/5447/fleetmap?latitude=42.1250&longitude=80.1153&radius=50


###Response JSON


|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|fleetMap metadata|  List of FleetMap Drivers   |YES   | FleetMapDriver[]|

   
###Sample Response
HTTP 201 Resource Created

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:--------|
|400       |Bad Request       |INVALID_REQUEST|  Invalid request  | Request is either not formatted well  OR missing required elements | 
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |Resource Not Found | VENDOR_NOT_FOUND              | No Vendor found for given  VendorId    |Vendor did not exist for the provided VendorId| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|
  
###Get Fleet Map Meta Data [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
            
            {
                "totalCount": 4,
                "offSet": 0,
                "limit": 4,
                "results": [
                {
                "dispatches": [
                {
                "dispatchRequestNumber": "329345447",
                "referenceNumber": "123456789",
                "poNumber": "234578098",
                "serviceType": "TOW",
                "problem": "Inoperable Problem",
                "coverage": "Customer covered on this service to the Designated Tow Destination. Your service is only eligible to be paid by CCAS if the customer vehicle arrives at the Designated Tow Destination specified on this dispatch summary or we provide approval for a change to the tow destination before service is rendered.<BR><B>Included: </B><BR>Storage Cost<BR><!--EXCLUDEDTEXT--> ",
                "urgency": "NORMAL",
                "receivedTime": "12/21/2012 11:28 AM",
                "currentStatus": {
                "code": "10",
                "statusReason": "",
                "eta": 45,
                "source": "Mobile"
                },
                "equipment": {
                "equipmentId": "LDWL",
                "type": "Light Duty Wheel Lift"
                },
                "vehicle": {
                "color": "Blue",
                "make": "Hyundai",
                "model": "Santa Fe",
                "year": "2012",
                "fuelType": "Gasoline",
                "driveTrainType": "AWD",
                "plate": "1234 AZ",
                "state": "MA",
                "vin": "1F12345FD46789",
                "vehicleType": "passenger",
                "mileage": "40000"
                },
                "disablementLocation ": {
                "address": "275 High Street",
                "city": "Medford",
                "state": "MA",
                "zip": "02155",
                "lat": "42.0123",
                "lng": "80.1153"
                },
                "towDestination": {
                "address": "1100 Main Street",
                "city": "Medford",
                "state": "MA",
                "zip": "02155",
                "lat": "42.0120",
                "lng": "80.8908"
                },
                "assignedDriver": {
                "driverId": "132454",
                "Status": "20",
                "name": "Joe Smith",
                "equipment": {
                "equipmentId": "LDWL",
                "addressId": 1,
                "type": "Light Duty Wheel Lift",
                "vehicleNickname": "Truck #6"
                },
                "currentLocation": {
                "address": "275 High Street",
                "lat": "42.0123",
                "lng": "80.1153"
                }
                },
                "comments": [
                {
                "commentCode": "DLC",
                "displayText": "Disablement Location",
                "commentText": "be careful with dog in the back yard."
                }
                ],
                "signatures": [
                {
                "signatureId": "244254",
                "signeeName": "Smith",
                "signeeType": "1",
                "signatureReason": "Pre-existing Damages",
                "locationType": "1",
                "latitude": 72.3434,
                "longitude": -182.43543,
                "dispatchStatusCode": "20",
                "capturedDateTime": "12/21/2012 11:28 AM",
                "signatureUrl": "/dispatches/354235235/signatures/234234/picture"
                },
                {
                "signatureId": "24424",
                "signeeName": "Joe",
                "signeeType": "2",
                "signatureReason": "1",
                "locationType": "2",
                "latitude": 72.3434,
                "longitude": -182.43543,
                "dispatchStatusCode": "20",
                "capturedDateTime": "12/21/2012 11:45 AM",
                "signatureUrl": "/dispatches/354235235/signatures/24424/picture"
                }
                ]
                }
                ],
                "travelTimeToLocation": 0,
                "driverId": 645776,
                "name": "as sss",
                "status": "0",
                "equipment": null,
                "currentLocation": {
                "address1": null,
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": null,
                "poi1": null,
                "poi2": null,
                "state": null,
                "postalCode": null,
                "lat": 0,
                "lng": 0
                },
                "gpsTracking": true,
                "profilePictureUrl": "profile/picture?driverId=645776",
                "smartPhone": true,
                "cellPhone": "215-275-9090",
                "officePhone": "317-890-9090",
                "officeEmail": "SIV@GMAIL.COM",
                "disablementLocation": null,
                "serviceType": null,
                "username": "tommgr2",
                "onDuty": true,
                "profileLastUpdatedAt": "0001-01-01T00:00:00"
                },
                {
                "dispatches": null,
                "travelTimeToLocation": 0,
                "driverId": 23211,
                "name": "asdf212",
                "status": "0",
                "equipment": null,
                "currentLocation": {
                "address1": null,
                "address2": null,
                "crossStreet": null,
                "landmark": null,
                "locationType": null,
                "city": null,
                "poi1": null,
                "poi2": null,
                "state": null,
                "postalCode": null,
                "lat": 0,
                "lng": 0
                },
                "gpsTracking": true,
                "profilePictureUrl": "profile/picture?driverId=645776",
                "smartPhone": true,
                "cellPhone": "215-275-9090",
                "officePhone": "317-890-9090",
                "officeEmail": "SIV@GMAIL.COM",
                "disablementLocation": null,
                "serviceType": null,
                "username": "tommgr2",
                "onDuty": true,
                "profileLastUpdatedAt": "0001-01-01T00:00:00"
                }
                ],
                "links": null
            }

## 7.10 Get List of Dispatchers [/vendors/{vendorId}/dispatchers?onDuty={true|false}]

###Description

The "Get List of Dispatchers" API will allow client app to display the list of dispatchers along with 
dispatcher info such as name, phone number, email,and picture for a given vendor.

Pagination is supported by this resource.

###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------|
|onDuty|   Represents the availability  mode of Dispatcher   |No   |Boolean|If not provided, all the dispatchers  (onDuty/offDuty) will be returned   |  

###Sample Request URL

/vendors/5447/dispatchers?onDuty=true


###Response JSON


|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|dispatcherList|   List of Dispatchers   |YES   |Dispatcher[]|

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | No Dispatchers Found|             |  |Drivers did not exist in the database for the current request| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


###Get List of Dispatchers [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            [
                {
                    "dispatcherId" : "132454",
                    "name" : "Joe Smith",
                    "officePhone":"781-555-4321",
                    "officeEmail":"joes@gbb.com",
                    "profilePictureUrl":"/vendors/53240/dispatchers/132454/picture",
                    "profileLastUpdatedAt":"2013-01-31 08:30 AM",
                    "onDuty":true
                },
                {
                    "dispatcherId" : "4234234",
                    "name" : "Gary Smith",
                    "officePhone":"781-555-1234",
                    "officeEmail":"gsmith@gbb.com",
                    "profilePictureUrl":"/vendors/53240/dispatchers/4234234/picture",
                    "profileLastUpdatedAt":"2013-01-31 08:30 AM",
                    "onDuty":true
                }
            ]
            

## 7.11 Get a Dispatcher [/vendors/{vendorId}/dispatchers/{dispatcherId}]

###Description

The"Get a dispatcher" API returns dispatcher information for a dispatcher identified by a dispatcherId.
This API will allow client app to display dispatcher info such as name, phone number, email, and picture 
for a given dispatcher.

###Sample Request URL

/vendors/5447/dispatchers/235235235


###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Dispatcher|   Dispatcher identified by  the unique DispatcherId|YES   |Dispatcher|

   
###Sample Response
HTTP 201 Resource Created

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | Resource Not Found |NO_DISPATCHER_FOUND |No Dispatcher found     |Drivers did not exist in the database for the current request| 
|404       | Resource Not Found|NO_VENDOR_FOUND|  |Drivers did not exist in the database for the current request| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


###Get a Dispatcher [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
                "dispatcherId": 645773,
                "name": "asdf3sd",
                "officePhone": "215-275-9090",
                "officeEmail": "as@gmail.com",
                "profilePictureUrl": "profile/picture?driverId=645773",
                "profileLastUpdatedAt": "2015-01-05T14:31:17",
                "onDuty": true
            }
            

## 7.12 Get Facility list [/vendors/{vendorId}/facilities?%5BaccessMode=anonymous%5D]

###Description

The "Get Facility list" API returns a list of facilities for a given Vendor. This will allow dispatchers and 
drivers to see the facility locations on the map and additional facility details such as Facilityname
and Facility address,

###Sample Request URL

/vendors/5447/facilities

/vendors/5447/facilities?accessMode=anonymous

###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|vendorId|    Represents the unique tax identification number of the  vendor|YES   |String|
|accessMode|  Represents if this resource is being accessed in anonymous mode     |No   |String|Allowed Value:anonymous If present, Authorization Header has to be the consumerkey of the app|                                                                                            
 
###Response Schema

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Facilities|    List of facilities|YES   |Facility[]|

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | Resource Not Found |NO_DISPATCHER_FOUND |No Dispatcher found     |Drivers did not exist in the database for the current request| 
|404       | Resource Not Found|NO_VENDOR_FOUND|  |Drivers did not exist in the database for the current request| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

  
###Get Facility list [GET]

+ Request ()

    + Header

            Authorization: 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            [
            {
                "id":"1",
                "name" : "Douglas Transport-ASM",
                "address" : "275 High Street",
                "city" : "Medford",
                "state" : "MA",
                "zip" : "02155",
                "lat" : "42.0123",
                "lon" : "80.1153" 
            },
            {
                "id":"2",
                "name" : "Douglas Transport-VIMS",
                "address" : "100 Main Street",
                "city" : "Malden",
                "state" : "MA",
                "zip" : "02155",
                "lat" : "42.0123",
                "lon" : "80.1153"
            }
            ]
            


## 7.13 Get a Facility [/vendors/{vendorId}/facilities/{facilityId}?responseType={shallow}]

###Description

The "Get a Facility" API returns information related to a single facility identified by the facilityId. 
This will allow dispatchers and drivers to see the facility locations on the map and additional facility
details such as facility name and facility address.

###Sample Request URL

/vendors/5447/facilities/14234?responseType=shallow

###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|vendorId|    Represents the unique tax identification number of the  vendor|YES   |String|
|facilityId|  Represents the unique identifier  of the facility |YES   |String|
|responseType|  Represents the level of details   needed in response      |No   |String|Possible Values:shallow---returns only the immediate simple child elements deep---returns both simple & complex child elements|                                                                                            

   
###Response Schema

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|Facilities|    List of facilities|YES   |Facility[]|

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:-------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       | Resource Not Found |NO_DISPATCHER_FOUND |No Dispatcher found     |Drivers did not exist in the database for the current request| 
|404       | Resource Not Found|NO_VENDOR_FOUND|  |Drivers did not exist in the database for the current request| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

   
###Get a Facility [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
             {
                "id":"14234",
                "name" : "275 High Street",
                "address" : "275 High Street",
                "city" : "Medford",
                "state" : "MA",
                "zip" : "02155",
                "lat" : "42.0123",
                "lon" : "80.1153"
            }   
            

## 7.19 Retrieve Equipments For a given Facility [/vendors/{vendorId}/Facilities/{facilityId}/equipments]

###Description

The"Retrieve Equipments for a given Facility" API allows user to retrieve  equipments.

###Sample Request URL

/vendors/57515/facilities/1/equipments

###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|vendorId|    Represents the unique tax identification number of the  vendor|YES   |String|
|facilityId|  Represents the unique identifier  of the facility |YES   |String|

###Sample Request

    POST  https://api-test.enterprise.agero.com/v1/id/vendors/57515/facilities/1/equipments?action=submit HTTP/1.1
    Host: api-test.enterprise.agero.com 
    Authorization: Bearer GJHGJG97986897678GJGJ==


###Response Schema

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
||    Represents the equipment that needs to be added|YES   |VendorEquipment[]|

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:-----------------|:----------|:--------|:-------|
|400       |INVALID_REQUEST      |INVALID_VENDORID| |Provided VendorId is Invalid|
|          |                     |INVALID_FACILITYID| |Provided FacilityId is Invalid
|          |                     |INVALID_ACTION | |Provided Action is invalid
|          |                     |INVALID_EQUIPMENT| |
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|403       |Forbidden      |FORBIDDEN| Request is forbidden for the current user |User making this request does not have enough privileges to submit / approve an addition of equipment to a facility | 
|404       | Resource Not Found |NO_FACILITY_FOUND |No Facility found     |A facility does not exist in the system with provided facilityId| 
|404       | Resource Not Found|NO_VENDOR_FOUND|  |Dispatcher  does not exist in the database for the current dispatcherId.| 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

   
### Retrieve Equipments For a given Facility [POST]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
             [
               {
                  "equipmentId":"LDWL",
                  "addressId":1,
                  "type":"Light Duty Wheel Lift",
                  "quantity":5,
                  "shiftType":{
                     "code":"ALL"
                  },
                  "startDate":"11/6/2007"
               },
               {
                  "equipmentId":"MDWL",
                  "addressId":1,
                  "type":"medium Duty Wheel Lift",
                  "quantity":5,
                  "shiftType":{
                     "code":"ALL"
                  },
                  "startDate":"11/6/2007"
               }
            ]  

            
# Group 8 Profile API

## 8.1 Create Profile [/profile]  
    
###Description

The "Create Profile" API allows drivers and dispatchers to create a new profile for the authenticated user. 
This resource is forbidden if a profile already exists for the user. The Profile will capture the name of 
the user, cell phone #, email, office email, office phone and preferences for GPS tracking and Auto Assign 
Jobs to me for Dispatchers only.

###Sample Request URL

/profile


###Request JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|userInfo|    User’s Personal and Office Info|YES   |UserInfo|
|Preferences|  User’s application preferences  |NO   |Preferences|

 
###Sample Request

    {
        "userInfo" :
        {
            "name" : "Jon Doe",
            "cellPhone" : "555-555-5555",
            "email" : "jdoe@gmail.com",
            "officeEmail" : "jdoe@abctowing.com",
            "officePhone" : "555-555-1111"
        },
        "preferences" :
        {
            "jobFilter" : "1",
            "jobViewOpt" : "Service, Address, City",
            "gpsTracking" : true,
            "inactivityAlert" : true,
            "autoAssignAllJobs" : false
        },
        "facilities":
        [
        {
            "id":"1",
            "name" : "Douglas Transport-ASM",
            "address" :"275 High Street",
            "city" : "Medford",
            "state" : "MA",
            "zip" : "02155",
            "lat" : "42.0123",
            "lon" : "80.1153"
        },
        {
            "id":"2",
            "name" : "Douglas Transport-VIMS",
            "address" :"100 Main Street",
            "city" : "Medford",
            "state" : "MA",
            "zip" : "02155",
            "lat" : "42.0123",
            "lon" : "80.1153"
        }
        ],
        "equipment":{
            "equipmentId" : "LDWL",
            "addressId" : 1,
            "type" : "Light Duty Wheel Lift",
            "vehicleNickname" : "blue truck",
            "equipmentPictureUrl" : "/vendors/23424/drivers/24234/driverEquipment/picture"
        }
    }

Only UserInfo is required to create a profile. Application preferences are defaulted when this is 
the case. The response from the POST operation will contain the entire newly created profile 
object so client side state matches database state.


###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|profileId|   Profile ID|YES   |Integer|
|userInfo|    User’s Personal and Office Info|YES   |UserInfo|
|Preferences|  User’s application preferences  |NO   |Preferences|

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       | REQUEST_PARAMETER_MISSING | Request Validation failed| One or more invalid parameters we passed  See the innerErrors collection for a list of invalid parameters| 
|403       |RESOURCE_EXISTS |A profile exists for  this user  | Once a profile is created for a user,it cannot be created again. A PUT should be made instead to update the current profile|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

###Create Profile [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "userInfo" :
                {
                    "name" : "Jon Doe",
                    "cellPhone" : "555-555-5555",
                    "email" : "jdoe@gmail.com",
                    "officeEmail" : "jdoe@abctowing.com",
                    "officePhone" : "555-555-1111"
                },
                "preferences" :
                {
                    "jobFilter" : "1",
                    "jobViewOpt" : "Service, Address, City",
                    "gpsTracking" : true,
                    "inactivityAlert" : true,
                    "autoAssignAllJobs" : false
                },
                "facilities":
                [
                {
                    "id":"1",
                    "name" : "Douglas Transport-ASM",
                    "address" :"275 High Street",
                    "city" : "Medford",
                    "state" : "MA",
                    "zip" : "02155",
                    "lat" : "42.0123",
                    "lon" : "80.1153"
                },
                {
                    "id":"2",
                    "name" : "Douglas Transport-VIMS",
                    "address" :"100 Main Street",
                    "city" : "Medford",
                    "state" : "MA",
                    "zip" : "02155",
                    "lat" : "42.0123",
                    "lon" : "80.1153"
                }
                ],
                "equipment":{
                    "equipmentId" : "LDWL",
                    "addressId" : 1,
                    "type" : "Light Duty Wheel Lift",
                    "vehicleNickname" : "blue truck",
                    "equipmentPictureUrl" : "/vendors/23424/drivers/24234/driverEquipment/picture"
                }
            }
            
+ Response 200 (application/json)

    + Body
    
            {
                "profileId" : 1234,
                "userInfo" :
                {
                    "name" : "Jon Doe",
                    "cellPhone" : "555-555-5555",
                    "email" : "jdoe@gmail.com",
                    "officeEmail" : "jdoe@abctowing.com",
                    "officePhone" : "555-555-1111"
                },
                "preferences" :
                {
                    "JobFilter" : 1,
                    "JobViewOpt" : 0,
                    "gpsTracking" : true,
                    "inactivityAlert" : true,
                    "autoAssignAllJobs" : false
                }
            }

## 8.2-8.4 Profile Management [/profile/{profileId}]

## 8.2 Get Profile

###Description

The "Get Profile" API allows drivers and dispatchers to get a new profile for the authenticated user. 
with an already existed user.This resource is forbidden if a profile does not exist for the user.
The Get Profile API will return the name of the user, cell phone #, email, office email, office phone a, preferences
for GPS tracking and Auto Assigned Job to me(for dispatchers only.

###Sample Request URL

/profile/778546

###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|profileId|   Profile ID|YES   |Integer|
|userInfo|    User’s Personal and Office Info|YES   |UserInfo|
|Preferences|  User’s application preferences  |NO   |Preferences|

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       | REQUEST_PARAMETER_MISSING | Request Validation failed| One or more invalid parameters we passed  See the innerErrors collection for a list of invalid parameters| 
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

## 8.4 Update Profile 

###Description

The "Update Profile" API allows drivers and dispatchers to update an existing profile for the authenticated user. 
This resource is forbidden if a profile does not exist for the user. The Profile API allows users to update the 
name of the user, cell phone #, email, office email, office phone and preferences for ETA alerts and GPS tracking.

###Sample Request URL

/profile/778546

##Request JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|userInfo|    User’s Personal and Office Info|YES   |UserInfo|
|Preferences|  User’s application preferences  |NO   |Preferences|

###Sample Response
HTTP 200 OK

###Errors 

|HTTP Code |HTTP Reason Phrase |Error Code | Message |Reason  | 
|:---------|:--------- |:--------- |:--------|:--------|
|401       |Unauthorized|INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404      |Profile not found| | | A profile did not exsist in the database for the current request| 
|500       |Server Error|UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


##Get Profile [GET]
+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 (application/json)

    + Body
    
            {
                "profileId": 645773,
                "userInfo": {
                "name": "adfasd",
                "cellPhone": "215-275-9090",
                "email": "as@gmail.com",
                "officeEmail": "as@gmail.com",
                "officePhone": "317-890-9090",
                "profilePictureUrl": ""
                },
                "preferences": {
                "jobFilter": 1,
                "jobViewOpt": null,
                "gpsTracking": true,
                "etaAlerts": true,
                "inactivityAlert": true,
                "autoAssignAlljobs": false,
                "subscribeToNewsletterEmail": false,
                "consentToTextAndPhoneStatusUpdates": false,
                "passwordManagementPrivilege": false,
                "jobConfirmationExpectedViaEmailOrFax": false
                },
                "facilities": [
                {
                "id": "1",
                "name": "Douglas Transport-ASM",
                "address": "275 High Street",
                "city": "Medford",
                "state": "MA",
                "zip": "02155",
                "lat": "42.0123",
                "lon": "80.1153"
                },
                {
                "id": "2",
                "name": "Douglas Transport-VIMS",
                "address": "100 Main Street",
                "city": "Medford",
                "state": "MA",
                "zip": "02155",
                "lat": "42.0123",
                "lon": "80.1153"
                }
                ],
                "equipment": {
                "vehicleNickname": "blue truck",
                "equipmentPictureUrl": null,
                "lastUpdatedAt": "2015-01-28T14:34:16",
                "addressId": 1,
                "type": "Light Duty Wheel Lift",
                "equipmentId": "LDWL" 
                }
            }
            
##Update Profile [PUT]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
            "userInfo": {
                "name": "adfasd",
                "cellPhone": "215-275-9090",
                "email": "as@gmail.com",
                "officeEmail": "as@gmail.com",
                "officePhone": "317-890-9090",
                "profilePictureUrl": ""
            },
            "preferences": {
                "jobFilter": 1,
                "jobViewOpt": null,
                "gpsTracking": true,
                "etaAlerts": true,
                "inactivityAlert": true,
                "autoAssignAlljobs": false,
                "subscribeToNewsletterEmail": false,
                "consentToTextAndPhoneStatusUpdates": false,
                "passwordManagementPrivilege": false,
                "jobConfirmationExpectedViaEmailOrFax": false
            },
            "facilities": [
                {
                    "id": "1",
                    "name": "Douglas Transport-ASM",
                    "address": "275 High Street",
                    "city": "Medford",
                    "state": "MA",
                    "zip": "02155",
                    "lat": "42.0123",
                    "lon": "80.1153"
                },
                {
                    "id": "2",
                    "name": "Douglas Transport-VIMS",
                    "address": "100 Main Street",
                    "city": "Medford",
                    "state": "MA",
                    "zip": "02155",
                    "lat": "42.0123",
                    "lon": "80.1153"
                }
            ],
            "equipment": {
                "vehicleNickname": "blue truck",
                "equipmentPictureUrl": null,
                "lastUpdatedAt": "2015-01-28T14:34:16",
                "addressId": 1,
                "type": "Light Duty Wheel Lift",
                "equipmentId": "LDWL"
            }
            }


+ Response 200 (application/json)

  
            
## 8.3-8.5 Partial Profile UserInfo [/profile/userInfo]

## 8.3 Partial Get

###Description

The "Partial Get" API allows client apps to retrieve the userInfoand preferences by their sub resources.

### SampleURL

/profile/userInfo

### Response

    {
        "name": "tom123456789 boy",
         "cellPhone": "201-450-9999",
        "email": "tom123@gmail.com",
        "officeEmail": "tom123@gmail.com",
        "officePhone": "201-450-6754",
        "profilePictureUrl": null
    }
    
    
## 8.5 Partial Update

###Description

The "Partial Update" API allows client apps to update the userInfo and preferences by their sub resources.

### SampleURL

/profile/userInfo

### Request

    {
        "name" : "Jon Doe",
        "cellPhone" : "555-555-5555",
        "email" : "jdoe@gmail.com",
        "officeEmail" : "jdoe@abctowing.com",
        "officePhone" : "555-555-1111"
    }


    
###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       | REQUEST_PARAMETER_MISSING | Request Validation failed| One or more invalid parameters we passed  See the innerErrors collection for a list of invalid parameters| 
|500       |      |UNKNOWN   |An unknown error occurred at the server|


###Partial Get UserInfo [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
            "name": "tom123456789 boy",
            "cellPhone": "201-450-9999",
            "email": "tom123@gmail.com",
            "officeEmail": "tom123@gmail.com",
            "officePhone": "201-450-6754",
            "profilePictureUrl": null
            }

### Update UserInfo [PUT]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                "name" : "Jon Doe",
                "cellPhone" : "555-555-5555",
                "email" : "jdoe@gmail.com",
                "officeEmail" : "jdoe@abctowing.com",
                "officePhone" : "555-555-1111"
            }

+ Response 200 ()

## 8.3.1-8.5.1 Profile Preferences [/profile/preferences]

## 8.3.1 Get Preferences

###Description

The "Partial Get" API allows client apps to retrieve the userInfoand preferences by their sub resources.

###SampleURL

/profile/preferences

###Response

    {
        "jobFilter": 1,
        "jobViewOpt": null,
        "gpsTracking": true,
        "etaAlerts": false,
        "inactivityAlert": true,
        "autoAssignAlljobs": false,
        "subscribeToNewsletterEmail": false,
        "consentToTextAndPhoneStatusUpdates": false,
        "passwordManagementPrivilege": false,
        "jobConfirmationExpectedViaEmailOrFax": false
    }
    
## 8.5.1 Update Preferences

###Description

The "Partial Get" API allows client apps to retrieve the userInfoand preferences by their sub resources.

### SampleURL

/profile/preferences

### Request

    {
        "JobFilter" : 1,
        "JobViewOpt" : 0,
        "gpsTracking" : "true",
        "etaAlerts" : "true"
    }


    
###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       | REQUEST_PARAMETER_MISSING | Request Validation failed| One or more invalid parameters we passed  See the innerErrors collection for a list of invalid parameters| 
|500       |      |UNKNOWN   |An unknown error occurred at the server|


###Partial Get Preferences [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
               "jobFilter": 1,
                "jobViewOpt": null,
                "gpsTracking": true,
                "etaAlerts": false,
                "inactivityAlert": true,
                "autoAssignAlljobs": false,
                "subscribeToNewsletterEmail": false,
                "consentToTextAndPhoneStatusUpdates": false,
                "passwordManagementPrivilege": false,
                "jobConfirmationExpectedViaEmailOrFax": false
            }
            
###Update Preferences [PUT]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                "JobFilter" : 1,
                "JobViewOpt" : 0,
                "gpsTracking" : "true",
                "etaAlerts" : "true"
            }
            
+ Response 200 ()

## 8.6 Get Facility List for Profile [/profile/{profileId}/facilities]

###Description

The "Get Facility list for Profile" API returns a list of facilities for a given Profile. 
This will allow dispatchers and drivers to see the facility locations on the map and additional
facility details such as facility name and facility address associated with a specific driver or dispatcher.
Pagination is supported by this resource.

###Sample Request URL

/profile/778546/facilities

###Sample Response
    [
    {
        "id" : "1",
        "name" : "ABC Towing (Turnersville)",
        "address" : "3400 Route 42",
        "city" : true,
        "city" : "Turnersville",
        "state" : "NJ",
        "zipCode" : "08012",
        "lat" :23.5435,
        "lon" :-35.5435
    },
    {
        "id" : "2",
        "name" : "ABC Towing (Glassboro)",
        "address" : "100 Main Street",
        "city" : "Glassboro",
        "state" : "NJ",
        "zipCode" : "08011",
        "lat" :53.5435,
        "lon" :-65.5435
    }
    ]
    
###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|facilities| List of facilities|YES   |Facility[]|


###Exception

Returns an HTTP 500 if a server side exception occurs.
                           

###Exception JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|message| Exception Message|YES   |String|

###Sample Exception JSON
    
         {
         "message" : "Unknown Error Occurred."
         }
    

###Get Facility List for Profile [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
+ Response 200 (application/json)

    + Body
    
            [
                {
                    "id" : "1",
                    "name" : "ABC Towing (Turnersville)",
                    "address" : "3400 Route 42",
                    "city" : true,
                    "city" : "Turnersville",
                    "state" : "NJ",
                    "zipCode" : "08012",
                    "lat" :23.5435,
                    "lon" :-35.5435
                },
                {
                    "id" : "2",
                    "name" : "ABC Towing (Glassboro)",
                    "address" : "100 Main Street",
                    "city" : "Glassboro",
                    "state" : "NJ",
                    "zipCode" : "08011",
                    "lat" :53.5435,
                    "lon" :-65.5435
                }
            ]
            
## 8.11 Add a preferred facility [/profile/facilities]

###Description

The "Add a preferred facility" API allows a dispatcher to add a facility to his preferred list of facilities for which he wants to receive jobs .

###Sample Request URL

/profile/facilities

###Response JSON

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|facilityId|Unique identifier of the  facility to be added to the preferred list  |YES   |String|

###Sample Request Body

    {
    "facilityId" : "1"
    }

###Sample Request 

    POST https://test.enterprise.agero.com/v1/id/profile/facilities HTTP/1.1
    Host: test.enterprise.agero.com
    Content-Type: application/json
    Content-Length:
    Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    {
    "facilityId" : "1"
    }
    
###Response JSON

N/A

###Sample Response Body

HTTP/1.1 200 OK

###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden  |FORBIDDEN |Request is forbidden for the  current user    |User making this request does not have enough privileges to submit / approve an addition of additional territories   for a facility| 
|404       |Job Not Found  |   |  |  The requested job record  doesn’t exist| 
|500       |Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|
            
### Add a preferred facility [POST]
                                                                                                     
+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                 "facilityId" : "1"
            }
            
            
+ Response 200 ()

## 8.7 Upload a profile picture [/profile/picture] 

###Description

The "Upload a profile picture "API allows drivers and dispatchers to upload a
picture for a given vendor id and driver id. This API will be used by the first 
time user that is trying to post a picture.Picture is transferred to server by 
Multipart/Form data (i.e. passing picture data as stream) technique by calling REST API.


###Request Header

|Schema Property |Description   |Is Required   |Expected Value  |
|:---------------|:-------------|:-------------|:---------------| 
|Content-Type    | Indicates the type of  the content being posted |YES|multipart/form-data; boundary=AaB03x| 
| Content-Length | ndicates the length of the content              |YES| This is a dynamic value which depends on the size of the file being uploaded  (from the first AaB03x down, including 
                                                                                        the file data)| 
###Request Body

|Schema Property |Description   |Is Required   |Type |Business Rules| 
|:---------------|:-------------|:-------------|:---------------|:---|
|profilePicture    |Binary representation  of the profile picture being uploaded |YES| Byte[]| | 
|Filename| Indicates the name of   the file being uploaded |YES| String| |

 
###Sample Request Body

    --AaB03x 
    
      content-disposition: form-data; name="profilePicture"; filename="{filename}" Content-Type: {mimetype}
      
      
     …contents of profilepicture.jpg…
     
     
    --AaB03x--

###Response JSON
N/A

###Sample Response

HTTP 201 Resource Created

###Errors 


|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       | REQUEST_PARAMETER_MISSING | Request Validation failed| One or more invalid parameters we passed  See the innerErrors collection for a list of invalid parameters| 
|403       |RESOURCE_EXISTS |A profile exists for  this user  | Once a profile is created for a user,it cannot be created again. A PUT should be made instead to update the current profile|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


### Upload a profile picture [POST]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
    + Body
    
            --AaB03x content-disposition: form-data; name="profilePicture"; filename="{filename}" 
            Content-Type: {mimetype}
            
            …contents of profilepicture.jpg…
            
            --AaB03x--
           
+ Response 201 ()

## 8.8-8.10 Retrieve,Update,Delete Profile API [/profile/picture?driverId={driverId}]

## 8.8 Retrieve a profile picture

###Description

The "Retrieve a profile picture "API allows drivers and dispatchers to retrieve a picture for a given vendor 
id and driver id. driverId query string parameter is optional and is meant to be used only by a dispatcher / owner.
If not provided, the API will return the profile picture of the logged in user.

A dispatcher / owner can however retrieve the profile pictures of drivers by passing a driverId. 
If driverId is passed and the logged in user is not a dispatcher / owner, API will return a
forbidden (HTTP Status Code:403) error.


###Request Body

N/A

###Response Body

Binary steam of the picture

###Sample Response



###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |NOT_ALLOWED| Driver role cannot request the  profile pictures of other drivers  |
|404       |RESOURCE_NOT_FOUND  |  No profile picture found        |  
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

## 8.9 Update a profile picture 

###Description

The "Update a profile picture" API allows drivers and dispatchers to override an existing profile picture.Picture is transferred to server by Multipart/Form data (i.e. passing picture data as stream) technique by calling REST API.

A dispatcher / owner can however update the profile pictures of drivers by passing a driverId. If driverId is passed and the logged in user is not a dispatcher / owner, API will return a forbidden (HTTP Status Code:403) error.

###Request Header

|HeaderName |Description   |Is Required   |Expected Value  |
|:---------------|:-------------|:-------------|:---------------| 
|Content-Type    | Indicates the type of  the content being posted |YES|multipart/form-data; boundary=AaB03x| 
| Content-Length | ndicates the length of the content              |YES| This is a dynamic value which depends on the size of the file being uploaded  (from the first AaB03x down, including 
                                                                                        the file data)| 
###Request Parameters

|  Parameter Name   |Description   |Is Required |Business Rules|
|:---------------|:-------------|:-------------|:-------------| 
|driverId|Represents the identifier of the driver   for which  picture needs to be updated |NO   | If not provided,profile picture of the logged in user will be updated |

   
###Request Body

| Schema Property    |Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|profilePicture|Binary representation  of the profile picture  being uploaded  |YES   |   Byte[] |
|Filename| Indicates the name of   the file being uploaded  |YES   |   String |

    
###Sample Request Body

    --AaB03x 
    
      content-disposition: form-data; name="equpmentPicture"; filename="{filename}" Content-Type: {mimetype}
      
      
     …contents of profilepicture.jpg…
     
     
    --AaB03x--

###Response JSON
N/A

###Sample Response

HTTP 200 OK

###Errors 


|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING |Request Validation failed  |One or more invalid parameters we passed See the innerErrors collection  for a list of invalid parameters | 
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |NO_RESOURCE_EXISTS|No profile picture exists to be updated   |  This error occurs if the consumer  is trying to update a profile picture which does not exist| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

## 8.10 Remove a profile picture

###Description

Removes the profile picture uploaded earlier. driverId query string parameter is optional and if not provided, 
the API will return the profile picture of the logged in user. A dispatcher / owner can however retrieve the 
profile pictures of drivers by passing a driverId. If driverId is passed and the logged in user is not a 
dispatcher / owner, API will return a forbidden error.


###Request Parameters

|Schema Property |Description   |Is Required   |Type   |Business Rules|
|:---------------|:-------------|:-------------|:------|:-------------| 
|driverId|Represents the identifier of the driver  whose picture needs to be deleted |NO   |Integer|Appplies only to a Dispatcher|

###Request Body

N/A

###Sample Request Body

POST https://api-test.enterprise.agero.com/v1/id/profile/picture HTTP/1.1
Host: api-test.enterprise.agero.com
Content-Type: application/json
Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

###Response Body

N/A

###Sample Response

HTTP 200 OK

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |RESOURCE_NOT_FOUND  |  Invalid Driver Id      |  If provided driverId is either invalid or   does not exist|
|500       |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Retrieve a profile picture [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()



### Update a profile picture [PUT]

+ Request (multipart/form-data)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
    + Body
    
            --AaB03x content-disposition: form-data; name="profilePicture"; filename="{filename}" 
            Content-Type: {mimetype}
            
            …contents of profilepicture.jpg…
            
            --AaB03x--
            
            
+ Response 200 ()

### Remove a profile picture [DELETE]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
+ Response 200 ()


## 8.12 Remove a preferred facility [/profile/facilities/{facilityId}] 

###Description

The "Remove a preferred facility" API allows a dispatcher to remove a facility from his preferred list 
of facilities for which he wants to receive jobs.

###Sample Request URL
/profile/facilities/3

###Request Parameters

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-----------|:-------------|:-------------| 
|facilityId|  Unique identifier of the facility  to be added to the preferred list    |YES   |   String |

###Sample Request Body

N/A

###Sample Request

    DELETE https://test.enterprise.agero.com/v1/id/profile/facilities/3 HTTP/1.1
    
    Host: test.enterprise.agero.com
    
    Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

###Response JSON

N/A

###Sample Response Body

HTTP/1.1 200 OK


###Errors

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|403       |NOT_ALLOWED |Driver role cannot request the   profile pictures of   other drivers   |
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|404       |NO_RESOURCE_EXISTS| No profile picture found  | 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|


###Remove a preferred facility[DELETE]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()

# Group 9 Push Notification API
## 9.1 Subscribe to Notifications [/pushNotification/subscribe] 

### Description

The "Subscribe to Notifications" API will allow mobile app users to register their devices so that mobile app users can receive push notifications from Roadside Connect. In order to register for Push Notification, the user has to be authenticated by the Security API.

### Sample Request URL

/pushNotification/subscribe

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|deviceId| The device id   |YES   |   String |
|deviceToken|The device Token    |YES   |   String | Android Apps: deviceToken is the registration Id provided to the app by GCM Server iOS Apps:deviceToken is the token provided to the app by APNs   |
|platform| The Client Platform    |NO   |   String |  Android, iOS, HTML| 
|osVersion| The version of Android or iOS |NO   |   String | 

### Sample Request

    {
        
        "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
        "deviceToken" : null,
        "platform" : "Android",
        "osVersion" : "4.0.3"
    }

### Repsonse

HTTP 200


### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Missing request header 'X-application-key' | One or more invalid parameters we passed See the innerErrors collection for a  list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|   Request Validation failed | One or more invalid parameters we passed See the innerErrors collection for a list of invalid parameters|
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|


   
### Subscribe to Notifications [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                
                "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
                "deviceToken" : null,
                "platform" : "Android",
                "osVersion" : "4.0.3"
            }

+ Response 200 ()

## 9.2 Receive a Notification [/pushNotification/notify] 

### Description

The "Send a Notification "API will allow drivers and dispatchers to receive push notification on their registered devices.
Dispatchers will be able to receive push notifications based on the business rules setup on the client app.

The following push notifications are available for drivers and dispatchers:

- New Job Offer -This notification is sent out to dispatcher when a new job offer is sent out by Agero
- ETA Rejected- This notification is sent out to dispatcher when Agero rejects the ETA submitted by the Dispatcher
- Job Approved-This notification is sent out to dispatcher when Agero approves the ETA submitted by the Dispatcher
- Job Assigned-This notification is sent out to Driver when Dispatcher assigns job to a driver
- JobReassigned-This notification is sent out to Driver when Dispatcher reassigns an assigned job to another driver
- Job Cancelled- This notification is sent out to Dispatcher and an Assigned Driver when a Agero cancels a job

### Sample Request URL

/pushNotification/notify

### Request JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|notificationType|  Type of notification|YES   |   String |Possible Values: NewJobOffered  JobAssigned JobReAssigned  ETAEvaluation ETARejected JobApproved|
| payload.dispatchRequestNumber| The dispatchRequestNumber  |YES   |   Integer |
| payload.title  |Title of the Notification |NO   |   String |
| payload.message |The message body of the notification |NO   |   String |


### Sample Request

    {
        "notificationType" : "NewJobOffer",
        "payload" :
        {
            "dispatchRequestNumber" : 123456789,
            "title" : "New Offer",
            "message" : "You have a new job."
        }
    }


### Repsonse

HTTP 200


### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:-------|
|400       |REQUEST_PARAMETER_MISSING | Request Validation  failed| One or more invalid parameters we passed  See the innerErrors collection for a  list of invalid parameters|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Receive a Notification [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
    + Body
    
            {
                "notificationType" : "NewJobOffer",
                "payload" :
                {
                    "dispatchRequestNumber" : 123456789,
                    "title" : "New Offer",
                    "message" : "You have a new job."
                }
            }

+ Response 200 ()

# Group 10 Dashboard API
## 10.1 Get Dashboard Information [/dashboardInformation] 

### Description

The "Dashboard"API allows dispatchers and drivers to get summary information depending on the role of the user.
### Dispatcher Dashboard API

- Jobs summary which includes:
    * # of new dispatches
    * # of unassigned dispatches
    * # of active dispatches
- Drivers which includes:
    * # of GPS enabled Drivers
    * Total # of Drivers (includes both GPS enabled and non-enabled drivers)
- List of facilities
- Quick Call link

### Driver Dashboard API

- Most Recent Job which includes:
    * Details (Dispatch Type, Equipment, Disablement Location…) of most recent dispatch performed by the driver
    * # of active dispatches ( typically 0/ 1)
    * # of completed dispatches
- All Jobs which includes
    * # of active jobs
    * # of complete jobs
- List of Facilities
- Map image/link to Job Map – which centers on the current job or the driver’s current location if not working a job

### Sample Request URL

/dashboardInformation

### Request JSON

N/A

### Sample Request Body

N/A

### Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|newDispatchCount| # of new dispatches    |YES/NO   |   Integer |Returned only if the logged in user is a Dispatcher / Owner|
|unAssignedDispatchCount|# of unassigned dispatches |YES/NO   |   Integer|Returned only if the logged in user is a Dispatcher / Owner|
| activeDispatchCount  | # of active dispatches|YES   |   Integer|
| totalDriverCount | # of Drivers   |YES/NO   |   Integer |Returned only if the logged in user is a Dispatcher / Owner|
|gpsEnabledDriverCount|  # of GPS enabled Drivers    |YES/NO   |   Integer |Returned only if the logged in user is a Dispatcher / Owner|
| completedDispatchCount|  # of dispatches completed   by a driverOn that particular  day  |YES/NO   |   Integer |Returned only if the logged in user is a Driver |
|mostRecentDispatch  | Provides details on the most recent dispatch performed  by a driver|YES/NO   |   Dispatch |Returned only if the logged in user is a Driver |
| facilityLocations | Provides the geographical  coordinates of the facility locations|YES |   Location[] |
|  ageroPhoneNumber  | Represents the ph# of Agero|YES   |   String |
| Dispatchers| Represents the list of dispatchers   |YES/NO   |   UserInfo[] | Returned only if the logged in user is a Driver|


    
### Sample Response(s)

### Dashboard Information (For a Dispatcher / Owner)

    {
        "newDispatchCount": 3,
        "unAssignedDispatchCount": 1,
        "activeDispatchCount": 5,
        "gpsEnabledDriverCount": 5,
        "totalDriverCount": 10,
        "ageroPhoneNumber": "1-800-541-2262",
        "facilityLocations": [
        {
        "id": "24534",
        "name": "Unique Systems, LLC",
        "address": "275 High Street",
        "city": "Medford",
        "state": "MA",
        "zip": "02155",
        "lat": "42.0123",
        "lng": "80.1153"
        },
        {
        "id": "26436",
        "name": "Unique Systems, LLC",
        "address": "100 Main Street",
        "city": "Malden",
        "state": "MA",
        "zip": "02155",
        "lat": "42.0123",
        "lng": "80.1153"
        }
        ],
        "dispatchers": [
        {
        "dispatcherId": 309542,
        "name": "adfasd",
        "officePhone": "215-275-9090",
        "officeEmail": as@gmail.com,
        "profilePictureUrl": "profile/picture?driverId=309542",
        "profileLastUpdatedAt": "2015-01-28T15:04:09",
        "onDuty": true
        }
    }

### Dashboard Information (For a Driver) 

    {
    "activeDispatchCount" :1,
    "completedDispatchCount" :5,
    "ageroPhoneNumber" :"1-800-343-5325",
    "dispatchers":
    [
    {
        "name" : "Jon Doe",
        "cellPhone" : "555-555-5555",
        "email" : "jdoe@gmail.com",
        "officeEmail" : "jdoe@abctowing.com",
        "officePhone" : "555-555-1111"
    },
    {
        "name" : "John smith",
        "cellPhone" : "111-111-1111",
        "email" : "jsmith@gmail.com",
        "officeEmail" : "jsmith@abctowing.com",
        "officePhone" : "555-555-1111"
    } 
    ],
    "facilityLocations" :
    [
    {
        "id" : "24534",
        "address" : "275 High Street",
        "city" : "Medford",
        "state" : "MA",
        "zip" : "02155",
        "lat" : "42.0123",
        "lng" : "80.1153"
    },
    {
        "id" : "26436",
        "address" : "100 Main Street",
        "city" : "Malden",
        "state" : "MA",
        "zip" : "02155",
        "lat" : "42.0123",
        "lng" : "80.1153"
    }
    ],
    "mostRecentDispatch" :
    {
        "dispatchRequestNumber" : "329345447",
        "referenceNumber" : "123456789",
        "poNumber" : "234578098",
        "serviceType" : "TOW",
        "problem" : "Inoperable Problem",
        "coverage" : "YES",
        "urgency" : "NORMAL",
        "receivedTime" : "12/21/2012 11:28 AM",
        "currentStatus" :
        {
            "code" : "10",
            "statusReason" : "",
            "eta" : 45,
            "source" : "Mobile"
        },
        "etaStatusCode":"101",
        "eta":"2013-11-11T17:43:42", "etaInMinutes":20,
        "revisedEta":"2013-11-11T17:53:42", "revisedEtaInMinutes":10,
        "etaRevisionCount":1,
        "equipment" :
        {
            "equipmentId" : "LDWL",
            "type" : "Light Duty Wheel Lift"
        },
        "vehicle" :
        {
            "color" : "Blue",
            "make" : "Hyundai",
            "model" : "Santa Fe",
            "year" : "2012",
            "fuelType" : "Gasoline",
            "driveTrainType" : "AWD",
            "plate" : "1234 AZ",
            "state" : "MA",
            "vin" : "1F12345FD46789",
            "vehicleType" : "passanger",
            "mileage" : "40000"
        },
        "disablementLocation " :
        {
            "address" : "275 High Street",
            "city" : "Medford",
            "state" : "MA",
            "zip" : "02155",
            "lat" : "42.0123",
            "lng" : "80.1153"
        },
        "towDestination" :
        {
            "address" : "1100 Main Street",
            "lat" : "42.0120",
            "lng" : "80.8908"
        },
        "assignedDriver" :
        {
            "driverId" : "132454",
            "Status" : "ACTIVE",
            "name" : "Joe Smith",
        "equipment" :
        {
            "equipmentId" : "LDWL",
            "addressId" : 1,
            "type" : "Light Duty Wheel Lift",
            "vehicleNickname" : "Truck #6"
        },
        "location" :
        {
            "address" : "275 High Street",
            "lat" : "42.0123",
            "lng" : "80.1153"
        },
        "towDestination" : { }
        },
        "comments" :
        [{
            "commentCode" : "DLC",
            "displayText" : "Disablement Location",
            "commentText" : "be careful with dog in the back yard."
        }]
        }
    }
    

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING | Request Validation  failed| One or more invalid parameters we passed  See the innerErrors collection for a  list of invalid parameters|
|400       |INVALID_REQUEST |Missing request header 'X-application-key' |
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|


### Get Dashboard Information [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
+ Response 200 (application/json)

    + Body
    
            {
                "newDispatchCount" :3,
                "unAssignedDispatchCount" :1,
                "activeDispatchCount" :5,
                "gpsEnabledDriverCount" :5,
                "totalDriverCount" :10,
                "facilityLocations" :
                [
                {
                    "id" : "24534",
                    "address" : "275 High Street",
                    "city" : "Medford",
                    "state" : "MA",
                    "zip" : "02155",
                    "lat" : "42.0123",
                    "lng" : "80.1153"
                },
                {
                    "id" : "26436",
                    "address" : "100 Main Street",
                    "city" : "Malden",
                    "state" : "MA",
                    "zip" : "02155",
                    "lat" : "42.0123",
                    "lng" : "80.1153"
                }
                ],
                "ageroPhoneNumber" :"1-800-343-5325"
            }

            
# Group 11 Terms & Conditions API
## 11.1 Get Terms And Conditions [/termsAndConditions?appId={appId}]

### Description

The "Terms & Conditions"API provides the content of terms and conditions along with a Terms and Conditions version Id and 
last revised date time to the client app.

### Sample Request URL

/termsAndConditions

### Request Parameter

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|appId| Represents the unique identification   number of the app for which T&C are   being requested   |YES   |   Integer |


### Request Schema

N/A

### Sample Request Body

N/A

### Repsonse Schema

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|version| Indicates the version  of terms and conditions |YES  |   String |
|appId| Represents the unique identification   number of the app for which T&C are   being requested   |YES   |   Integer |
| releasedDateTime  | Indicates the date time at  which this version of terms and conditions is released|YES   |   Integer|
| content |  Represents terms of use and  privacy policy to be   accepted by the user |YES   |   String |


### Sample Response(s)

    {
        "version" : "1.0",
        "appId" : "xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3kZapZ9YQ",
        "releasedDateTime" : "12/21/2012",
        "content" : "This is photoshop’s version of Lorem Ipsum..."
    }
    

### Errors 


|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Missing request header 'X-application-key' |
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|


 

### Get Terms and Conditions [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    
+ Response 200 (application/json)

    + Body
    
            {
                "version" : "1.0",
                "appId" : "xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3kZapZ9YQ",
                "releasedDateTime" : "12/21/2012",
                "content" : "This is photoshop’s version of Lorem Ipsum..."
            }
            
## 11.2 Accept or Decline Terms and Conditions [/termsAndConditions/app/{appId}/{action}]

### Description

The "Accept/Decline Terms & Conditions " API allows the user to accept / decline the terms of use and privacy policy. 
Besides accepted / declined flag, other metadata such as deviceId, username,apikey…etc are also captured in the backend.

### Sample Request URL

/termsAndConditions/app/xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3kZapZ9YQ/accept

/termsAndConditions/app/xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3kZapZ9YQ/decline

### Request Parameter


| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|appId| Represents the unique identification   number of the app for which T&C are   being accepted / rejected    |YES   |   String |
|action| Action performed by the user    |YES   |   String |Valid values include Accept/Decline

     
### Request Schema

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|deviceId|  Represents the deviceId from which the terms of use and privacy policy are accepted|YES  |   String |
|versionId| Represents the version of  the terms of use and privacy policy that are being accepted |YES   |   Integer |

### Sample Request Body

    {
        "deviceId":"xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3k   ZapZ9YQ",
        "versionId":"1.0"
    }

### Repsonse Schema


### Sample Response

Http 200 Ok
    

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Request is not compliant  with expected schema|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING| Action parameter cannot  be null or empty     |appId parameter is a required field|
|400       |REQUEST_PARAMETER_MISSING|  appId parameter cannot be null  or empty| appId parameter is a required field|
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

###Accept or Decline Terms and Conditions [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
            
    + Body
    
            {
                "deviceId":"xb7TDbSej3zUk6a2lWy7VJvezhsgRuq3kZapZ9YQ",
                "versionId":"1.0"
            }
    
+ Response 200 ()

# Group 12 Enumerations API
Enumerations API is a collection of static enumerations that are referenced from other resource representations.
All the enumerations can be accessed either in anonymous mode or authenticated mode. Accessing these resources in anonymous mode will require consumer key of the consuming app. 

## 12.1 Get Driver Types [/enumerations/driverTypes] 
### Description

The "Get Driver Types" API provides a list of driver types that can be used by the client app.

There are three types of drivers:

* Drivers with GPS enabled
* Drivers with GPS not enabled
* Drivers with GPS not Available

### Sample Request URL

/enumerations/driverTypes

### Request JSON

N/A

### Sample Request Body

N/A

### Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  |  Array of driver types    |YES   |   driverType[] |

  
### Sample Repsonse Body

    [
        {
            "code" : "1",
            "description" : "All"
        },
        {
            "code" : "2",
            "description" : "GPS Enabled"
        },
        {
            "code" : "3",
            "description" : "Non GPS Enabled"
        }
    ]

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Get Driver Types [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "code" : "1",
                    "description" : "All"
                },
                {
                    "code" : "2",
                    "description" : "GPS Enabled"
                },
                {
                    "code" : "3",
                    "description" : "Non GPS Enabled"
                }
            ]

## 12.2 Get Signee Types [/enumerations/signeeTypes]
### Description

The"Get Signee Types " API provides a list of Signee types that can sign a dispatch.

There are two types of Signees:

- Vehicle Owner/Driver
- Employee

### Sample Request URL

/enumerations/signeeTypes

### Request JSON

N/A

### Sample Request Body

N/A

### Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  |  Array of signee type     |YES   |   signeeType[] |

### Sample Repsonse Body

    [
        {
            "code" : "1",
            "description" : "Vehicle Owner / Driver"
        },
        {
            "code" : "2",
            "description" : "Employee"
        }
    ]

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST | Missing request header  'X-application-key'|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Get Signee Types [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
                [
                    {
                        "code" : "1",
                        "description" : "Vehicle Owner / Driver"
                    },
                    {
                        "code" : "2",
                        "description" : "Employee"
                    }
                ]
                
## 12.3 Get Signature Reason Types [/enumerations/signatureReasonTypes]                
### Description

The "Get Signature Reason Types " API provides a list of reasons for which a signature can be captured.

There are four types of signature reasons:

* Pre-existing Damages
* Unattended Tow
* Job Complete
* Vehicle & Keys Receivedee

### Sample Request URL

/enumerations/signatureReasonTypes

### Request JSON

N/A

### Sample Request Body

N/A

### Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  |  Array of signatureReason type    |YES   |   signatureReasonType[]  |

 
### Sample Repsonse Body

    [
        {
            "code" : "1",
            "description" : "Pre-existing Damages"
        },
        {
            "code" : "2",
            "description" : "Unattended Tow"
        },
        {
            "code" : "3",
            "description" : "Job Complete"
        },
        {
            "code" : "4",
            "description" : "Vehicle & Keys Received"
        }
    ]

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST | Missing request header  'X-application-key'|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Get Signature Reason Types [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "code" : "1",
                    "description" : "Pre-existing Damages"
                },
                {
                    "code" : "2",
                    "description" : "Unattended Tow"
                },
                {
                    "code" : "3",
                    "description" : "Job Complete"
                },
                {
                    "code" : "4",
                    "description" : "Vehicle & Keys Received"
                }
            ]

## 12.4 Get Signature Location Types [/enumerations/signatureLocationTypes] 
### Description

The "Get Signature Reason Types " API provides a list of location tpes for which a signature can be captured.
There are two types of signature reasons:

* Disablement site or Pick-Up location
* Tow Location

### Sample Request URL

/enumerations/signatureLocationTypes

### Request JSON

N/A

### Sample Request Body

N/A

### Repsonse JSON


| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  | Array of signatureLocationType    |YES   |    signatureLocationType[]    |

    
### Sample Repsonse Body

    [
        {
            "code" : "1",
            "description" : "Disablement site or Pick-Up location"
        },
        {
            "code" : "2",
            "description" : "Tow Location"
        }
    ]
    
### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST | Missing request header  'X-application-key'|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Get Signature Location Types [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "code" : "1",
                    "description" : "Disablement site or Pick-Up location"
                },
                {
                    "code" : "2",
                    "description" : "Tow Location"
                }
            ]

## 12.6 Get Job Status Codes [/enumerations/dispatchStatuses] 

###Description

The "Get Dispatch Statuses " API provides a list of possible dispatch statuses a dispatch can go through

###Sample Request URL

/enumerations/dispatchStatuses

###Request JSON

N/A

###Sample Request Body

N/A

###Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  | Array of job status codes    |YES   |     JobStatusCode[]        |

        

###Sample Repsonse Body

    [
        {
            "code" : "0",
            "description" : "Unassigned"
        },
        {
            "code" : "2",
            "description" : "New"
        },
        {
            "code" : "3",
            "description" : "Pending"
        },
        {
            "code" : "4",
            "description" : "Expired"
        },
        {
            "code" : "5",
            "description" : "Rejected"
        },
        {
            "code" : "6",
            "description" : "Refused",
            "possibleReasons":
            [
                {
                    "code" : "1",
                    "description" : "Do not accept payment type"
                },
                {
                    "code" : "2",
                    "description" : "Proper equipment unavailable"
                },
                {
                    "code" : "3",
                    "description" : "No longer offer service"
                },
                {
                    "code" : "4",
                    "description" : "Out of my coverage area"
                },
                {
                    "code" : "3",
                    "description" : "Other"
                }
            ]
        },
        {
            "code" : "10",
            "description" : "Assigned"
        },
        {
            "code" : "20",
            "description" : "In Route"
        },
        {
            "code" : "30",
            "description" : "On Scene"
        },
        {
            "code" : "40",
            "description" : "Tow in Progress"
        },
        {
            "code" : "50",
            "description" : "Destination Arrival"
        },
        {
            "code" : "60",
            "description" : "Job Cleared"
        },
        {
            "code" : "70",
            "description" : "Cancel-SP Cancel",
            "possibleReasons":[
                {
                    "code" : "1",
                    "description" : "Do not accept payment type"
                },
                {
                    "code" : "2",
                    "description" : "Proper equipment unavailable"
                },
                {
                    "code" : "3",
                    "description" : "No longer offer service"
                },
                {
                    "code" : "4",
                    "description" : "Out of my coverage area"
                },
                {
                    "code" : "3",
                    "description" : "Other"
                }
            ]
        },
        {
            "code" : "80",
            "description" : "Cancel-Customer Cancel"
        },
        {
            "code" : "90",
            "description" : "Unsuccessful-No Vehicle"
        },
        {
            "code" : "95",
            "description" : "Unsuccessful-No Customer"
        },
        {
            "code" : "99",
            "description" : "Service Attempt Failed"
        }
    ]

###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST | Missing request header  'X-application-key'|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|
    
    
    


###Get Job Status Codes [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "code" : "0",
                    "description" : "Unassigned"
                },
                {
                    "code" : "2",
                    "description" : "New"
                },
                {
                    "code" : "3",
                    "description" : "Pending"
                },
                {
                    "code" : "4",
                    "description" : "Expired"
                },
                {
                    "code" : "5",
                    "description" : "Rejected"
                },
                {
                    "code" : "6",
                    "description" : "Refused",
                    "possibleReasons":
                    [
                        {
                            "code" : "1",
                            "description" : "Do not accept payment type"
                        },
                        {
                            "code" : "2",
                            "description" : "Proper equipment unavailable"
                        },
                        {
                            "code" : "3",
                            "description" : "No longer offer service"
                        },
                        {
                            "code" : "4",
                            "description" : "Out of my coverage area"
                        },
                        {
                            "code" : "3",
                            "description" : "Other"
                        }
                    ]
                },
                {
                    "code" : "10",
                    "description" : "Assigned"
                },
                {
                    "code" : "20",
                    "description" : "In Route"
                },
                {
                    "code" : "30",
                    "description" : "On Scene"
                },
                {
                    "code" : "40",
                    "description" : "Tow in Progress"
                },
                {
                    "code" : "50",
                    "description" : "Destination Arrival"
                },
                {
                    "code" : "60",
                    "description" : "Job Cleared"
                },
                {
                    "code" : "70",
                    "description" : "Cancel-SP Cancel",
                    "possibleReasons":[
                        {
                            "code" : "1",
                            "description" : "Do not accept payment type"
                        },
                        {
                            "code" : "2",
                            "description" : "Proper equipment unavailable"
                        },
                        {
                            "code" : "3",
                            "description" : "No longer offer service"
                        },
                        {
                            "code" : "4",
                            "description" : "Out of my coverage area"
                        },
                        {
                            "code" : "3",
                            "description" : "Other"
                        }
                    ]
                },
                {
                    "code" : "80",
                    "description" : "Cancel-Customer Cancel"
                },
                {
                    "code" : "90",
                    "description" : "Unsuccessful-No Vehicle"
                },
                {
                    "code" : "95",
                    "description" : "Unsuccessful-No Customer"
                },
                {
                    "code" : "99",
                    "description" : "Service Attempt Failed"
                }
            ]

## 12.9 Get Notification Type Codes [/enumerations/notificationTypeCodes] 
###Description

The "Get Notification Type Codes "API provides a list of possible notifications that can be sent by the Instant Dispatch API.

###Sample Request URL

/enumerations/notificationTypeCodes

###Request JSON

N/A

###Sample Request Body

N/A

###Repsonse JSON

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|  | Array of job status codes     |YES   |  JobStatusCode[]  |    
        
###Sample Repsonse Body

    [
        {
            "code" : "1",
            "description" : "New Job Offered"
        },
        {
            "code" : "2",
            "description" : "Job Refused"
        },
        {
            "code" : "3",
            "description" : "Job Accepted"
        }
    ]
    
###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST | Missing request header  'X-application-key'|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|
    
   
###Complete List of Notifications

The table below shows complete list of Notifications 

|  Status Code|Description   |  Currently available in phase I ?|
|:---------------|:-------------|:-------------| 
|1     |New Job Offered | Y           |
|2     | Job Refused | Y        |
|3      | Job Accepted  | Y       |
|4     | Job Assigned| Y      |
|5     |Job Cancelled | Y        |
|6   |Job Reassigned |   Y      |
|7    |ETA Rejected | Y        |
|8    |Job Approved |    Y     |
|9    | ETA Approaching(Job approved butu not assigned to Driv)  |  N    |
|10     |Time To Leave(Job/Driver assign is not en-route to DL)| N        |
|11     |ETA will not be met | N        |
|12   |ETA Expired     |  N        |
|13    | Dispatch Update  |    N     |
|14   | DispatchExpired    |   N      |
|15      |Dispatch Cancelled GOA Accepted  |    Y      |
|16    | ETA Accepted |  N      |
|17     |Test Notification|     Y     |
|18     |System Notification |    N      |

###Get Notification Type Codes [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            

+ Response 200 (application/json)

    + Body
    
            [
                {
                    "code" : "1",
                    "description" : "New Job Offered"
                },
                {
                    "code" : "2",
                    "description" : "Job Refused"
                },
                {
                    "code" : "3",
                    "description" : "Job Accepted"
                },
                …
            ]

# Group 13 Tracking API
## 13.1 Get Notify Current Location [/currentLocation]
### Description

The" Notify Current Location" API allows the driver to post their current location when he is off or on a job. 
The Client App can call this API based on the business rules predefined for a product.

### Sample Request URL

/currentLocation

### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    latitude           |  Represents the latitude  of driver’s geographic   location at that moment    |YES|Double|
|        longitude       | Represents the longitude of  driver’s geographic location  at that moment|YES|Double|

### Sample Request Body

POST http://agero-test.apigee.net/v1/id/trackingLocations HTTP/1.1

Host: agero-test.apigee.net

Content-Type: application/json

Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

{

"latitude" : 40.1234,

"longitude" : -70.1234
    
}

### Response Schema

N/A

### Sample Response

Http 200 OK

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed | One or more invalid parameters  we passed. See the innerErrors collection for a list of invalid parameters. This is returned if latitude / longitude is not provided | 
|500       | UNKNOWN     |Unknown Error   |An unknown error occurred at the server|

### Get Notify Current Location [POST]
+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "latitude" : 40.1234,
                "longitude" : -70.1234
            }

+ Response 200 ()

## 13.2 Provide Current Location of a driver [/drivers/{driverId}/currentLocation] 

### Description

The" Get Current Location of a driver" API allows the dispatcher/owner to post their current location for any driver location If he is off or on a job. 
The Client App can call this API based on the business rules predefined for a product.

### Sample Request URL

/drivers/12345/currentLocation

### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    latitude           |  Represents the latitude  of driver’s geographic   location at that moment    |YES|Double|
|        longitude       | Represents the longitude of  driver’s geographic location  at that moment|YES|Double|

### Sample Request Body

POST http://agero-test.apigee.net/v1/id/trackingLocations HTTP/1.1

Host: agero-test.apigee.net

Content-Type: application/json

Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

{

"latitude" : 40.1234,

"longitude" : -70.1234

}

### Response Schema

N/A

### Sample Response

Http 200 OK

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed | One or more invalid parameters  we passed. See the innerErrors collection for a list of invalid parameters. This is returned if latitude / longitude is not provided | 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Provide Current Location of a driver [POST]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "latitude" : 40.1234,
                "longitude" : -70.1234
            }

+ Response 200 ()

# Group 14 Application Metadata API
## 14.1 Provide Get Application Metadata [/apps/{appIdd}/vesrions/{version}] 
### Description

The" Get Application Version" API allows the app to check if there is a new version of the app available for download.
This is only meant for consumption by in-house developed apps but not meant for 3rd party vendors / partners

### Sample Request URL

/apps/hjh70908-hjhihih7990-hjhk/versions/4.1

### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    appId           |  Represents a unique   identifier of the application         |YES|GUID|
|    version#        | Represents the version# of the application currently running on the device |YES|Double|

### Sample Request Body

GET http://agero-test.apigee.net/v1/id/apps/hjh70908-hjhihih7990-hjhk /versions/4.1

HTTP/1.1

Host: agero-test.apigee.net

Accept: application/json

Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

### Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    appId           |  Represents a unique   identifier of the application         |YES|GUID|
|    appPlatform        |    Represents the platform of the application   |YES|Enum| Possible Values: Ios Android  WindowsWeb|
|    latestVersion        |    Represents the latest  version of the app |YES|Double|
|    appName        |    Represents the name of the app|YES|String| 
|    updateMandated  ToLatestVersion      |  Represents a flag indicating  if the previous versions should definitely be updated to this version or not |YES|Boolean| 

 
### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed | One or more invalid parameters  we passed. See the innerErrors collection for a list of invalid parameters. This is returned if latitude / longitude is not provided | 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|

### Provide Get Application Metadata [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
            {
                "appId": "",
                "appName":"Roadside Connect App",
                "platform":"ios",
                "versionNumber" : 4.1,
                "updateMandatedToLatestVersion":true
            }

# Group 15 OAuth2.0  Security API
The OAuth authorization code ('auth code' for short) grant type is defined in the OAuth 2.0 specification. 
The benefit of auth code grant type is that current Agero’s customer base can authorize third-party client apps to
consume Agero’s APIs on their behalf. This enables end users not to divulge AgeroSupport passwords to any entity 
except Agero. Agero as an API provider provides a Login app that authenticates end users and that supports the
    redirects associated with the auth code grant type. "Three-legged OAuth" is so named because the pattern involves 
three distinct interactions among cooperating entities. The three transactions are: 

1. Authenticate the app end user, authorize client app, and recieve an authorization code 
2. Exchange authorization code for access token 
3. Use access token to securely invoke protected resource (API) 

There are 5 entities who participate in this oAuth 'dance'.

| Name|Description  |Activities|Implemented by|
|:--------------|:-------------|:----------|:---|:-------------|   
| App end user   (Service Provider)       |  The human user of the client app       | Provides username/password to  authenticate, authorizes client app to act on her behalf   | N/A|
|     Client app        |  The app that accesses protected resource on behalf of the app  end user   | Redirects app end user to authorization server, exchanges auth code for access token, makes   request to protected resource (API) using access token|   App developer i.e. third party  partners  /vendors |
|     Login/Consent app         |  A web-based authentication form,  which provides an interface where   app end users authenticate with an API provider  |Validates app end user username/password, optionally displays consent information  |Agero|
|     Authorization    endpoint           |    URI that a client app calls to   exchange auth code for an access token| Verifies that an authorization code is valid for a client app. Returns access  tokens to client apps that present valid auth codes|Agero| 
|     Token endpoint      |  URI that a client app calls to  exchange auth code for an access token  |Verifies that an authorization code is valid for a client app. Returns access  tokens to client apps that present valid auth codes|Agero| 
|     Protected resource      |   A service that can be accessed via an API and which is protected by a policy that validates access tokens |API provider-specific data or services |Agero| 
   
   
The basic three-legged flow is:

### First leg: Part One
   
![FirstLeg:PartOne](https://apiportal.agero.com/sites/default/files/OAuthFirstlegpartone.jpg)

1.App end user navigates to client’s app

2.User initiates OAuth authentication process

3.The  client app invokes a URL on the authorization server

4.The authorization endpoint redirects the request (along with relevant information) to Agero Login app


### First leg: Part Two

![FirstLeg:PartTwo](https://apiportal.agero.com/sites/default/files/OAuthFirstlegparttwo.jpg)

1.Agero  Login app collects the Service Provider’s username and password. (The Login app provides a way for the app end user to authorize the app to access the API on her behalf.)

2.Once authenticated, the Service Provider is redirected, along with an auth code, back to client app.

3.The client app handles a call back from the authorization endpoint to obtain the access token from the response. (The authorization endpoint uses the "Callback URL" configured in the profile for the client app to make this callback.)


### Second leg:

![SecondLeg](https://apiportal.agero.com/sites/default/files/OAuthSecondleg.jpg)

1.The app generates a request for an access token. The request includes the auth code from the first leg, along with the app's consumer key and secret.

2.The app sends this request to a token endpoint, whose URL has been provided out-of-band.

3.The token endpoint validates the auth code and the app credentials, and, if they are valid, generates an access token.

4.The token endpoint returns the access token to the client app.


### Third leg:

![ThirdLeg](https://apiportal.agero.com/sites/default/files/OAuthThirdleg.jpg)

1.The app generates a request that includes the access token to the protected API

2.The protected API validates the access token and evaluates any 'scope' parameters attached to the request

3.If the access token is valid for the request API resource and scope, then the resource is returned to the app.

The app developer must implement an auth code client capable of generating the three requests.

## 15.1 Authorize 3rd Party App [/oauth/authorize?client_id={consumer_key}&response_type=code&scope=READ&state={state_string}] 
### Description

URI that a client app calls to for authorization . Redirects app end user to Login app, validates client app's consumer key

### Sample Request URL

/oauth/authorize?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&response_type=code&scope=READ&state=foobar"

### Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Client_id           |   Represents the consumer  key of the app        |YES|String|
|    Response_type        |    Represents the response  type  |YES|Enum| Static Value: code|
|    Scope        |    Represents the privileges being requested   |YES|Enum|PossibleValues: READ WRITE|   
|    State        |    This parameter is designed  to prevent cross-site request forgery attacks  The server sends this  string back in the|YES|String| 

### Sample Request

GET https://api-test.enterprise.agero.com/v1/id/oauth/authorize?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&response_type=code&scope=READ&state=foobar

HTTP/1.1

Host: api-test.enterprise.agero.com

Accept: application/json

### Sample Response

HTTP/1.1 302 Found 

Location:login.Agero.com?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&scope=READ&state=foobar

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed | One or more invalid parameters  we passed. See the innerErrors collection for a list of invalid parameters. This is returned if latitude / longitude is not provided | 
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Authorize 3rd Party App [GET]

+ Request ()

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
+ Response 200 (application/json)

    + Body
    
              Location:login.Agero.com?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&scope=READ&state=foobar
              
## 15.2 Authenticate User [/oauth/authenticate]
### Description

URI that a client app calls to for authorization . Redirects app end user to Login app, validates client app's consumer key

### Sample Request URL

/oauth/authenticate

### Request Headers

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Authorization           |  Authorization header  containing a base64 encoded  string of  ConsumerKey:ConsumerSecret    |YES|String|

### Sample Request Headers

Authorization: THZ3dm8zUWVHaVdOYFtdmRoU1dTUmVaODhzdTg6Qk5nNmF4bklSSm93bThHUw==

### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Username           | The service provider’s AgeroSupport.com username       |YES|String|
|    Password           |   The service provider’s AgeroSupport.com password    |YES|String|
|    clientId           | Represents the unique    client identifier of the app |YES|String|

### Sample Request Body

    {
        "username" : "efudd",
        "password" : "Password123",
        "clientId" : " gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq"
    }

### Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    profileId           | The profile id of the user    |YES|String|
|    username           |  The unique username of the currently logged-in user. This will also be the claim identity     |YES|String|
|    firstName           |The first name of the authenticated user  |YES|String|
|    lastName           |  The last name of the  authenticated user   |YES|String|
|    role           | Role the User belongs to.  – {Owner, Manager, Dispatcher , Driver}   |YES|String|
|    vendorId           | Vendor Id     |YES|String|
|    dispatchClientId           |      |||

### Sample Response

    HTTP/1.1 200 OK
    Content-Type: application/json
    Content-Length: 273
    
        {
            "vendorId":"57515",
            "profileId":"3950",
            "username":"protow5",
            "firstName":"John",
            "lastName":"Smith",
            "role":"Dispatching",
            "dispatchClientId":"80ead25d-aa43-4b03-8e3a-2c85e1b5dc5e"
        }

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING| Must provide a username and password |   A username and/or password  was not provided| 
|401       |INVALID_CLIENT|  Client identifier is required|An API key was not supplied| 
|401       |INVALID_CLIENT|  Client credentials are invalid|The API key supplied is invalid| 
|401       |INVALID_CREDENTIALS   | Invalid Username or Password |Could not authenticate with the supplied with the supplied credentials| 
|401       |ACCOUNT_LOCKED|  Account is Locked  |The User’s account is locked| 
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Authenticate User [GET]

+ Request (application/json)

    + Header

            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
            
    + Body
    
            {
                "username" : "efudd",
                "password" : "Password123",
                "clientId" : " gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq"
            }
            
            
+ Response 200 (application/json)

    + Body
    
            {
                "vendorId":"57515",
                "profileId":"3950",
                "username":"protow5",
                "firstName":"John",
                "lastName":"Smith",
                "role":"Dispatching",
                "dispatchClientId":"80ead25d-aa43-4b03-8e3a-2c85e1b5dc5e"
            }

## 15.3 Generate Authorization Code [/oauth/authorizationcode?client_id&response_type=code&scope=READ&state&vendor_id&profile_id&role&user_name&dispatch_client_id] 
### Description

URI that a login app calls to generate an authorization code . Redirects app end user to cleint app

### Sample Request URL

oauth/authorizationcode?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&response_type=code&scope=READ&state=foobar&
vendor_id=57510&driver_id=111111&role=driver&username=protow&dispatchClientId=80ead25d-aa43-4b03-8e3a-2c85e1b5dc5e "


### Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Client_id           |   Represents the consumer  key of the app        |YES|String|
|    Response_type        |    Represents the response  type  |YES|Enum| Static Value: code|
|    Scope        |    Represents the privelages being requested   |YES|Enum|PossibleValues: READ WRITE|   
|    State        |    This parameter is designed  to prevent cross-site request forgery attacks  The server sends this  string back in the|YES|String| 
|    vendor_id           |   R Represents the vendor id of    the authenticated user    |YES|String|
|    profile_id        |     Represents the profile id of   the authenticated user |YES|String|
|    role        |      Represents the role of the   authenticated user |YES|Enum|PossibleValues: READ WRITE|   
|    user_name        |    Represents the username of the authenticated user|YES|String| 
|    dispatch_client_id        |  |YES|String| 

### Sample Request

GET https://api-test.enterprise.agero.com/v1/id/oauth/authorizationcode?client_id=gqg0KozKvJdVRrjSiFsAMwMv0P02gOuq&response_type=code&scope=READ&state=foobar&
vendor_id=57510&driver_id=111111&role=driver&username=protow&dispatchClientId=80ead25d-aa43-4b03-8e3a-2c85e1b5dc5e

Host: api-test.enterprise.agero.com

Accept: application/json

                            
### Sample Response

HTTP/1.1 302 Found
Location:login.clientapp.com?scope=READ&state=foobar&code={auth_code}

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING|  Request Validation failed |   One or more invalid parameters we passed See the innerErrors collection for a list  of invalid parameters. This is returned if latitude / longitude is not provided| 

### Generate Authorization Code [GET]
+ Parameters

    + client_id (required, number) ... client id
    + response_type (required, string,`code`) ... response type
    + scope  (required, string,`READ`) ... scope
    + state (required, string) ... state
    + vendor_id (required, number) ... vendor id
    + profile_id (required, number) ... profile_id
    + role (required, string) ... role
    + dispatch_client_id (required, number) ... Maximum number of posts ot retrieve
    + user_name (required, string) ... Maximum number of posts ot retrieve

+ Request ()

   + Header 
   
            Accept: application/json


+ Response 200 ()

        Location:login.clientapp.com?scope=READ&state=foobar&code={auth_code}
        
## 15.4 Get Access Token [/oauth/accesstoken?grant_type=authorization_code&code={authcode}] 

### Description

URI that a client app calls to exchange auth code for an access token.Verifies that an authorization code is valid for a client app. 
Returns access tokens to client apps that present valid auth codes.

### Sample Request URL

/oauth/accesstoken?grant_type=authorization_code&code=neIu0d8e


### Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    grant_type | Represents the grant type being requested|YES| Enum Only |possible value :  authorization_code|
|    Code           | Represents the auth code       |YES| Enum|

### Request Headers

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|   Authorization |  Authorization header containing a  base64 encoded string of  ConsumerKey:ConsumerSecret |YES| String|

### Sample Request

GET https://api-test.enterprise.agero.com/oauth/accesstoken?grant_type=authorization_code
&code=neIu0d8

HTTP/1.1

Authorization: Basic

WExvdEwzUFJ4TmtVR1hoR0FGRFBPcjZmcXR2QWh1WmU6aU5VeUVhT09oOTZLUjNZTA==

Host: api-test.enterprise.agero.com

Accept: application/json

     
### Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|  userClaim|The User Claim containing    role information   |YES| UserClaim |
|    Token             |Valid OAuth 2.0 SWT token  information      |YES| Token|

### Sample Response

    HTTP/1.1 200 OK
    Content-Type: application/json
    Content-Length: 273 

    { 
    "userClaim": 
        { 
            "vendorId": "16544", 
            "profileId": "250124", 
            "username": "clmarodp1", 
            "role": "Dispatching" 
        }, 
    "token": 
        {
            "access_token": "abrfa6znEBkcdL3Lh4lIZpauH8F2", 
            "expires_in": "0", 
            "refresh_token": "xx5i5goxuC8Lpk1VRGoHxbaTYyyyBFGp", 
            "refresh_count": "0" 
        } 
    }

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |REQUEST_PARAMETER_MISSING|Request Validation failed| One or more invalid parameters we passed See the innerErrors collection for a list of invalid parameters. This is returned if  latitude / longitude is not provided| 
|400       |INVALID REQUEST|   Invalid Authorization Code |Provided auth code is not valid / already used  | 
|400       | INVALID REQUEST | Unsupported grant  type : xxxxxx |Provided grant_type is invalid| 

### Get Access Token [GET]

+ Request ()

   + Header 
   
            Accept: application/json



+ Response 200 (application/json)

    + Body
    
            { 
            "userClaim": 
                { 
                    "vendorId": "16544", 
                    "profileId": "250124", 
                    "username": "clmarodp1", 
                    "role": "Dispatching" 
                }, 
            "token": 
                {
                    "access_token": "abrfa6znEBkcdL3Lh4lIZpauH8F2", 
                    "expires_in": "0", 
                    "refresh_token": "xx5i5goxuC8Lpk1VRGoHxbaTYyyyBFGp", 
                    "refresh_count": "0" 
                } 
            }
            
## 15.5 Revoke Access Token [/oauth/accesstoken]

### Description

URI that one can call to revoke an access token that’s previously issued.

### Sample Request URL

/oauth/accesstoken


### Request Headers

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Authorization | Authorization header containing   the access token    |YES| String |

### Sample Request

DELETE https://api-test.enterprise.agero.com/oauth/accesstoken

HTTP/1.1

Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

Host: api-test.enterprise.agero.com

     
### Sample Response

    HTTP/1.1 200 OK

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID ACCESS TOKEN | |Provided Access token is not provided / not valid| 
|404       |RESOURCE NOT FOUND   | | Resource URI is invalid / does not exist| 

###Revoke Access Token [DELETE]

+ Request ()

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

+ Response 200 ()


# Group 16 Server to server Notifications API
Set of APIs in this section have been designed to be used by third party developers who expect to receive notifications from Roadside Connect to the applications or services running on their servers.  These are different than device push notifications directly sent to mobile devices (see section 9 in this document).  
A third party who wishes to receive notifications using this method need to implement as REST service on their end as specified in 16.2 Receive Server Notification.

The server to server notification process can be described in brief in following steps

•   Register for notifications, provide a callback url and notification token

•   Implement a REST endpoint point on their own server 

•   Receive notification  

•   Acknowledge (Optional)
## 16.1 Subscribe To Server Notifications [/serverNotifications/subscribe] 
### Description

The "Server to Server Notifications" API allows app users to register their applications so that app users 
can receive notifications from Roadside Connect on their server.

### Sample Request URL

/serverNotifications/subscribe


### Request JSON

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    callBackUrl |  Url that will be called    back to notify       |YES| String |API server will call this URL to notify the events in Roadside connect|
|    notificationToken |  The notification Token for security    |YES/NO| String | Security token which reviving  server has to validate    |
|    notificationEvents |  List of events to be notified            |NO|  List of Notification  Types consumer  is interested  in  | if not specified subscribes to all event s as applicable Refer to "Get Notification Type" for detailed values of notification events|

   
### Sample Request

    {
        "callBackUrl" : "http://yourServename/.../notify",
        "notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
        "notificationEvents" : "1,2,3,…"
    }

     
### Sample Response

    HTTP 200

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |INVALID_REQUEST| Missing callback URL. | 
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|
### Subscribe To Server Notifications [POST]

+ Request (application/json)

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

    + Body
    
            {
                " callBackUrl" : "http://yourServename/.../notify",
                " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                " notificationEvents" : "1,2,3,…"
            }

+ Response 200 ()

## 16.2 Receive Server Notification [/serverNotifications/notify] 

### Description

This API as specified here needs to be implemented by notification receiving third parties on their end.
API will allow drivers and dispatchers to receive notification on their registered servers. Please refer to 
section 12.10 for detail list of notification codes.

### Sample Request URL

https://yourServerName/…/ serverNotifications/notify


### Request Headers

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    Authorization | Notification Token previously  supplied via serverNotification  /subscribe API       |YES| String | Receiving party has to validate this token for security purpose|

   
### Request JSON

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    notificationEventId |  Uniquely identifies this  particular event notification  across all notifications sent,    |YES| number |This can be used to identify duplicates received due to failure-retry process|
|    notificationCode |    Notification Code      |YES |  Integer  |  Possible Values: 1,2,3,... |
|    vendorId | Represents the unique identifier of the Vendor   the notification is meant for         |YES| String |
|    dispatchRequestNumber | The dispatchRequestNumber         |YES| Integer |
|    title |  Title of the Notification   |NO | String |
|    message |   The message body of the notification          |NO|  String | 
  
   
### Sample Request

    {
        "notificationEventId" : "123456789",
        "notificationCode" : "1",
        "dispatchRequestNumber" : 123456789,
        "title" : "New Offer",
        "message" : "You have a new job."
    }
     
### Sample Response

    HTTP 200

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING|INVALID_REQUEST| Missing callback URL|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Receive Server Notification [POST]

+ Request (application/json)

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

    + Body
    
            {
                "notificationEventId" : "123456789",
                "notificationCode" : "1",
                "dispatchRequestNumber" : 123456789,
                "title" : "New Offer",
                "message" : "You have a new job."
            }

+ Response 200 ()


## 16.3 Acknowledge Notification [/serverNotifications/{notificationEventId}/acknowledge] 
### Description

This API can be called asynchronously to acknowledge the notification was received.

### Sample Request URL

/serverNotifications/329345447/acknowledge


### Request URI Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|    notificationEventId |  Identifier of the event   notification received   |YES| number |

   
### Request JSON

Empty, not required

### Response JSON

Empty, not required

### Sample Response Body

HTTP/1.1 200 OK

### Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|403       |Forbidden |  FORBIDDEN_RESOURCE  |  The resource is not allowed by the current user.|   Drivers view or refuse job offers | 
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Acknowledge Notification [PUT]

+ Request ()

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

+ Response 200 ()

## 16.4,16.5 & 16.7 Update,Unsubscribe and Get Server Notifications [/serverNotifications/subscriptions/{subscriptionid}] 

### 16.4 Update Server Notifications Subscription 

###Description

The "Update Server Notifications Subscription" API allows app users to update their subscription i.e. either change the callback URL  / change the notification token.

###Sample Request URL

PUT /serverNotifications/subscriptions/34646346

###Response JSON

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|callBackUrl     |   Url  that will be called back to notify       |YES| String  |API server will call this URL to notify 
|notificationToken     |   The notification Token for security       |YES/NO| String  |Security token which reviving server has to validate  
|notificationEvents     |   List of events to be notified       |NO| List of Notification Types consumer is interested in  |if not specified subscribes to  all event s as applicable. Refer to "Get Notification Type  for detailed values of notification events.

###Sample Request

       {
           "callBackUrl": "http://yourServename/.../notify",
           "notificationToken": "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
           "notificationEvents": "1,2,3,…"
       }


###Request Schema

N/A    

###Sample Response

HTTP 20O Ok

###Errors 

  
|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |INVALID_REQUEST|Missing callback URL|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


### 16.5 Unsubscribe Server Notifications 

###Description

The "unsubscribe Server Notifications" API allows app 
users not receive server to server notifications any more.

###Sample Request URL

DELETE /serverNotifications/subscriptions/34646346

###Request Schema

N/A

### Sample Request
    DELETE https://api-test.enterprise.agero.com/v1/id/serverNotifications/subscriptions/34646346
    Host: api-test.enterprise.agero.com
    Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

###Response Schema

N/A
     
###Sample Response

HTTP 200

###Errors

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |INVALID_REQUEST|Missing callback URL|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


### 16.7 Get a Server Notifications Subscription

###Description

The "Get a Server Notifications Subscription" API allows 
clients to retriev details of a subscription identified by subscriptionId

###Sample Request URL

GET /serverNotifications/subscriptions/{subscriptionId}

###Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|     |   Represents server  notification subscription       |YES| ServerNotificationSubscription[]  |

###Sample Request

       GET https://api-test.enterprise.agero.com/v1/id/serverNotifications/subscriptions/345345346
       Host: api-test.enterprise.agero.com 
       Authorization:Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

###Request Schema

N/A    

###Sample Response

HTTP 20O Ok

###Errors 

  
|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |INVALID_REQUEST|Missing callback URL|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


### Update Server Notifications Subscription [PUT]

+ Request ()

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

    
+ Response 200 ()

   + Body
            
            [
                {
                    " callBackUrl" : "http://yourServename/.../notify",
                    " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                    " notificationEvents" : "1,2,3"
                }
            ]


### Unsubscribe Server Notifications [DELETE]

+ Request ()

   + Header 
   
            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()


### Server Notification Subscriptions [GET]

+ Request ()

   + Header 
   
            Authorization: Bearer WExvdEwzUFJ4TmtVR1hoR0FGRF

    
+ Response 200 ()

   + Body
            
            [
                {
                    " susbscriptionId" : "34534563",
                    " callBackUrl" : "http://yourServename/.../notify",
                    " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                    " notificationEvents" : "1,2,3"
                }
            ]



## 16.6 Get Server Notification Subscriptions [/vendors/{vendorId}/serverNotifications/subscriptions] 

### Description

The "Get Server Notifications Subscriptions" API allows internal apps to 
retrieve a list of server notification subscriptions for a given vendor

### Sample Request URL

GET /vendors/57515 /serverNotifications/subscriptions

### Response Schema


| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|     |   Represents a list  |YES| ServerNotificationSubscription[]  |

### Sample Request

    GET https://api-test.enterprise.agero.com/v1/id/vendors/57515/serverNotifications/subscriptions
    Host: api-test.enterprise.agero.com 
    Authorization:7z9ZeGyweG98YMAyB0iSm2EiB6bD


### Request Schema

N/A    

### Sample Response

HTTP 200

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |INVALID_REQUEST|Missing callback URL|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

### Get Server Notification Subscriptions [GET]

+ Request ()

   + Header 
   
            Authorization: 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()

   + Body
            
            [
            {
                " susbscriptionId" : "34534563",
                " callBackUrl" : "http://yourServename/.../notify",
                " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                " notificationEvents" : "1,2,3" 
            },
            {
                " susbscriptionId" : "34534564",
                " callBackUrl" : "http://yourServename/.../notify",
                " notificationToken" : "IYIOUIUITIT689768JHGJ",
                " notificationEvents" : "1"
            }
            ]    
 


 
# Group 17 User Guide API

## 17.1 Get User Guide List [/apps/{appIdd}/vesrions/{version}/userGuides?userGuideType={userGuideType}] 
### Description

The" Get User Guide List" API allows the client to retrieve
available user guides for a given app/version

### Sample Request URL

/apps/hjh70908-hjhihih7990-hjhk/versions/4.1/userGuides?userGuideType=2


### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| appId    |    Represents a unique identifier    of the application     |YES| GUID |
| version#    |   Represents the version# of the  application  currently running on  the device   |YES| Double |
| userGuideType    |   Represents the type of the  userGuide being requested         |NO| Enum |Refer to "UserGuideTypes" Enum  for possible values.If not provided all user guides will be returned|

   
                                                                                                
### Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| appId    |   Represents the list of User Guides    |YES| UserGuide[]   |

                                                                                   
### Sample Request                                                                               

    {
        GET https://api-test.enterprise.agero.comt/v1/id/ apps/hjh70908-hjhihih7990-hjhk /versions/4.1/userGuides?userGuideType=2
        HTTP/1.1
        Host: api-test.enterprise.agero.comt
        Accept: application/json
        Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    }
    

### Sample Response

HTTP 200

        [
        {
        "userGuideId":"532524",
        "userGuideTitle":"Quick Start Guide",
        "userGuideType":"2",
        "userGuideUrl":"xxxxxxxxxxx"
        }
        ]

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING| Request Validation failed.|One or more invalid parameters we passed See the innerErrors collection for a list  of invalid parameters. This is returned if latitude / longitude is not provided|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 

### Get User Guide List [GET]

+ Request ()

   + Header 
   
            Authorization: 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()

   + Body
            
            {
                "userGuideId":"532524",
                "userGuideTitle":"Quick Start Guide",
                "userGuideType":"2",
                "userGuideUrl":"xxxxxxxxxxxxxxxxxxxx"
            }


## 17.2 Get a User Guide [/ apps/{appIdd}/vesrions/{version}/userGuides/{userGuideId}] 

### Description

The" Get a User Guide" API allows the client to retrieve a given user guide identified by its ID

### Sample Request URL

/apps/hjh70908-hjhihih7990-hjhk/versions/4.1/userGuides/532524


### Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| appId    |    Represents a unique identifier    of the application     |YES| GUID |
| version#    |   Represents the version# of the  application  currently running on  the device   |YES| Double |
| userGuideId   |   Represents the type of the  userGuide being requested         |YES| String |

### Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
|     |   Represents the list of User Guides    |YES| UserGuide[]   |


### Sample Request                                                                               

    {
        GET https://api-test.enterprise.agero.comt/v1/id/ apps/hjh70908-hjhihih7990-hjhk /versions/4.1/userGuides/532524
        HTTP/1.1
        Host: api-test.enterprise.agero.comt
        Accept: application/json
        Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD
    }
    

### Sample Response

HTTP 200

       {
            "userGuideId":"532524",
            "userGuideTitle":"Quick Start Guide",
            "userGuideType":"2",
            "userGuideUrl":"xxxxxxxxxxxxxxxxxxxx"
        }

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|400       |REQUEST_PARAMETER_MISSING| Request Validation failed.|One or more invalid parameters we passed See the innerErrors collection for a list  of invalid parameters. This is returned if latitude / longitude is not provided|
|500       | UNKNOWN      |Unknown Error   |An unknown error occurred at the server| 


### Get a User Guide [GET]

+ Request ()

   + Header 
   
            Authorization: 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()

   + Body
            
            {
                "userGuideId":"532524",
                "userGuideTitle":"Quick Start Guide",
                "userGuideType":"2",
                "userGuideUrl":"xxxxxxxxxxxxxxxxxxxx"
            }


# Group 18 Route API

## 18.1 Get Mapped Route [/mappedRoute?startLat={lat}&startLng={long}&endLat={lat}&endLng={long}&returnWayPointsOnly={returnWayPointsOnly}&returnDirections={returnDirectons}] 

###Description

The Get Mapped Route API retrieves shortest distance,list of waypoints and 
turn by turn directions for a given set of start and end points.

###Sample Request URL

/mappedRoute?startLat=42.375286&startLng=-71.225447&endLat=42.407995&endLng=-71.074041&returnWayPointsOnly=true&returnDirections=false


###Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| StartLat    |    Latitude of the starting point      |YES| Double |
| StartLng    |  Longitude of the starting point  |YES| Double |
| EndLat    |  Latitude of the end point         |YES| Double |
| EndLng  |  Longitude of the end point     |Yes| Double |
| returnWayPointsOnly    |  Setting this to true retrieves   Waypoints only    |No| Boolean |
| returnDirections    |  Setting this to true retrieves  turn by turn directions|  |  |  Default Value: false  |
                                                                     
                                                                                                
###Response JSON

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|   
| Route    |       Represents the route between requested starting & ending points|YES| Route |

###Sample Response

    1. returnWayPointsOnly = true returnDirections = false
    
        {  
           "summary":{  
              "name":"Calculated Route",
              "distanceInMiles":14.253904686627958,
              "timeInMinutes":35.181666666666665,
              "startLocation":{  
                 "lat":42.375286,
                 "lon":-71.225447
              },
              "endLocation":{  
                 "lat":42.407995,
                 "lon":-71.074041
              }
           },
           "points":[  
              {  
                 "lat":42.375286661105548,
                 "lon":-71.225446386661915
              },
              {  
                 "lat":42.375770799861584,
                 "lon":-71.22572533641609
              },
              {  
                 "lat":42.375777505384548,
                 "lon":-71.2252452209738
              },
              {  
                 "lat":42.377722107036249,
                 "lon":-71.220807505894157
              },
              {  
                 "lat":42.365390650355266,
                 "lon":-71.184639256277038
              },
              {  
                 "lat":42.358575156842193,
                 "lon":-71.159344682654421
              },
              {  
                 "lat":42.353584906672523,
                 "lon":-71.137460537997512
              },
              {  
                 "lat":42.353478959410126,
                 "lon":-71.07147551008913
              },
              {  
                 "lat":42.351889750474072,
                 "lon":-71.070685599487163
              },
              {  
                 "lat":42.355685076456382,
                 "lon":-71.069141988107091
              },
              {  
                 "lat":42.355364552459974,
                 "lon":-71.0728394134545
              },
              {  
                 "lat":42.357955566522804,
                 "lon":-71.07252827719023
              },
              {  
                 "lat":42.3642386415147,
                 "lon":-71.0699372631274
              },
              {  
                 "lat":42.371634833314118,
                 "lon":-71.06741330429395
              },
              {  
                 "lat":42.390863590887989,
                 "lon":-71.082939272102081
              },
              {  
                 "lat":42.392851107886486,
                 "lon":-71.0841060330931
              },
              {  
                 "lat":42.404199534904933,
                 "lon":-71.081870411745925
              },
              {  
                 "lat":42.404643440523358,
                 "lon":-71.081144874164153
              },
              {  
                 "lat":42.404231721415016,
                 "lon":-71.076121096379822
              },
              {  
                 "lat":42.404001051426008,
                 "lon":-71.075229261829207
              },
              {  
                 "lat":42.406575972233782,
                 "lon":-71.076681678097344
              },
              {  
                 "lat":42.406778479026457,
                 "lon":-71.074492995410736
              },
              {  
                 "lat":42.407010490120086,
                 "lon":-71.074322675128144
              }
           ],
           "tbtDirections":[  
        
           ]
        }

    2. returnWayPointsOnly = true returnDirections = true

        {  
           "summary":{  
              "name":"Calculated Route",
              "distanceInMiles":14.253904686627958,
              "timeInMinutes":35.181666666666665,
              "startLocation":{  
                 "lat":42.375286,
                 "lon":-71.225447
              },
              "endLocation":{  
                 "lat":42.407995,
                 "lon":-71.074041
              }
           },
           "points":[  
              {  
                 "lat":42.375286661105548,
                 "lon":-71.225446386661915
              },
              {  
                 "lat":42.375770799861584,
                 "lon":-71.22572533641609
              },
              {  
                 "lat":42.375777505384548,
                 "lon":-71.2252452209738
              },
              {  
                 "lat":42.377722107036249,
                 "lon":-71.220807505894157
              },
              {  
                 "lat":42.365390650355266,
                 "lon":-71.184639256277038
              },
              {  
                 "lat":42.358575156842193,
                 "lon":-71.159344682654421
              },
              {  
                 "lat":42.353584906672523,
                 "lon":-71.137460537997512
              },
              {  
                 "lat":42.353478959410126,
                 "lon":-71.07147551008913
              },
              {  
                 "lat":42.351889750474072,
                 "lon":-71.070685599487163
              },
              {  
                 "lat":42.355685076456382,
                 "lon":-71.069141988107091
              },
              {  
                 "lat":42.355364552459974,
                 "lon":-71.0728394134545
              },
              {  
                 "lat":42.357955566522804,
                 "lon":-71.07252827719023
              },
              {  
                 "lat":42.3642386415147,
                 "lon":-71.0699372631274
              },
              {  
                 "lat":42.371634833314118,
                 "lon":-71.06741330429395
              },
              {  
                 "lat":42.390863590887989,
                 "lon":-71.082939272102081
              },
              {  
                 "lat":42.392851107886486,
                 "lon":-71.0841060330931
              },
              {  
                 "lat":42.404199534904933,
                 "lon":-71.081870411745925
              },
              {  
                 "lat":42.404643440523358,
                 "lon":-71.081144874164153
              },
              {  
                 "lat":42.404231721415016,
                 "lon":-71.076121096379822
              },
              {  
                 "lat":42.404001051426008,
                 "lon":-71.075229261829207
              },
              {  
                 "lat":42.406575972233782,
                 "lon":-71.076681678097344
              },
              {  
                 "lat":42.406778479026457,
                 "lon":-71.074492995410736
              },
              {  
                 "lat":42.407010490120086,
                 "lon":-71.074322675128144
              }
           ],
           "tbtDirections":[  
              "Start location: Depart '50 Centre St' and turn north.",
              "At end of 'Centre St', turn right onto 'Massasoit Ct'. Now traveling East for 0.05 miles.",
              "At end of 'Massasoit Ct', turn left onto 'Massasoit St'. Now traveling North for 0.02 miles.",
              "Take the fourth right onto 'Main St [US-20 W W/US-20 E E]'. Now traveling East for 0.31 miles.",
              "Note: Name changes to N Beacon St [US-20 E E].",
              "Road splits into two. Stay right for N Beacon St [US-20 E E]. Now traveling East for 3.50 miles.",
              "Note: Name changes to Brighton Ave [US-20 W W/US-20 E E].",
              "Turn right after Clarendon St [MA-28] onto 'Arlington St [MA-2]'. Now traveling South-East for 4.64 miles.",
              "Take the first left onto 'Boylston St [MA-2]'. Now traveling North-East for 0.12 miles.",
              "Take the first left onto 'Charles St S [MA-28/MA-2]'. Now traveling North-West for 0.39 miles.",
              "Take the second right onto 'David G Mugar Way [MA-28]'. Now traveling North-West for 0.21 miles.",
              "Note: Name changes to Embankment Rd [Storrow Dr/MA-28].",
              "Take ramp to I-93 N N. Now traveling North for 0.67 miles.",
              "Road splits into two. Stay right for Ramp. Now traveling North-West for 0.87 miles.",
              "Take exit 29 to Fellsway [MA-28]. Now traveling North for 1.66 miles.",
              "Road splits into two. Stay right for Ramp. Now traveling North-West for 0.15 miles.",
              "Road splits into two. Stay right. Now traveling North-East for 0.83 miles.",
              "Note: Name changes to Revere Beach Pkwy [MA-16].",
              "Take exit after 1/4 mi. Now traveling South-West for 0.31 miles.",
              "Take the third right. Now traveling South-West for 0.05 miles.",
              "Take the second right onto 'Cabot Rd'. Now traveling East for 0.25 miles.",
              "Take the first left onto 'Cabot Rd'. Now traveling North-West for 0.12 miles.",
              "End location, 'Cabot Rd' is on the left after about 160 yd."
           ]
        }



###Get Mapped Route [GET]

+ Request ()

   + Header 
   
            Authorization: Bearer 7z9ZeGyweG98YMAyB0iSm2EiB6bD

+ Response 200 ()

    + Body
    
            returnWayPointsOnly = true returnDirections = false
            {
                "summary":{  
                  "name":"Calculated Route",
                  "distanceInMiles":14.253904686627958,
                  "timeInMinutes":35.181666666666665,
                  "startLocation":{  
                     "lat":42.375286,
                     "lon":-71.225447
                  },
                  "endLocation":{  
                     "lat":42.407995,
                     "lon":-71.074041
                  }
               },
               "points":[  
                  {  
                     "lat":42.375286661105548,
                     "lon":-71.225446386661915
                  },
                  {  
                     "lat":42.375770799861584,
                     "lon":-71.22572533641609
                  },
                  {  
                     "lat":42.375777505384548,
                     "lon":-71.2252452209738
                  },
                  {  
                     "lat":42.377722107036249,
                     "lon":-71.220807505894157
                  },
                  {  
                     "lat":42.365390650355266,
                     "lon":-71.184639256277038
                  },
                  {  
                     "lat":42.358575156842193,
                     "lon":-71.159344682654421
                  },
                  {  
                     "lat":42.353584906672523,
                     "lon":-71.137460537997512
                  },
                  {  
                     "lat":42.353478959410126,
                     "lon":-71.07147551008913
                  },
                  {  
                     "lat":42.351889750474072,
                     "lon":-71.070685599487163
                  },
                  {  
                     "lat":42.355685076456382,
                     "lon":-71.069141988107091
                  },
                  {  
                     "lat":42.355364552459974,
                     "lon":-71.0728394134545
                  },
                  {  
                     "lat":42.357955566522804,
                     "lon":-71.07252827719023
                  },
                  {  
                     "lat":42.3642386415147,
                     "lon":-71.0699372631274
                  },
                  {  
                     "lat":42.371634833314118,
                     "lon":-71.06741330429395
                  },
                  {  
                     "lat":42.390863590887989,
                     "lon":-71.082939272102081
                  },
                  {  
                     "lat":42.392851107886486,
                     "lon":-71.0841060330931
                  },
                  {  
                     "lat":42.404199534904933,
                     "lon":-71.081870411745925
                  },
                  {  
                     "lat":42.404643440523358,
                     "lon":-71.081144874164153
                  },
                  {  
                     "lat":42.404231721415016,
                     "lon":-71.076121096379822
                  },
                  {  
                     "lat":42.404001051426008,
                     "lon":-71.075229261829207
                  },
                  {  
                     "lat":42.406575972233782,
                     "lon":-71.076681678097344
                  },
                  {  
                     "lat":42.406778479026457,
                     "lon":-71.074492995410736
                  },
                  {  
                     "lat":42.407010490120086,
                     "lon":-71.074322675128144
                  }
               ],
               "tbtDirections":[  
               ]                
            }
    
        
# Group 22 Feedback API
## 22.1 Get Feedback Option Tree  [/Feedback/feedbackOptionTree] 

### Description

Allows the user to retrieve feedback option hierarchy tree.

### Sample Request URL

/Feedback/feedbackOptions


### Request Schema

N/A

### Response Json

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
|     |  Collection of feedbackOption  branches |YES|  FeedbackOptionBranch[]    |


### Sample Response

     HTTP/1.1 200 Ok
            [  
   {  
      "feedbackCategory":{  
         "code":"1",
         "description":"Job Details"
      },
      "feedbackSubjects":[  
         {  
            "code":"1",
            "description":"Customer Info"
         },
         {  
            "code":"2",
            "description":"Vehicle Info"
         },
         {  
            "code":"3",
            "description":"Service Needed Info"
         },
         {  
            "code":"4",
            "description":"Equipment Info"
         },
         {  
            "code":"5",
            "description":"Address Info"
         },
         {  
            "code":"6",
            "description":"Suggestion"
         },
         {  
            "code":"7",
            "description":"Question"
         },
         {  
            "code":"8",
            "description":"Compliment"
         },
         {  
            "code":"9",
            "description":"Other"
         }
      ]
   },
   {  
      "feedbackCategory":{  
         "code":"2",
         "description":"Roadside Connect App"
      },
      "feedbackSubjects":[  
         {  
            "code":"10",
            "description":"Maps"
         },
         {  
            "code":"11",
            "description":"signatures"
         },
         {  
            "code":"12",
            "description":"Status Info"
         },
         {  
            "code":"13",
            "description":"Job Offer Functionality"
         },
         {  
            "code":"14",
            "description":"Driver Assignment"
         },
         {  
            "code":"6",
            "description":"Suggestion"
         },
         {  
            "code":"7",
            "description":"Question"
         },
         {  
            "code":"8",
            "description":"Compliment"
         },
         {  
            "code":"9",
            "description":"Other"
         },
         {  
            "feedbackCategory":{  
               "code":"3",
               "description":"Other"
            },
            "feedbackSubjects":[  
               {  
                  "code":"15",
                  "description":"Contacting Agero via Phone"
               },
               {  
                  "code":"16",
                  "description":"Agent Interaction"
               },
               {  
                  "code":"6",
                  "description":"Suggestion"
               },
               {  
                  "code":"7",
                  "description":"Question"
               },
               {  
                  "code":"8",
                  "description":"Compliment"
               },
               {  
                  "code":"9",
                  "description":"Other"
               }
            ]
         }
      ]
   }
]          
            
### Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|


### Get Feedback Option Tree [GET]

+ Request ()

    + Body
    
            GET https://api-test.enterprise.agero.com/v1/id/Feedback/feedbackOptions
            Host: api-test.enterprise.agero.com
                

+ Response 200 ()

    + Body

            HTTP/1.1 200 Ok
            [  
            {  
              "feedbackCategory":{  
                 "code":"1",
                 "description":"Job Details"
              },
              "feedbackSubjects":[  
                 {  
                    "code":"1",
                    "description":"Customer Info"
                 },
                 {  
                    "code":"2",
                    "description":"Vehicle Info"
                 },
                 {  
                    "code":"3",
                    "description":"Service Needed Info"
                 },
                 {  
                    "code":"4",
                    "description":"Equipment Info"
                 },
                 {  
                    "code":"5",
                    "description":"Address Info"
                 },
                 {  
                    "code":"6",
                    "description":"Suggestion"
                 },
                 {  
                    "code":"7",
                    "description":"Question"
                 },
                 {  
                    "code":"8",
                    "description":"Compliment"
                 },
                 {  
                    "code":"9",
                    "description":"Other"
                 }
              ]
             },
             {  
              "feedbackCategory":{  
                 "code":"2",
                 "description":"Roadside Connect App"
              },
              "feedbackSubjects":[  
                 {  
                    "code":"10",
                    "description":"Maps"
                 },
                 {  
                    "code":"11",
                    "description":"signatures"
                 },
                 {  
                    "code":"12",
                    "description":"Status Info"
                 },
                 {  
                    "code":"13",
                    "description":"Job Offer Functionality"
                 },
                 {  
                    "code":"14",
                    "description":"Driver Assignment"
                 },
                 {  
                    "code":"6",
                    "description":"Suggestion"
                 },
                 {  
                    "code":"7",
                    "description":"Question"
                 },
                 {  
                    "code":"8",
                    "description":"Compliment"
                 },
                 {  
                    "code":"9",
                    "description":"Other"
                 },
                 {  
                    "feedbackCategory":{  
                       "code":"3",
                       "description":"Other"
                    },
                    "feedbackSubjects":[  
                       {  
                          "code":"15",
                          "description":"Contacting Agero via Phone"
                       },
                       {  
                          "code":"16",
                          "description":"Agent Interaction"
                       },
                       {  
                          "code":"6",
                          "description":"Suggestion"
                       },
                       {  
                          "code":"7",
                          "description":"Question"
                       },
                       {  
                          "code":"8",
                          "description":"Compliment"
                       },
                       {  
                          "code":"9",
                          "description":"Other"
                       }
                    ]
                 }
              ]
            }
            ]
            
## 22.2 Submit FeedbackPost  [/Feedback/feedbackPosts] 

###Description

Allows the user to submit feedbackposts.

###Sample Request URL

/Feedback/feedbackPosts


###Request Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
|     | Represents the feedback  |YES|   FeedbackPost   |

  
###Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
|   Id  | Represents the unique identifier    of the feedbackPost |YES|  String    |READ ONLY|

   
###Sample Request APP Feedback

    POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/Feedback/feedbackPosts
    Host: api-test.enterprise.agero.com
    {
    "category": {
    "code": "1"
    },
    "subject":
    {
    "code": "1"
    },
    "comment": "This is a test comment" ,
    "vendorId": "123456",
    "submittedOn": "2014-04-09T09:54:34Z" ,
    "submittedBy": "Protow" ,
    "submittersEmailAddress": "protow@protowdp.com"
    }    
        
###Sample Request Dispatch Feedback

    POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/feedbackPosts
    Host: api-test.enterprise.agero.com
    {  
       "category":{  
          "code":"1"
       },
       "subject":{  
          "code":"1"
       },
       "poNumber":"464574577",
       "comment":"This is a test comment",
       "vendorId":"123456",
       "submittedOn":"2014-04-09T09:54:34Z",
       "submittedBy":"Protow",
       "submittersEmailAddress":"protow@protowdp.com"
    }
                    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|400       |Invalid  Request       |INVALID_DISPATCH_REQUEST_NUMBER|Dispatch Request Number is Missing  |No Dispatch Request Number is provided|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|404       |  Resource Not Found  |  NO_DISPATCH_REQUEST_NUMBER_FOUND  | No Dispatch Request Number Found     | No Dispatct Request Number exists in the system|
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|

###Submit FeedbackPost [GET]

+ Request ()

    + Body
    
            POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/feedbackPosts
            Host: api-test.enterprise.agero.com
            {
            "category": {
            "code": "1"
            },
            "subject":
            {
            "code": "1"
            },
            "comment": "This is a test comment" ,
            "vendorId": "123456",
            "submittedOn": "2014-04-09T09:54:34Z" ,
            "submittedBy": "Protow" ,
            "submittersEmailAddress": "protow@protowdp.com"
            }  
            
            POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/feedbackPosts
            Host: api-test.enterprise.agero.com
            {
            "category": {
            "code": "1"
            },
            "subject":
            {
            "code": "1"
            }, "poNumber": "464574577" ,
            "comment": "This is a test comment",
            "vendorId": "123456",
            "submittedOn": "2014-04-09T09:54:34Z" ,
            "submittedBy": "Protow" ,
            "submittersEmailAddress": "protow@protowdp.com"
            }
                

+ Response 200 ()

    + Body

            HTTP/1.1 201 CREATED
            {
            "id": "9879798"
            }

            
## 22.3 Retrieve FeedbackPosts  [/Feedback/feedbackPosts?poNumber={poNumber}&startDateTime={startDateTime}&endDateTime={endDateTime}] 

###Description

Allows the user to retrieve posted feedback on a given dispatch.

###Sample Request URL

/feedbackPosts?poNumber=456363463
/feedbackPosts?startDateTime=2014-04-09T09:54:34Z
/feedbackPosts?startDateTime=2014-04-09T09:54:34Z&endDateTime=2014-04-09T09:54:34Z

###Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
| poNumber    | generated  poNumber on the dispatch  |YES|   String   |
| startDateTime    |  Represents the startDateTime filter for submittedDateTime  |NO|   DateTime   |  UTC Format   2014-04-09T09:54:34Z startDateTime has to be earlier than endDateTime   |
| endDateTime    | Represents the endDateTime filter for  submittedDateTime |NO|   DateTime   | UTC format 2014-04-09T09:54:34Z|

  
###Response  Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
|     | Represents the list of feedback items  |YES|   FeedbackPost[]   |

   
###Sample Request 



            POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/Feedback/feedbackPosts?poNumber=456363463& startDateTime=2014-04-09T09:54:34Z&endDateTime=2014-04-09T09:54:34Z
            Host: api-test.enterprise.agero.com
           [  
           {  
              "category":{  
                 "code":"1"
              },
              "subject":{  
                 "code":"1"
              },
              "message":"This is a test comment",
              "submittedOn":"2014-04-09T09:54:34Z",
              "submittedBy":"Protow",
              "submittersEmailAddress":"protow@protowdp.com"
           },
           {  
              "category":{  
                 "code":"1"
              },
              "subject":{  
                 "code":"2"
              },
              "message":"This is a test comment",
              "submittedOn":"2014-04-09T09:54:34Z",
              "submittedBy":"Protow",
              "submittersEmailAddress":"protow@protowdp.com"
           }
        ]
            
###Sample Response

            [  
           {  
              "feedbackPostId":"57695476",
              "category":{  
                 "code":"1"
              },
              "subject":{  
                 "code":"1"
              },
              "comment":"This is a test comment",
              "vendorId":"123456",
              "submittedOn":"2014-04-09T09:54:34Z",
              "submittedBy":"Protow",
              "submittersEmailAddress":"protow@protowdp.com"
           },
           {  
              "feedbackPostId":"57695477",
              "category":{  
                 "code":"1"
              },
              "subject":{  
                 "code":"2"
              },
              "comment":"This is a test comment",
              "vendorId":"123456",
              "submittedOn":"2014-04-09T09:54:34Z",
              "submittedBy":"Protow",
              "submittersEmailAddress":"protow@protowdp.com"
           }
        ]
                
                    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|400       |Invalid Request     |INVALID_PONUMBER  |PO Number is missing  |No PO Number is provided|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|404       |  Resource Not Found  | NO_ PONUMBER_FOUND |  No Vendor found      |  No PONUMBER exists  in the system for the given PO Number|
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|



###Retrieve FeedbackPosts [GET]

+ Request ()

    + Body
    
            POST https://api-test.enterprise.agero.com/v1/id/dispatches/543634634/feedback
            Host: api-test.enterprise.agero.com
            [  
               {  
                  "category":{  
                     "code":"1"
                  },
                  "subject":{  
                     "code":"1"
                  },
                  "message":"This is a test comment",
                  "submittedOn":"2014-04-09T09:54:34Z",
                  "submittedBy":"Protow",
                  "submittersEmailAddress":"protow@protowdp.com"
               },
               {  
                  "category":{  
                     "code":"1"
                  },
                  "subject":{  
                     "code":"2"
                  },
                  "message":"This is a test comment",
                  "submittedOn":"2014-04-09T09:54:34Z",
                  "submittedBy":"Protow",
                  "submittersEmailAddress":"protow@protowdp.com"
               }
            ]
                

+ Response 200 ()

    + Body

            [  
               {  
                  "feedbackPostId":"57695476",
                  "category":{  
                     "code":"1"
                  },
                  "subject":{  
                     "code":"1"
                  },
                  "comment":"This is a test comment",
                  "vendorId":"123456",
                  "submittedOn":"2014-04-09T09:54:34Z",
                  "submittedBy":"Protow",
                  "submittersEmailAddress":"protow@protowdp.com"
               },
               {  
                  "feedbackPostId":"57695477",
                  "category":{  
                     "code":"1"
                  },
                  "subject":{  
                     "code":"2"
                  },
                  "comment":"This is a test comment",
                  "vendorId":"123456",
                  "submittedOn":"2014-04-09T09:54:34Z",
                  "submittedBy":"Protow",
                  "submittersEmailAddress":"protow@protowdp.com"
               }
            ]
            

## 22.4 Retrieve a FeedbackPost  [/Feedback/feedbackPosts/{feedbackPostId}] 

###Description

Allows the user to retrieve a posted feedback for a give id.

###Sample Request URL

/Feedback/feedbackPosts/57695476

###Request Parameters

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
| feedbackPostId    |  Represents the unique identification Number of the feedback post  |YES|   String   |

###Request Schema

N/A
                                                                                                    
###Response Schema

| Schema Property|Description  |Is Required|Type|Business Rules|
|:--------------|:-------------|:----------|:---|:-------------|  
|     |  Represents the unique identification Number of the feedback post  |YES|   FeedbackPost   |

 
                            
###Sample Request 



    GET https://api-test.enterprise.agero.com/v1/id/Feedback/feedbackPosts/456546456
    Host: api-test.enterprise.agero.com
            
###Sample Response

    HTTP/1.1 201 Ok
       {  
           "id":"456546456",
           "category":{  
              "code":"1"
           },
           "subject":{  
              "code":"1"
           },
           "poNumber":"4645646",
           "message":"This is a test comment",
           "vendorId":"124568",
           "submittedOn":"2014-04-09T09:54:34Z",
           "submittedBy":"Protow",
           "submittersEmailAddress":"protow@protowdp.com"
        }
                
                    
###Errors 

|HTTP Code |HTTP Reason Phrase|Error Code | Message |Reason  | 
|:---------|:----------------|:----------|:--------|:--------|
|400       |Invalid  Request       |INVALID_FEEDBACKID |VendorId is missing   |No FEEDBACKID is provided|
|401       |Unauthorized      |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided|
|404       |  Resource Not Found  |  NO_Feedback_FOUND   |  No Vendor found      |  Feedback  does not exist in the system for the given feedbackId|
|500       | Server Error     |UNKNOWN      |Unknown Error   |An unknown error occurred at the server|



###Retrieve FeedbackPosts [GET]

+ Request ()

    + Body
    
            GET https://api-test.enterprise.agero.com/v1/id/feedbackPosts/456546456
            Host: api-test.enterprise.agero.com
                

+ Response 200 ()

    + Body

            HTTP/1.1 201 Ok
            {  
               "id":"456546456",
               "category":{  
                  "code":"1"
               },
               "subject":{  
                  "code":"1"
               },
               "poNumber":"4645646",
               "message":"This is a test comment",
               "submittedOn":"2014-04-09T09:54:34Z",
               "submittedBy":"Protow",
               "submittersEmailAddress":"protow@protowdp.com"
             }
                        
# Group 23 Notification Subscriptions API
## 23.1 Get Notification Subscriptions [/vendors/{vendorId}/notifications/subscriptions] 
### Description

The "Get  Notifications Subscritions " API is a façade 
API that allows users to retrieve all notifications 
including client notifications & server notifications in one call

### Sample Request URL

Vendors/57515/notifications/subscriptions

### Request Parameters

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|vendorId| Represents a unique identifier of the vendor for whom the subscriptions are being requested |YES   |   String |


### Sample Request

    {
        
        " callBackUrl" : "http://yourServename/.../notify",
        " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
        " notificationEvents" : "1,2,3,…"
    }


### Request Schema

N/A

### Response Schema

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|clientNotificationSubscriptions| Represents a list of client notification subscriptions|YES   |   ClientNotificationSubscription[]   |
|serverNotificationSubscriptions| Represents a list of Server notification subscriptions|YES   |   ServerNotificationSubscription[]   |

                         
### Repsonse

HTTP 200

### Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Missing callback URL | 
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|



### Notification Subscriptions[GET]

+ Request ()

   + Body
    
            {
                
                "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
                "deviceToken" : null,
                "platform" : "Android",
                "osVersion" : "4.0.3"
            }


+ Response 200 ()

   + Body
   
            {
                "clientNotificationSubscriptions":[  
                  {  
                     "subscriptionId":"JKLJIOHIOKKNKDSADWQDSD",
                     "deviceId":"ffffffff-bd6c-cc22-e117-73f80033c587",
                     "deviceToken":"HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
                     "platform":"Android",
                     "osVersion":"4.0.3"
                  },
                  {  
                     "subscriptionId":"JKLJIOHIOKKNKDSADWQDSD",
                     "deviceId":"ffffffff-bd6c-cc22-e117-73f80033c587",
                     "deviceToken":"HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
                     "platform":"iOS",
                     "osVersion":"6.1"
                  }
                ],
                "serverNotificationSubscriptions":[  
                  {  
                     " subscriptionId":"HHKGUF57578578GJG",
                     " callBackUrl":"http://yourServename/.../notify",
                     " notificationToken":"TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                     " notificationEvents":"1,2,3,…"
                  }
                ]
            }


## 23.2 Client Notification Subscriptions [/vendors/{vendorId}/notifications/clientNotificationsubscriptions] 

###Description


###Sample Request URL

Vendors/57515/notifications/clientNotificationSubscriptions

###Request Parameters

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|vendorId| Represents a unique identifier of the vendor for whom the subscriptions are being requested |YES   |   String |

   
###Sample Request

N/A


###Request Schema

N/A

###Response Schema

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|  
|clientNotificationSubscriptions| Represents a list of client notification subscriptions|YES   |   ClientNotificationSubscription[]   |
                                    
                                     
   
###Repsonse

   [  
   {  
      "subscriptionId":"JKLJIOHIOKKNKDSADWQDSD",
      "deviceId":"ffffffff-bd6c-cc22-e117-73f80033c587",
      "deviceToken":"HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
      "platform":"Android",
      "osVersion":"4.0.3"
   },
   {  
      "subscriptionId":"JKLJIOHIOKKNKDSADWQDSD",
      "deviceId":"ffffffff-bd6c-cc22-e117-73f80033c587",
      "deviceToken":"HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
      "platform":"iOS",
      "osVersion":"6.1"
   }
]


###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Missing callback URL | 
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|



###Client Notification Subscriptions [GET]

+ Response 200 ()

   + Body
    
                [
                    {
                    "subscriptionId" : "JKLJIOHIOKKNKDSADWQDSD",
                    "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
                    "deviceToken" : "HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
                    "platform" : "Android",
                    "osVersion" : "4.0.3"
                    },
                    {
                    "subscriptionId" : "JKLJIOHIOKKNKDSADWQDSD",
                    "deviceId" : "ffffffff-bd6c-cc22-e117-73f80033c587",
                    "deviceToken" : "HUGIGIGBKJBJHIUTIYGGJHFGJHFGFGHF",
                    "platform" : "iOS",
                    "osVersion" : "6.1"
                    }
               ]

                
## 23.3 Server Notification Subscriptions [/vendors/{vendorId}/notifications/serverNotificationsubscriptions] 

###Description



###Sample Request URL

Vendors/57515/notifications/serverNotificationSubscriptions

###Request Parameters

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|vendorId| Represents a unique identifier of the vendor for whom the subscriptions are being requested |YES   |   String |

###Sample Request

N/A


###Request Schema

N/A

###Response Schema

| Schema Property|Description   |Is Required |Type|Business Rules|
|:---------------|:-------------|:-------------|:-------------|:-------------|   
|serverNotificationSubscriptions| Represents a list of Server notification subscriptions|YES   |   ServerNotificationSubscription[]   |

###Repsonse

    [
        {
        " subscriptionId" : "HHKGUF57578578GJG",
        " callBackUrl" : "http://yourServename/.../notify",
        " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
        " notificationEvents" : "1,2,3,…"
        }
    ]


###Errors 

|HTTP Code |Error Code | Message |Reason  | 
|:---------|:--------- |:--------|:--------|
|400       |INVALID_REQUEST |Missing callback URL | 
|401       |INVALID_TOKEN| oauth.v2.InvalidAccessToken: Invalid access token |A valid OAuth token was not provided| 
|500       | SERVER ERROR        |Unknown Error   |An unknown error occurred at the server|



###Server Notification Subscriptions [GET]

+ Response 200 ()

   + Body
    
            [
                {
                " subscriptionId" : "HHKGUF57578578GJG",
                " callBackUrl" : "http://yourServename/.../notify",
                " notificationToken" : "TmxhbG9YYTNwYTQ6TFk1VWhPY2",
                " notificationEvents" : "1,2,3,…"
                }
            ]
                    

